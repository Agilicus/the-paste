(function(){var t,e,n,r,a;t=window.jQuery,t.paste=function(t){var n;return"undefined"!=typeof console&&null!==console&&console.log("DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead."),n=e.mountNonInputable(t),n._container},t.fn.pastableNonInputable=function(){var n,r,a,o;for(o=this,r=0,a=o.length;r<a;r++)n=o[r],n._pastable||t(n).is("textarea, input:text, [contenteditable]")||(e.mountNonInputable(n),n._pastable=!0);return this},t.fn.pastableTextarea=function(){var n,r,a,o;for(o=this,r=0,a=o.length;r<a;r++)n=o[r],n._pastable||t(n).is(":not(textarea, input:text)")||(e.mountTextarea(n),n._pastable=!0);return this},t.fn.pastableContenteditable=function(){var n,r,a,o;for(o=this,r=0,a=o.length;r<a;r++)n=o[r],n._pastable||t(n).is(":not([contenteditable])")||(e.mountContenteditable(n),n._pastable=!0);return this},r=function(t,e){var n,r,a,o,i,u,s,l,c,f,g;if(null==e&&(e=512),!(l=t.match(/^data\:([^\;]+)\;base64\,(.+)$/)))return null;for(f=l,l=f[0],u=f[1],n=f[2],o=atob(n),a=[],c=0;c<o.length;){for(g=o.slice(c,c+e),i=new Array(g.length),s=0;s<g.length;)i[s]=g.charCodeAt(s),s++;r=new Uint8Array(i),a.push(r),c+=e}return new Blob(a,{type:u})},n=function(){return t(document.createElement("div")).attr("contenteditable",!0).attr("aria-hidden",!0).attr("tabindex",-1).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},a=function(e,n){var r,a,o,i,u,s;return i=void 0,u=void 0,o=void 0,a=void 0,r=void 0,"area"===(s=e.nodeName.toLowerCase())?(i=e.parentNode,u=i.name,!(!e.href||!u||"map"!==i.nodeName.toLowerCase())&&(o=t("img[usemap='#"+u+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(s)?(a=!e.disabled)&&(r=t(e).closest("fieldset")[0])&&(a=!r.disabled):a="a"===s?e.href||n:n,(a=a||t(e).is("[contenteditable]"))&&t(e).is(":visible"))},e=function(){function e(e,n){this._container=e,this._target=n,this._container=t(this._container),this._target=t(this._target).addClass("pastable"),this._container.on("paste",function(t){return function(e){var n,r,a,o,i,u,s,l,c,f,g,d,p;if(e.currentTarget!==e.target)return e.preventDefault();if(t._paste_event_fired=!0,null!=(null!=(c=e.originalEvent)?c.clipboardData:void 0))if(n=e.originalEvent.clipboardData,n.items)for(f=n.items,o=0,u=f.length;o<u;o++){if(a=f[o],a.type.match(/^image\//)){l=new FileReader,l.onload=function(e){return t._handleImage(e.target.result)};try{l.readAsDataURL(a.getAsFile())}catch(t){}e.preventDefault();break}"text/plain"===a.type&&a.getAsString(function(e){return t._target.trigger("pasteText",{text:e})})}else-1!==Array.prototype.indexOf.call(n.types,"text/plain")&&(p=n.getData("Text"),setTimeout(function(){return t._target.trigger("pasteText",{text:p})},1)),t._checkImagesInContainer(function(e){return t._handleImage(e)});if(n=window.clipboardData)if(null!=(g=p=n.getData("Text"))?g.length:void 0)setTimeout(function(){return t._target.trigger("pasteText",{text:p}),t._target.trigger("_pasteCheckContainerDone")},1);else{for(d=n.files,i=0,s=d.length;i<s;i++)r=d[i],t._handleImage(URL.createObjectURL(r));t._checkImagesInContainer(function(t){})}return null}}(this))}return e.prototype._target=null,e.prototype._container=null,e.mountNonInputable=function(r){var o;return o=new e(n().appendTo(r),r),t(r).on("click",function(t){return function(t){if(!a(t.target,!1))return o._container.focus()}}()),o._container.on("focus",function(e){return function(){return t(r).addClass("pastable-focus")}}()),o._container.on("blur",function(e){return function(){return t(r).removeClass("pastable-focus")}}())},e.mountTextarea=function(r){var a,o,i,u;return("undefined"!=typeof DataTransfer&&null!==DataTransfer?DataTransfer.prototype:void 0)&&(null!=(i=Object.getOwnPropertyDescriptor)&&null!=(u=i.call(Object,DataTransfer.prototype,"items"))?u.get:void 0)?this.mountContenteditable(r):(o=new e(n().insertBefore(r),r),a=!1,t(r).on("keyup",function(t){var e;return 17!==(e=t.keyCode)&&224!==e||(a=!1),null}),t(r).on("keydown",function(e){var n;return 17!==(n=e.keyCode)&&224!==n||(a=!0),null!=e.ctrlKey&&null!=e.metaKey&&(a=e.ctrlKey||e.metaKey),a&&86===e.keyCode&&(o._textarea_focus_stolen=!0,o._container.focus(),o._paste_event_fired=!1,setTimeout(function(e){return function(){if(!o._paste_event_fired)return t(r).focus(),o._textarea_focus_stolen=!1}}(),1)),null}),t(r).on("paste",function(t){return function(){}}()),t(r).on("focus",function(e){return function(){if(!o._textarea_focus_stolen)return t(r).addClass("pastable-focus")}}()),t(r).on("blur",function(e){return function(){if(!o._textarea_focus_stolen)return t(r).removeClass("pastable-focus")}}()),t(o._target).on("_pasteCheckContainerDone",function(e){return function(){return t(r).focus(),o._textarea_focus_stolen=!1}}()),t(o._target).on("pasteText",function(e){return function(e,n){var a,o,i;return i=t(r).prop("selectionStart"),o=t(r).prop("selectionEnd"),a=t(r).val(),t(r).val(""+a.slice(0,i)+n.text+a.slice(o)),t(r)[0].setSelectionRange(i+n.text.length,i+n.text.length),t(r).trigger("change")}}()))},e.mountContenteditable=function(n){return new e(n,n),t(n).on("focus",function(e){return function(){return t(n).addClass("pastable-focus")}}()),t(n).on("blur",function(e){return function(){return t(n).removeClass("pastable-focus")}}())},e.prototype._handleImage=function(t){var e;return t.match(/^webkit\-fake\-url\:\/\//)?this._target.trigger("pasteImageError",{message:"You are trying to paste an image in Safari, however we are unable to retieve its data."}):(this._target.trigger("pasteImageStart"),e=new Image,e.crossOrigin="anonymous",e.onload=function(t){return function(){var n,a,o,i;a=document.createElement("canvas"),a.width=e.width,a.height=e.height,o=a.getContext("2d"),o.drawImage(e,0,0,a.width,a.height),i=null;try{i=a.toDataURL("image/png"),n=r(i)}catch(t){}return i&&t._target.trigger("pasteImage",{blob:n,dataURL:i,width:e.width,height:e.height}),t._target.trigger("pasteImageEnd")}}(this),e.onerror=function(e){return function(){return e._target.trigger("pasteImageError",{message:"Failed to get image from: "+t,url:t}),e._target.trigger("pasteImageEnd")}}(this),e.src=t)},e.prototype._checkImagesInContainer=function(e){var n,r,a,o,i;for(i=Math.floor(1e3*Math.random()),o=this._container.find("img"),r=0,a=o.length;r<a;r++)n=o[r],n["_paste_marked_"+i]=!0;return setTimeout(function(r){return function(){var a,o,u;for(u=r._container.find("img"),a=0,o=u.length;a<o;a++)n=u[a],n["_paste_marked_"+i]||(e(n.src),t(n).remove());return r._target.trigger("_pasteCheckContainerDone")}}(this),1)},e}()}).call(this);
!function(e,t){var a=(navigator.userAgent.indexOf("Chrome"),0);thepaste=t.thepaste=e.extend({supports:{paste:"paste"in document||"onpaste"in document||"object"==typeof window.onpaste||"onpaste"in document.createElement("DIV")},view:{},insertImage:function(e,t,o){var n="__thepaste_img_"+a++,s='<img id="'+n+'" class="alignnone size-full" src="'+e+'" />';o.insertContent(s),thepaste.options.editor.auto_upload&&thepaste.uploadImage(o.$("#"+n).get(0),o)},btoaUnicode:function(e){return btoa(unescape(encodeURIComponent(e)));var e},uploadImage:function(t,n){var s,p,r,i=t.src,l=function(s){var l="__thepaste_box_"+a++,d=s.match(/^data\:([^\;]+)\;/)[1];file=new o.Blob(null,{data:s}),suffix=thepaste.options.mime_types.convert[d],e(t).wrap('<div id="'+l+'" data-progress="0" class="thepaste-image-placeholder" contenteditable="false"></div>'),r=n.$("#"+l),file.name=thepaste.l10n.pasted+"."+suffix,file.type=d;var u=function(){p.uploader.uploader.uploader.addFile(file)};p?(p.state().reset(),u()):(p=wp.media.editor.open(window.wpActiveEditor,{frame:"post",state:"insert",title:thepaste.l10n.copy_paste,multiple:!1}),p.close(),p.uploader.uploader&&p.uploader.uploader.ready?u():p.on("uploader:ready",u)),p.uploader.uploader.uploader.bind("UploadProgress",function(e){r.attr("data-progress",e.total.percent)}),p.uploader.uploader.uploader.bind("FileUploaded",function(t,a){var o='<img class="alignnone wp-image-'+a.attachment.id+' size-full" src="'+a.attachment.changed.url+'" />';r.replaceWith(o),n.$('img[src="'+i+'"]').each(function(){e(this).replaceWith(o)})}),p.uploader.uploader.uploader.bind("Error",function(e,t){console.log(e,t)})};"blob:"===i.substr(0,5)?(s=new XMLHttpRequest,s.responseType="blob",s.onreadystatechange=function(){var e;4==s.readyState&&(e=new FileReader,e.onload=function(){l(e.result)},e.readAsDataURL(s.response))},s.open("GET",i),s.send(null)):"data:"===i.substr(0,5)?l(i):i.match(/^https?:/)},clipboardHasImage:function(t){var a=!1;return t.items?(e.each(t.items,function(e,t){if(t.type in thepaste.options.mime_types.paste)return a=!0,!1}),a):t.types?(e.each(thepaste.options.mime_types.paste,function(e,o){if(t.types.indexOf(e)>-1)return a=!0,!1}),a):(console.log(t),null)}},thepaste),console.log(thepaste)}(jQuery,wp.media);
!function(e,t){var a=wp.media.thepaste.l10n;navigator.userAgent.indexOf("Chrome");e.extend(wp.Uploader.prototype,{success:function(e){}}),_.extend(wp.media.view.MediaFrame.Select.prototype,{_parentInitialize:wp.media.view.MediaFrame.Select.prototype.initialize,initialize:function(){this._parentInitialize.apply(this,arguments),this.bindPasteHandlers()},_parentBrowseRouter:wp.media.view.MediaFrame.Select.prototype.browseRouter,browseRouter:function(e){this._parentBrowseRouter.apply(this,arguments),wp.media.thepaste.supports.paste&&e.set({pasteboard:{text:a.copy_paste,priority:35}})},bindPasteHandlers:function(){var e=!1;this.on("content:render close",function(t){e&&"function"==typeof e.dismiss&&e.dismiss(),void 0!==t&&(e=t)},this),this.on("content:create:pasteboard",this.contentCreatePasteboard,this),this.on("content:render:pasteboard",this.contentRenderGrabber,this),frame=this},contentCreatePasteboard:function(e){this.state();this.currentPasteView=e.view=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this,grabber:wp.media.thepaste.view.Pasteboard}),this.listenTo(this.currentPasteView.uploader,"action:uploaded:dataimage",this.uploadedDataImage)},contentRenderGrabber:function(e){e.startGrabbing()},uploadedDataImage:function(e){this.stopListening(this.currentPasteView.uploader,"action:uploaded:dataimage");var t={view:null};this.browseContent(t),this.content.set(t.view),this.router.get().select("browse")}}),_.extend(wp.media.view.AttachmentsBrowser.prototype,{_parentInitialize:wp.media.view.AttachmentsBrowser.prototype.initialize,initialize:function(){var e,t=this;this._parentInitialize.apply(this,arguments),this.thepaste={paste:{grabber:!1,modal:!1,mode:"paste"},current:!1},this.controller instanceof wp.media.view.MediaFrame.Select||wp.media.thepaste.supports.paste&&(e=new wp.media.view.Button({text:a.copy_paste,className:"grabber-button",priority:-64,click:function(){t.thepaste.active=t.thepaste.paste,t.pasteOpen(a.copy_paste)}}),this.thepaste.paste.grabber=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this.controller,grabber:wp.media.thepaste.view.Pasteboard,wpuploader:this.controller.uploader.uploader.uploader}),this.toolbar.set("pasteModeButton",e.render()))},thepasteUploaded:function(e){this.thepaste.active.grabber.dismiss(),this.thepaste.modal.close(),this.thepasteClose()},thepasteError:function(e){console.log("error",e)},pasteOpen:function(e){var t=this;this.thepaste.modal=new wp.media.view.Modal({controller:this,title:e}),this.thepaste.modal.content(this.thepaste.active.grabber),this.thepaste.modal.open(),this.thepaste.modal.on("close",function(){t.thepasteClose.apply(t),t.thepaste.active.grabber.stopGrabbing()}),this.thepaste.active.grabber.startGrabbing(),this.listenTo(this.thepaste.active.grabber.uploader,"action:uploaded:dataimage",this.thepasteUploaded),this.listenTo(this.thepaste.active.grabber.uploader,"error:uploaded:dataimage",this.thepasteError)},thepasteClose:function(){this.controller.deactivateMode(this.thepaste.active.mode).activateMode("edit"),this.stopListening(this.thepaste.active.grabber.uploader,"action:uploaded:dataimage"),this.stopListening(this.thepaste.active.grabber.uploader,"error:uploaded:dataimage")}})}(jQuery,window);
!function(t,e,i){var a=wp.media.thepaste,s=(wp.media.view.Button,wp.media.view.Modal,a.l10n);wp.media.thepaste.view.DataSourceImageUploader=wp.media.View.extend({template:wp.template("thepaste-uploader"),className:"thepaste-uploader",controller:null,image:null,$discardBtn:null,$uploadBtn:null,uploader:null,events:{'click [data-action="upload"]':"uploadImage",'click [data-action="discard"]':"discardImage"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),_.defaults(this.options,{defaultFileName:s.image});new wp.media.View({tagName:"div",className:"instruments",controller:this.controller});this.uploader=this.options.uploder},setImageData:function(t){var e=this.$imageContainer.html("").get(0),s=this,r=t.match(/data:(image\/(\w+));/)[1];return a.options.mime_types.convert[r]||(r=this.options.defaultFileFormat),this.image&&this.image.destroy(),this.image=new i.Image,this.image.onload=function(){var t=s.getUploader().getOption("resize"),i=Math.max(t.width/this.width,t.height/this.height);!!t&&i<1&&this.downsize(this.width*i,this.height*i),this.embed(e)},this.image.bind("Resize",function(t){this.embed(e)}),this.image.load(t),this.$imageContainer&&this.$imageContainer.append(this.image),this.$('[data-setting="format"] input[value="'+r+'"]').prop("checked",!0),this.disabled(!1),this},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$imageContainer=this.$(".image-container"),this.$discardBtn=this.$('[data-action="discard"]'),this.$uploadBtn=this.$('[data-action="upload"]'),this.$('[data-setting="title"]').val(this.options.defaultFileName),this},discardImage:function(){this.trigger("action:discard:dataimage",this),this.unbindUploaderEvents()},uploadImage:function(){var t=this.$('[data-setting="format"] :checked').val(),e=a.options.mime_types.convert[t],i=this.$('input[data-setting="title"]').val()+"."+e,s=this.image.getAsBlob(t,a.options.jpeg_quality);this.bindUploaderEvents(),s.detach(s.getSource()),s.name=i,s.type=t,this.getUploader().addFile(s,i),this.disabled(!0),this.trigger("action:upload:dataimage",this)},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},disabled:function(t){this.$discardBtn.prop("disabled",t),this.$uploadBtn.prop("disabled",t)},_uploadSuccessHandler:function(){this.trigger("action:uploaded:dataimage"),this.disabled(!1),this.unbindUploaderEvents()},_uploadErrorHandler:function(){this.trigger("error:uploaded:dataimage"),this.disabled(!1),this.unbindUploaderEvents()},bindUploaderEvents:function(){this.getUploader().bind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().bind("Error",this._uploadErrorHandler,this)},unbindUploaderEvents:function(){this.getUploader().unbind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().unbind("Error",this._uploadErrorHandler,this)},getUploader:function(){return this.controller.uploader.uploader.uploader}}),wp.media.thepaste.view.Pasteboard=wp.media.View.extend({template:wp.template("thepaste-pasteboard"),className:"thepaste-pasteboard",controller:null,action:"paste",$pasteboard:null,render:function(){var t=this;return wp.media.View.prototype.render.apply(this,arguments),this.$pasteboard=this.$(".injector").pastableContenteditable(),this.$message=this.$(".message"),this.$pasteboard.on("click",function(){t.show_message("")}),this},start:function(){var e,i=this;return this.imagePasted=!1,this.$pasteboard.on("paste",function(t){e=wp.media.thepaste.clipboardHasImage(t.originalEvent.clipboardData)}).on("pasteText",function(a,r){e||i.imagePasted||(i.show_message(s.paste_error_no_image),t(this).html(""))}).on("pasteImage",function(t,e){i.imagePasted||(i.trigger("action:create:dataimage",this,e.dataURL),i.imagePasted=!0)}).on("pasteImageError",function(e,a){i.show_message(s.paste_error),t(this).html("")}),setTimeout(function(){i.$pasteboard.get(0).focus()},1),this},stop:function(){return this.$pasteboard.off("pasteImage").off("pasteImageError").off("pasteText"),this},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},show_message:function(t){this.$message.text(t)}}),wp.media.thepaste.view.DataSourceImageGrabber=wp.media.View.extend({template:wp.template("thepaste-grabber"),className:"thepaste-grabber",grabber:null,uploader:null,initialize:function(){var t=wp.media.View.prototype.initialize.apply(this,arguments);return _.defaults(this.options,{wpuploader:null,defaultFileName:s.pasted,defaultFileFormat:"image/png",title:s.copy_paste}),this.grabber=new this.options.grabber({controller:this.controller}),this.uploader=new wp.media.thepaste.view.DataSourceImageUploader({controller:this.controller,uploder:this.options.wpuploader,defaultFileName:this.options.defaultFileName,defaultFileFormat:this.options.defaultFileFormat}),this.render(),this.listenTo(this.grabber,"action:create:dataimage",this.imageCreated),this.listenTo(this.uploader,"action:discard:dataimage",this.startGrabbing),t},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$(".content").append(this.grabber.render().$el).append(this.uploader.render().$el),this},imageCreated:function(t,e){this.grabber.stop().hide(),this.uploader.show().setImageData(e)},startGrabbing:function(){return this.uploader.hide(),this.grabber.show().start(),this},stopGrabbing:function(){return this.grabber.stop(),this},getAction:function(){return this.grabber.action},dismiss:function(){return this.grabber.stop(),this}})}(jQuery,window,mOxie);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3RlLmpzIiwidGhlLXBhc3RlLWJhc2UuanMiLCJ0aGUtcGFzdGUuanMiLCJtZWRpYS12aWV3LmpzIl0sIm5hbWVzIjpbIiQiLCJQYXN0ZSIsImNyZWF0ZUhpZGRlbkVkaXRhYmxlIiwiZGF0YVVSTHRvQmxvYiIsImlzRm9jdXNhYmxlIiwid2luZG93IiwialF1ZXJ5IiwicGFzdGUiLCJwYXN0ZUNvbnRhaW5lciIsInBtIiwiY29uc29sZSIsImxvZyIsIm1vdW50Tm9uSW5wdXRhYmxlIiwiX2NvbnRhaW5lciIsImZuIiwicGFzdGFibGVOb25JbnB1dGFibGUiLCJlbCIsImoiLCJsZW4iLCJyZWYiLCJ0aGlzIiwibGVuZ3RoIiwiX3Bhc3RhYmxlIiwiaXMiLCJwYXN0YWJsZVRleHRhcmVhIiwibW91bnRUZXh0YXJlYSIsInBhc3RhYmxlQ29udGVudGVkaXRhYmxlIiwibW91bnRDb250ZW50ZWRpdGFibGUiLCJkYXRhVVJMIiwic2xpY2VTaXplIiwiYjY0RGF0YSIsImJ5dGVBcnJheSIsImJ5dGVBcnJheXMiLCJieXRlQ2hhcmFjdGVycyIsImJ5dGVOdW1iZXJzIiwiY29udGVudFR5cGUiLCJpIiwibSIsIm9mZnNldCIsInNsaWNlIiwibWF0Y2giLCJhdG9iIiwiQXJyYXkiLCJjaGFyQ29kZUF0IiwiVWludDhBcnJheSIsInB1c2giLCJCbG9iIiwidHlwZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHIiLCJjc3MiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwibGVmdCIsIm92ZXJmbG93IiwiZWxlbWVudCIsImhhc1RhYmluZGV4IiwiZmllbGRzZXQiLCJmb2N1c2FibGVJZlZpc2libGUiLCJpbWciLCJtYXAiLCJtYXBOYW1lIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudE5vZGUiLCJuYW1lIiwiaHJlZiIsInRlc3QiLCJkaXNhYmxlZCIsImNsb3Nlc3QiLCJfdGFyZ2V0IiwiYWRkQ2xhc3MiLCJvbiIsIl90aGlzIiwiZXYiLCJjbGlwYm9hcmREYXRhIiwiZmlsZSIsIml0ZW0iLCJrIiwibGVuMSIsInJlYWRlciIsInJlZjEiLCJyZWYyIiwicmVmMyIsInRleHQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJfcGFzdGVfZXZlbnRfZmlyZWQiLCJvcmlnaW5hbEV2ZW50IiwiaXRlbXMiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJfaGFuZGxlSW1hZ2UiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0QXNGaWxlIiwiZXJyb3IiLCJnZXRBc1N0cmluZyIsInN0cmluZyIsInRyaWdnZXIiLCJwcm90b3R5cGUiLCJpbmRleE9mIiwiY2FsbCIsInR5cGVzIiwiZ2V0RGF0YSIsInNldFRpbWVvdXQiLCJfY2hlY2tJbWFnZXNJbkNvbnRhaW5lciIsInNyYyIsImZpbGVzIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibm9uSW5wdXRhYmxlIiwiYXBwZW5kVG8iLCJmb2N1cyIsInJlbW92ZUNsYXNzIiwidGV4dGFyZWEiLCJjdGxEb3duIiwiRGF0YVRyYW5zZmVyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0IiwiaW5zZXJ0QmVmb3JlIiwia2V5Q29kZSIsImN0cmxLZXkiLCJtZXRhS2V5IiwiX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiIsImRhdGEiLCJjb250ZW50IiwiY3VyRW5kIiwiY3VyU3RhcnQiLCJwcm9wIiwidmFsIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJjb250ZW50ZWRpdGFibGUiLCJsb2FkZXIiLCJtZXNzYWdlIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsImJsb2IiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwidG9EYXRhVVJMIiwib25lcnJvciIsInVybCIsImNiIiwidGltZXNwYW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmaW5kIiwicmVtb3ZlIiwiZXhwb3J0cyIsImNvdW50ZXIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0aGVwYXN0ZSIsImV4dGVuZCIsInN1cHBvcnRzIiwidmlldyIsImluc2VydEltYWdlIiwiZWRpdG9yIiwiaWQiLCJpbWFnZUh0bWwiLCJpbnNlcnRDb250ZW50Iiwib3B0aW9ucyIsImF1dG9fdXBsb2FkIiwidXBsb2FkSW1hZ2UiLCJidG9hVW5pY29kZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImltYWdlIiwieGhyIiwid29ya2Zsb3ciLCIkY29udGFpbmVyIiwidXBsb2FkIiwibyIsInN1ZmZpeCIsIm1pbWVfdHlwZXMiLCJjb252ZXJ0Iiwid3JhcCIsImwxMG4iLCJwYXN0ZWQiLCJhZGRGaWxlIiwidXBsb2FkZXIiLCJzdGF0ZSIsInJlc2V0Iiwid3AiLCJtZWRpYSIsIm9wZW4iLCJ3cEFjdGl2ZUVkaXRvciIsImZyYW1lIiwidGl0bGUiLCJjb3B5X3Bhc3RlIiwibXVsdGlwbGUiLCJjbG9zZSIsInJlYWR5IiwiYmluZCIsImUiLCJ0b3RhbCIsInBlcmNlbnQiLCJ1cCIsImFyZ3MiLCJpbWdIVE1MIiwiYXR0YWNobWVudCIsImNoYW5nZWQiLCJyZXBsYWNlV2l0aCIsImVhY2giLCJzdWJzdHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3BvbnNlVHlwZSIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXNwb25zZSIsInNlbmQiLCJjbGlwYm9hcmRIYXNJbWFnZSIsImhhc0ltYWdlIiwiZXh0IiwiVXBsb2FkZXIiLCJzdWNjZXNzIiwiZmlsZV9hdHRhY2htZW50IiwiXyIsIk1lZGlhRnJhbWUiLCJTZWxlY3QiLCJfcGFyZW50SW5pdGlhbGl6ZSIsImluaXRpYWxpemUiLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmRQYXN0ZUhhbmRsZXJzIiwiX3BhcmVudEJyb3dzZVJvdXRlciIsImJyb3dzZVJvdXRlciIsInNldCIsInBhc3RlYm9hcmQiLCJwcmlvcml0eSIsInByZXZpb3VzQ29udGVudCIsImRpc21pc3MiLCJjb250ZW50Q3JlYXRlUGFzdGVib2FyZCIsImNvbnRlbnRSZW5kZXJHcmFiYmVyIiwiY3VycmVudFBhc3RlVmlldyIsIkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIiLCJjb250cm9sbGVyIiwiZ3JhYmJlciIsIlBhc3RlYm9hcmQiLCJsaXN0ZW5UbyIsInVwbG9hZGVkRGF0YUltYWdlIiwic3RhcnRHcmFiYmluZyIsInN0b3BMaXN0ZW5pbmciLCJvYmoiLCJicm93c2VDb250ZW50Iiwicm91dGVyIiwic2VsZWN0IiwiQXR0YWNobWVudHNCcm93c2VyIiwicGFzdGVCdG4iLCJzZWxmIiwibW9kYWwiLCJtb2RlIiwiY3VycmVudCIsIkJ1dHRvbiIsImNsYXNzTmFtZSIsImNsaWNrIiwiYWN0aXZlIiwicGFzdGVPcGVuIiwid3B1cGxvYWRlciIsInRvb2xiYXIiLCJyZW5kZXIiLCJ0aGVwYXN0ZVVwbG9hZGVkIiwidGhlcGFzdGVDbG9zZSIsInRoZXBhc3RlRXJyb3IiLCJNb2RhbCIsInN0b3BHcmFiYmluZyIsImRlYWN0aXZhdGVNb2RlIiwiYWN0aXZhdGVNb2RlIiwiRGF0YVNvdXJjZUltYWdlVXBsb2FkZXIiLCJWaWV3IiwidGVtcGxhdGUiLCIkZGlzY2FyZEJ0biIsIiR1cGxvYWRCdG4iLCJldmVudHMiLCJjbGljayBbZGF0YS1hY3Rpb249XCJ1cGxvYWRcIl0iLCJjbGljayBbZGF0YS1hY3Rpb249XCJkaXNjYXJkXCJdIiwiZGVmYXVsdHMiLCJkZWZhdWx0RmlsZU5hbWUiLCJ0YWdOYW1lIiwidXBsb2RlciIsInNldEltYWdlRGF0YSIsImNvbnRhaW5lciIsIiRpbWFnZUNvbnRhaW5lciIsImh0bWwiLCJmb3JtYXQiLCJkZWZhdWx0RmlsZUZvcm1hdCIsImRlc3Ryb3kiLCJvcHRzIiwiZ2V0VXBsb2FkZXIiLCJnZXRPcHRpb24iLCJzY2FsZSIsIm1heCIsImRvd25zaXplIiwiZW1iZWQiLCJsb2FkIiwiYXBwZW5kIiwiZGlzY2FyZEltYWdlIiwidW5iaW5kVXBsb2FkZXJFdmVudHMiLCJnZXRBc0Jsb2IiLCJqcGVnX3F1YWxpdHkiLCJiaW5kVXBsb2FkZXJFdmVudHMiLCJkZXRhY2giLCJnZXRTb3VyY2UiLCJzaG93IiwiJGVsIiwiaGlkZSIsIl91cGxvYWRTdWNjZXNzSGFuZGxlciIsIl91cGxvYWRFcnJvckhhbmRsZXIiLCJ1bmJpbmQiLCJhY3Rpb24iLCIkcGFzdGVib2FyZCIsIiRtZXNzYWdlIiwic2hvd19tZXNzYWdlIiwic3RhcnQiLCJpbWFnZVBhc3RlZCIsInBhc3RlX2Vycm9yX25vX2ltYWdlIiwicGFzdGVfZXJyb3IiLCJzdG9wIiwib2ZmIiwibXNnIiwicmV0IiwiaW1hZ2VDcmVhdGVkIiwiaW1hZ2VEYXRhIiwiZ2V0QWN0aW9uIiwibU94aWUiXSwibWFwcGluZ3MiOiJDQVFBLFdBQ0UsR0FBSUEsR0FBR0MsRUFBT0MsRUFBc0JDLEVBQWVDLENBRW5ESixHQUFJSyxPQUFPQyxPQUVYTixFQUFFTyxNQUFRLFNBQVNDLEdBQ2pCLEdBQUlDLEVBS0osT0FKdUIsbUJBQVpDLFVBQXVDLE9BQVpBLFNBQ3BDQSxRQUFRQyxJQUFJLDBGQUVkRixFQUFLUixFQUFNVyxrQkFBa0JKLEdBQ3RCQyxFQUFHSSxZQUdaYixFQUFFYyxHQUFHQyxxQkFBdUIsV0FDMUIsR0FBSUMsR0FBSUMsRUFBR0MsRUFBS0MsQ0FFaEIsS0FEQUEsRUFBTUMsS0FDREgsRUFBSSxFQUFHQyxFQUFNQyxFQUFJRSxPQUFRSixFQUFJQyxFQUFLRCxJQUNyQ0QsRUFBS0csRUFBSUYsR0FDTEQsRUFBR00sV0FBYXRCLEVBQUVnQixHQUFJTyxHQUFHLDZDQUc3QnRCLEVBQU1XLGtCQUFrQkksR0FDeEJBLEVBQUdNLFdBQVksRUFFakIsT0FBT0YsT0FHVHBCLEVBQUVjLEdBQUdVLGlCQUFtQixXQUN0QixHQUFJUixHQUFJQyxFQUFHQyxFQUFLQyxDQUVoQixLQURBQSxFQUFNQyxLQUNESCxFQUFJLEVBQUdDLEVBQU1DLEVBQUlFLE9BQVFKLEVBQUlDLEVBQUtELElBQ3JDRCxFQUFLRyxFQUFJRixHQUNMRCxFQUFHTSxXQUFhdEIsRUFBRWdC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TyxhQUU5RGxPLEtBQUswSyxTQUFXLEdBQUlHLElBQUdDLE1BQU1qQyxTQUFTRyxLQUFLa0gseUJBQ3JDaEMsV0FBZWxPLEtBQUtrTyxXQUNwQjJDLFFBQWE3USxLQUFLc0osUUFBUWtHLFdBQzFCbUIsZ0JBQW1CM1EsS0FBS3NKLFFBQVFxSCxnQkFDaENRLGtCQUFvQm5SLEtBQUtzSixRQUFRNkgsb0JBRXZDblIsS0FBSzBQLFNBRUwxUCxLQUFLcU8sU0FBVXJPLEtBQUttTyxRQUFTLDBCQUEyQm5PLEtBQUt1VCxjQUM3RHZULEtBQUtxTyxTQUFVck8sS0FBSzBLLFNBQVUsMkJBQTRCMUssS0FBS3VPLGVBRXhEK0UsR0FFUjVELE9BQU8sV0FTTixNQU5BN0UsSUFBR0MsTUFBTXFGLEtBQUsvSyxVQUFVc0ssT0FBT3RDLE1BQU9wTixLQUFNcU4sV0FFNUNyTixLQUFLcEIsRUFBRSxZQUNMaVQsT0FBUTdSLEtBQUttTyxRQUFRdUIsU0FBUzRDLEtBQzlCVCxPQUFRN1IsS0FBSzBLLFNBQVNnRixTQUFTNEMsS0FFMUJ0UyxNQUVSdVQsYUFBZSxTQUFVcEYsRUFBVXFGLEdBQ2xDeFQsS0FBS21PLFFBQVFnRixPQUFPWixPQUNwQnZTLEtBQUswSyxTQUFTMkgsT0FBT3ZCLGFBQWMwQyxJQUVwQ2pGLGNBQWMsV0FHYixNQUZBdk8sTUFBSzBLLFNBQVM2SCxPQUNkdlMsS0FBS21PLFFBQVFrRSxPQUFPVSxRQUNiL1MsTUFFUitQLGFBQWEsV0FFWixNQURBL1AsTUFBS21PLFFBQVFnRixPQUNOblQsTUFFUnlULFVBQVksV0FDWCxNQUFPelQsTUFBS21PLFFBQVF3RSxRQUVyQjlFLFFBQVEsV0FFUCxNQURBN04sTUFBS21PLFFBQVFnRixPQUNOblQsU0FJUGQsT0FBT0QsT0FBT3lVIiwiZmlsZSI6InRoZS1wYXN0ZS13aXRoLXNvdXJjZW1hcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuXG4vKlxucGFzdGUuanMgaXMgYW4gaW50ZXJmYWNlIHRvIHJlYWQgZGF0YSAoIHRleHQgLyBpbWFnZSApIGZyb20gY2xpcGJvYXJkIGluIGRpZmZlcmVudCBicm93c2Vycy4gSXQgYWxzbyBjb250YWlucyBzZXZlcmFsIGhhY2tzLlxuXG5odHRwczovL2dpdGh1Yi5jb20vbGF5ZXJzc3NzL3Bhc3RlLmpzXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgUGFzdGUsIGNyZWF0ZUhpZGRlbkVkaXRhYmxlLCBkYXRhVVJMdG9CbG9iLCBpc0ZvY3VzYWJsZTtcblxuICAkID0gd2luZG93LmpRdWVyeTtcblxuICAkLnBhc3RlID0gZnVuY3Rpb24ocGFzdGVDb250YWluZXIpIHtcbiAgICB2YXIgcG07XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiREVQUkVDQVRFRDogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAkLmZuLnBhc3RhYmxlTm9uSW5wdXRhYmxlKCkgaW5zdGVhZC5cIik7XG4gICAgfVxuICAgIHBtID0gUGFzdGUubW91bnROb25JbnB1dGFibGUocGFzdGVDb250YWluZXIpO1xuICAgIHJldHVybiBwbS5fY29udGFpbmVyO1xuICB9O1xuXG4gICQuZm4ucGFzdGFibGVOb25JbnB1dGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwsIGosIGxlbiwgcmVmO1xuICAgIHJlZiA9IHRoaXM7XG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICBlbCA9IHJlZltqXTtcbiAgICAgIGlmIChlbC5fcGFzdGFibGUgfHwgJChlbCkuaXMoJ3RleHRhcmVhLCBpbnB1dDp0ZXh0LCBbY29udGVudGVkaXRhYmxlXScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgUGFzdGUubW91bnROb25JbnB1dGFibGUoZWwpO1xuICAgICAgZWwuX3Bhc3RhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgJC5mbi5wYXN0YWJsZVRleHRhcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsLCBqLCBsZW4sIHJlZjtcbiAgICByZWYgPSB0aGlzO1xuICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgZWwgPSByZWZbal07XG4gICAgICBpZiAoZWwuX3Bhc3RhYmxlIHx8ICQoZWwpLmlzKCc6bm90KHRleHRhcmVhLCBpbnB1dDp0ZXh0KScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgUGFzdGUubW91bnRUZXh0YXJlYShlbCk7XG4gICAgICBlbC5fcGFzdGFibGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAkLmZuLnBhc3RhYmxlQ29udGVudGVkaXRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsLCBqLCBsZW4sIHJlZjtcbiAgICByZWYgPSB0aGlzO1xuICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgZWwgPSByZWZbal07XG4gICAgICBpZiAoZWwuX3Bhc3RhYmxlIHx8ICQoZWwpLmlzKCc6bm90KFtjb250ZW50ZWRpdGFibGVdKScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgUGFzdGUubW91bnRDb250ZW50ZWRpdGFibGUoZWwpO1xuICAgICAgZWwuX3Bhc3RhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgZGF0YVVSTHRvQmxvYiA9IGZ1bmN0aW9uKGRhdGFVUkwsIHNsaWNlU2l6ZSkge1xuICAgIHZhciBiNjREYXRhLCBieXRlQXJyYXksIGJ5dGVBcnJheXMsIGJ5dGVDaGFyYWN0ZXJzLCBieXRlTnVtYmVycywgY29udGVudFR5cGUsIGksIG0sIG9mZnNldCwgcmVmLCBzbGljZTtcbiAgICBpZiAoc2xpY2VTaXplID09IG51bGwpIHtcbiAgICAgIHNsaWNlU2l6ZSA9IDUxMjtcbiAgICB9XG4gICAgaWYgKCEobSA9IGRhdGFVUkwubWF0Y2goL15kYXRhXFw6KFteXFw7XSspXFw7YmFzZTY0XFwsKC4rKSQvKSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZWYgPSBtLCBtID0gcmVmWzBdLCBjb250ZW50VHlwZSA9IHJlZlsxXSwgYjY0RGF0YSA9IHJlZlsyXTtcbiAgICBieXRlQ2hhcmFjdGVycyA9IGF0b2IoYjY0RGF0YSk7XG4gICAgYnl0ZUFycmF5cyA9IFtdO1xuICAgIG9mZnNldCA9IDA7XG4gICAgd2hpbGUgKG9mZnNldCA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aCkge1xuICAgICAgc2xpY2UgPSBieXRlQ2hhcmFjdGVycy5zbGljZShvZmZzZXQsIG9mZnNldCArIHNsaWNlU2l6ZSk7XG4gICAgICBieXRlTnVtYmVycyA9IG5ldyBBcnJheShzbGljZS5sZW5ndGgpO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IHNsaWNlLmxlbmd0aCkge1xuICAgICAgICBieXRlTnVtYmVyc1tpXSA9IHNsaWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICAgIGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgIGJ5dGVBcnJheXMucHVzaChieXRlQXJyYXkpO1xuICAgICAgb2Zmc2V0ICs9IHNsaWNlU2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBCbG9iKGJ5dGVBcnJheXMsIHtcbiAgICAgIHR5cGU6IGNvbnRlbnRUeXBlXG4gICAgfSk7XG4gIH07XG5cbiAgY3JlYXRlSGlkZGVuRWRpdGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSkuYXR0cignY29udGVudGVkaXRhYmxlJywgdHJ1ZSkuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKS5hdHRyKCd0YWJpbmRleCcsIC0xKS5jc3Moe1xuICAgICAgd2lkdGg6IDEsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIGxlZnQ6IC0xMDAsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICB9KTtcbiAgfTtcblxuICBpc0ZvY3VzYWJsZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGhhc1RhYmluZGV4KSB7XG4gICAgdmFyIGZpZWxkc2V0LCBmb2N1c2FibGVJZlZpc2libGUsIGltZywgbWFwLCBtYXBOYW1lLCBub2RlTmFtZTtcbiAgICBtYXAgPSB2b2lkIDA7XG4gICAgbWFwTmFtZSA9IHZvaWQgMDtcbiAgICBpbWcgPSB2b2lkIDA7XG4gICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gdm9pZCAwO1xuICAgIGZpZWxkc2V0ID0gdm9pZCAwO1xuICAgIG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICgnYXJlYScgPT09IG5vZGVOYW1lKSB7XG4gICAgICBtYXAgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICBtYXBOYW1lID0gbWFwLm5hbWU7XG4gICAgICBpZiAoIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ21hcCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaW1nID0gJCgnaW1nW3VzZW1hcD1cXCcjJyArIG1hcE5hbWUgKyAnXFwnXScpO1xuICAgICAgcmV0dXJuIGltZy5sZW5ndGggPiAwICYmIGltZy5pcygnOnZpc2libGUnKTtcbiAgICB9XG4gICAgaWYgKC9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvLnRlc3Qobm9kZU5hbWUpKSB7XG4gICAgICBmb2N1c2FibGVJZlZpc2libGUgPSAhZWxlbWVudC5kaXNhYmxlZDtcbiAgICAgIGlmIChmb2N1c2FibGVJZlZpc2libGUpIHtcbiAgICAgICAgZmllbGRzZXQgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2ZpZWxkc2V0JylbMF07XG4gICAgICAgIGlmIChmaWVsZHNldCkge1xuICAgICAgICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9ICFmaWVsZHNldC5kaXNhYmxlZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJ2EnID09PSBub2RlTmFtZSkge1xuICAgICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gZWxlbWVudC5ocmVmIHx8IGhhc1RhYmluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICBmb2N1c2FibGVJZlZpc2libGUgPSBoYXNUYWJpbmRleDtcbiAgICB9XG4gICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gZm9jdXNhYmxlSWZWaXNpYmxlIHx8ICQoZWxlbWVudCkuaXMoJ1tjb250ZW50ZWRpdGFibGVdJyk7XG4gICAgcmV0dXJuIGZvY3VzYWJsZUlmVmlzaWJsZSAmJiAkKGVsZW1lbnQpLmlzKCc6dmlzaWJsZScpO1xuICB9O1xuXG4gIFBhc3RlID0gKGZ1bmN0aW9uKCkge1xuICAgIFBhc3RlLnByb3RvdHlwZS5fdGFyZ2V0ID0gbnVsbDtcblxuICAgIFBhc3RlLnByb3RvdHlwZS5fY29udGFpbmVyID0gbnVsbDtcblxuICAgIFBhc3RlLm1vdW50Tm9uSW5wdXRhYmxlID0gZnVuY3Rpb24obm9uSW5wdXRhYmxlKSB7XG4gICAgICB2YXIgcGFzdGU7XG4gICAgICBwYXN0ZSA9IG5ldyBQYXN0ZShjcmVhdGVIaWRkZW5FZGl0YWJsZSgpLmFwcGVuZFRvKG5vbklucHV0YWJsZSksIG5vbklucHV0YWJsZSk7XG4gICAgICAkKG5vbklucHV0YWJsZSkub24oJ2NsaWNrJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldikge1xuICAgICAgICAgIGlmICghaXNGb2N1c2FibGUoZXYudGFyZ2V0LCBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXN0ZS5fY29udGFpbmVyLmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcGFzdGUuX2NvbnRhaW5lci5vbignZm9jdXMnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkKG5vbklucHV0YWJsZSkuYWRkQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gcGFzdGUuX2NvbnRhaW5lci5vbignYmx1cicsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICQobm9uSW5wdXRhYmxlKS5yZW1vdmVDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgUGFzdGUubW91bnRUZXh0YXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhKSB7XG4gICAgICB2YXIgY3RsRG93biwgcGFzdGUsIHJlZiwgcmVmMTtcbiAgICAgIGlmICgodHlwZW9mIERhdGFUcmFuc2ZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBEYXRhVHJhbnNmZXIgIT09IG51bGwgPyBEYXRhVHJhbnNmZXIucHJvdG90eXBlIDogdm9pZCAwKSAmJiAoKHJlZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpICE9IG51bGwgPyAocmVmMSA9IHJlZi5jYWxsKE9iamVjdCwgRGF0YVRyYW5zZmVyLnByb3RvdHlwZSwgJ2l0ZW1zJykpICE9IG51bGwgPyByZWYxLmdldCA6IHZvaWQgMCA6IHZvaWQgMCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW91bnRDb250ZW50ZWRpdGFibGUodGV4dGFyZWEpO1xuICAgICAgfVxuICAgICAgcGFzdGUgPSBuZXcgUGFzdGUoY3JlYXRlSGlkZGVuRWRpdGFibGUoKS5pbnNlcnRCZWZvcmUodGV4dGFyZWEpLCB0ZXh0YXJlYSk7XG4gICAgICBjdGxEb3duID0gZmFsc2U7XG4gICAgICAkKHRleHRhcmVhKS5vbigna2V5dXAnLCBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgcmVmMjtcbiAgICAgICAgaWYgKChyZWYyID0gZXYua2V5Q29kZSkgPT09IDE3IHx8IHJlZjIgPT09IDIyNCkge1xuICAgICAgICAgIGN0bERvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgICAgJCh0ZXh0YXJlYSkub24oJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgcmVmMjtcbiAgICAgICAgaWYgKChyZWYyID0gZXYua2V5Q29kZSkgPT09IDE3IHx8IHJlZjIgPT09IDIyNCkge1xuICAgICAgICAgIGN0bERvd24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoZXYuY3RybEtleSAhPSBudWxsKSAmJiAoZXYubWV0YUtleSAhPSBudWxsKSkge1xuICAgICAgICAgIGN0bERvd24gPSBldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0bERvd24gJiYgZXYua2V5Q29kZSA9PT0gODYpIHtcbiAgICAgICAgICBwYXN0ZS5fdGV4dGFyZWFfZm9jdXNfc3RvbGVuID0gdHJ1ZTtcbiAgICAgICAgICBwYXN0ZS5fY29udGFpbmVyLmZvY3VzKCk7XG4gICAgICAgICAgcGFzdGUuX3Bhc3RlX2V2ZW50X2ZpcmVkID0gZmFsc2U7XG4gICAgICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFwYXN0ZS5fcGFzdGVfZXZlbnRfZmlyZWQpIHtcbiAgICAgICAgICAgICAgICAkKHRleHRhcmVhKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXN0ZS5fdGV4dGFyZWFfZm9jdXNfc3RvbGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkodGhpcyksIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICAkKHRleHRhcmVhKS5vbigncGFzdGUnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge307XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICAkKHRleHRhcmVhKS5vbignZm9jdXMnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghcGFzdGUuX3RleHRhcmVhX2ZvY3VzX3N0b2xlbikge1xuICAgICAgICAgICAgcmV0dXJuICQodGV4dGFyZWEpLmFkZENsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgICQodGV4dGFyZWEpLm9uKCdibHVyJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIXBhc3RlLl90ZXh0YXJlYV9mb2N1c19zdG9sZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAkKHRleHRhcmVhKS5yZW1vdmVDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICAkKHBhc3RlLl90YXJnZXQpLm9uKCdfcGFzdGVDaGVja0NvbnRhaW5lckRvbmUnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGV4dGFyZWEpLmZvY3VzKCk7XG4gICAgICAgICAgcmV0dXJuIHBhc3RlLl90ZXh0YXJlYV9mb2N1c19zdG9sZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHJldHVybiAkKHBhc3RlLl90YXJnZXQpLm9uKCdwYXN0ZVRleHQnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2LCBkYXRhKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQsIGN1ckVuZCwgY3VyU3RhcnQ7XG4gICAgICAgICAgY3VyU3RhcnQgPSAkKHRleHRhcmVhKS5wcm9wKCdzZWxlY3Rpb25TdGFydCcpO1xuICAgICAgICAgIGN1ckVuZCA9ICQodGV4dGFyZWEpLnByb3AoJ3NlbGVjdGlvbkVuZCcpO1xuICAgICAgICAgIGNvbnRlbnQgPSAkKHRleHRhcmVhKS52YWwoKTtcbiAgICAgICAgICAkKHRleHRhcmVhKS52YWwoXCJcIiArIGNvbnRlbnQuc2xpY2UoMCwgY3VyU3RhcnQpICsgZGF0YS50ZXh0ICsgY29udGVudC5zbGljZShjdXJFbmQpKTtcbiAgICAgICAgICAkKHRleHRhcmVhKVswXS5zZXRTZWxlY3Rpb25SYW5nZShjdXJTdGFydCArIGRhdGEudGV4dC5sZW5ndGgsIGN1clN0YXJ0ICsgZGF0YS50ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuICQodGV4dGFyZWEpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBQYXN0ZS5tb3VudENvbnRlbnRlZGl0YWJsZSA9IGZ1bmN0aW9uKGNvbnRlbnRlZGl0YWJsZSkge1xuICAgICAgdmFyIHBhc3RlO1xuICAgICAgcGFzdGUgPSBuZXcgUGFzdGUoY29udGVudGVkaXRhYmxlLCBjb250ZW50ZWRpdGFibGUpO1xuICAgICAgJChjb250ZW50ZWRpdGFibGUpLm9uKCdmb2N1cycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICQoY29udGVudGVkaXRhYmxlKS5hZGRDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHJldHVybiAkKGNvbnRlbnRlZGl0YWJsZSkub24oJ2JsdXInLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkKGNvbnRlbnRlZGl0YWJsZSkucmVtb3ZlQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFBhc3RlKF9jb250YWluZXIsIF90YXJnZXQpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IF9jb250YWluZXI7XG4gICAgICB0aGlzLl90YXJnZXQgPSBfdGFyZ2V0O1xuICAgICAgdGhpcy5fY29udGFpbmVyID0gJCh0aGlzLl9jb250YWluZXIpO1xuICAgICAgdGhpcy5fdGFyZ2V0ID0gJCh0aGlzLl90YXJnZXQpLmFkZENsYXNzKCdwYXN0YWJsZScpO1xuICAgICAgdGhpcy5fY29udGFpbmVyLm9uKCdwYXN0ZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICB2YXIgY2xpcGJvYXJkRGF0YSwgZmlsZSwgaXRlbSwgaiwgaywgbGVuLCBsZW4xLCByZWFkZXIsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgdGV4dDtcbiAgICAgICAgICBpZiAoZXYuY3VycmVudFRhcmdldCAhPT0gZXYudGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXMuX3Bhc3RlX2V2ZW50X2ZpcmVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoKChyZWYgPSBldi5vcmlnaW5hbEV2ZW50KSAhPSBudWxsID8gcmVmLmNsaXBib2FyZERhdGEgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsaXBib2FyZERhdGEgPSBldi5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgICAgICAgICBpZiAoY2xpcGJvYXJkRGF0YS5pdGVtcykge1xuICAgICAgICAgICAgICByZWYxID0gY2xpcGJvYXJkRGF0YS5pdGVtcztcbiAgICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSByZWYxW2pdO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUubWF0Y2goL15pbWFnZVxcLy8pKSB7XG4gICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5faGFuZGxlSW1hZ2UoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaXRlbS5nZXRBc0ZpbGUoKSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge31cbiAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgICAgICAgICAgICAgICBpdGVtLmdldEFzU3RyaW5nKGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZVRleHQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoLTEgIT09IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoY2xpcGJvYXJkRGF0YS50eXBlcywgJ3RleHQvcGxhaW4nKSkge1xuICAgICAgICAgICAgICAgIHRleHQgPSBjbGlwYm9hcmREYXRhLmdldERhdGEoJ1RleHQnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVUZXh0Jywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBfdGhpcy5fY2hlY2tJbWFnZXNJbkNvbnRhaW5lcihmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2hhbmRsZUltYWdlKHNyYyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2xpcGJvYXJkRGF0YSA9IHdpbmRvdy5jbGlwYm9hcmREYXRhKSB7XG4gICAgICAgICAgICBpZiAoKHJlZjIgPSAodGV4dCA9IGNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpKSkgIT0gbnVsbCA/IHJlZjIubGVuZ3RoIDogdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZVRleHQnLCB7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcignX3Bhc3RlQ2hlY2tDb250YWluZXJEb25lJyk7XG4gICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVmMyA9IGNsaXBib2FyZERhdGEuZmlsZXM7XG4gICAgICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYzLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICAgICAgICAgIGZpbGUgPSByZWYzW2tdO1xuICAgICAgICAgICAgICAgIF90aGlzLl9oYW5kbGVJbWFnZShVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBfdGhpcy5fY2hlY2tJbWFnZXNJbkNvbnRhaW5lcihmdW5jdGlvbihzcmMpIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfVxuXG4gICAgUGFzdGUucHJvdG90eXBlLl9oYW5kbGVJbWFnZSA9IGZ1bmN0aW9uKHNyYykge1xuICAgICAgdmFyIGxvYWRlcjtcbiAgICAgIGlmIChzcmMubWF0Y2goL153ZWJraXRcXC1mYWtlXFwtdXJsXFw6XFwvXFwvLykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlRXJyb3InLCB7XG4gICAgICAgICAgbWVzc2FnZTogXCJZb3UgYXJlIHRyeWluZyB0byBwYXN0ZSBhbiBpbWFnZSBpbiBTYWZhcmksIGhvd2V2ZXIgd2UgYXJlIHVuYWJsZSB0byByZXRpZXZlIGl0cyBkYXRhLlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2VTdGFydCcpO1xuICAgICAgbG9hZGVyID0gbmV3IEltYWdlKCk7XG4gICAgICBsb2FkZXIuY3Jvc3NPcmlnaW4gPSBcImFub255bW91c1wiO1xuICAgICAgbG9hZGVyLm9ubG9hZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGJsb2IsIGNhbnZhcywgY3R4LCBkYXRhVVJMO1xuICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGxvYWRlci53aWR0aDtcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gbG9hZGVyLmhlaWdodDtcbiAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKGxvYWRlciwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICBkYXRhVVJMID0gbnVsbDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgICAgICAgICAgYmxvYiA9IGRhdGFVUkx0b0Jsb2IoZGF0YVVSTCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9XG4gICAgICAgICAgaWYgKGRhdGFVUkwpIHtcbiAgICAgICAgICAgIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZScsIHtcbiAgICAgICAgICAgICAgYmxvYjogYmxvYixcbiAgICAgICAgICAgICAgZGF0YVVSTDogZGF0YVVSTCxcbiAgICAgICAgICAgICAgd2lkdGg6IGxvYWRlci53aWR0aCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBsb2FkZXIuaGVpZ2h0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZUVuZCcpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICBsb2FkZXIub25lcnJvciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlRXJyb3InLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgaW1hZ2UgZnJvbTogXCIgKyBzcmMsXG4gICAgICAgICAgICB1cmw6IHNyY1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2VFbmQnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgcmV0dXJuIGxvYWRlci5zcmMgPSBzcmM7XG4gICAgfTtcblxuICAgIFBhc3RlLnByb3RvdHlwZS5fY2hlY2tJbWFnZXNJbkNvbnRhaW5lciA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgICB2YXIgaW1nLCBqLCBsZW4sIHJlZiwgdGltZXNwYW47XG4gICAgICB0aW1lc3BhbiA9IE1hdGguZmxvb3IoMTAwMCAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgcmVmID0gdGhpcy5fY29udGFpbmVyLmZpbmQoJ2ltZycpO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGltZyA9IHJlZltqXTtcbiAgICAgICAgaW1nW1wiX3Bhc3RlX21hcmtlZF9cIiArIHRpbWVzcGFuXSA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBrLCBsZW4xLCByZWYxO1xuICAgICAgICAgIHJlZjEgPSBfdGhpcy5fY29udGFpbmVyLmZpbmQoJ2ltZycpO1xuICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICAgICAgaW1nID0gcmVmMVtrXTtcbiAgICAgICAgICAgIGlmICghaW1nW1wiX3Bhc3RlX21hcmtlZF9cIiArIHRpbWVzcGFuXSkge1xuICAgICAgICAgICAgICBjYihpbWcuc3JjKTtcbiAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdfcGFzdGVDaGVja0NvbnRhaW5lckRvbmUnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpLCAxKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhc3RlO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oJCxleHBvcnRzKXtcblxuXHR2YXIgaXNfY2hyb21lXHQ9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSxcblx0XHRjb3VudGVyID0gMCxcblx0XHR3b3JrZmxvdztcblx0XHRcblx0dGhlcGFzdGUgPSBleHBvcnRzLnRoZXBhc3RlID0gJC5leHRlbmQoIHtcblx0XHRzdXBwb3J0cyA6IHtcblx0XHRcdHBhc3RlOiAoICgncGFzdGUnIGluIGRvY3VtZW50KSB8fCAoJ29ucGFzdGUnIGluIGRvY3VtZW50KSB8fCB0eXBlb2Yod2luZG93Lm9ucGFzdGUpID09PSAnb2JqZWN0JyB8fCAoICdvbnBhc3RlJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKSApICksIC8vIGJyb3dzZXJcblx0XHR9LFxuXHRcdHZpZXc6e30sXG5cdFx0XG5cdFx0aW5zZXJ0SW1hZ2U6ZnVuY3Rpb24oIGRhdGFVUkwsIHR5cGUsIGVkaXRvciApIHtcblx0XHRcdHZhciBpZCA9ICdfX3RoZXBhc3RlX2ltZ18nKyhjb3VudGVyKyspLFxuXHRcdFx0XHRpbWFnZUh0bWwgPSAnPGltZyBpZD1cIicraWQrJ1wiIGNsYXNzPVwiYWxpZ25ub25lIHNpemUtZnVsbFwiIHNyYz1cIicrZGF0YVVSTCsnXCIgLz4nLFxuXHRcdFx0XHQkY29udGFpbmVyO1xuXG5cblx0XHRcdGVkaXRvci5pbnNlcnRDb250ZW50KCBpbWFnZUh0bWwgKTtcblx0XHRcdFxuXHRcdFx0aWYgKCB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZCApIHtcblx0XHRcdFx0dGhlcGFzdGUudXBsb2FkSW1hZ2UoIGVkaXRvci4kKCcjJytpZCkuZ2V0KDApLCBlZGl0b3IgKTtcblx0XHRcdH1cblx0XHR9LFxuLypcbmJ0b2FVbmljb2RlOiBmdW5jdGlvbihzdHIpIHtcbiAgICAvLyBmaXJzdCB3ZSB1c2UgZW5jb2RlVVJJQ29tcG9uZW50IHRvIGdldCBwZXJjZW50LWVuY29kZWQgVVRGLTgsXG4gICAgLy8gdGhlbiB3ZSBjb252ZXJ0IHRoZSBwZXJjZW50IGVuY29kaW5ncyBpbnRvIHJhdyBieXRlcyB3aGljaFxuICAgIC8vIGNhbiBiZSBmZWQgaW50byBidG9hLlxuICAgIHJldHVybiBidG9hKCBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC8lKFswLTlBLUZdezJ9KS9nLFxuICAgICAgICBmdW5jdGlvbiB0b1NvbGlkQnl0ZXMobWF0Y2gsIHAxKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgnMHgnICsgcDEpO1xuICAgIH0gKSApO1xufSxcbi8qL1xuYnRvYVVuaWNvZGU6IGZ1bmN0aW9uKHN0cmluZykge1xucmV0dXJuIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykpKTtcbiAgICB2YXIgc3RyaW5nID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSkpLFxuICAgICAgICBjaGFyTGlzdCA9IHN0cmluZy5zcGxpdCgnJyksXG4gICAgICAgIHVpbnRBcnJheSA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdWludEFycmF5LnB1c2goY2hhckxpc3RbaV0uY2hhckNvZGVBdCgwKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpO1xufSxcbi8vKi9cblx0XHR1cGxvYWRJbWFnZTogZnVuY3Rpb24oIGltYWdlLCBlZGl0b3IgKSB7XG5cblx0XHRcdHZhciB4aHIsXG5cdFx0XHRcdHdvcmtmbG93LCBcblx0XHRcdFx0JGNvbnRhaW5lcixcblx0XHRcdFx0c3JjID0gaW1hZ2Uuc3JjLFxuXHRcdFx0XHR1cGxvYWQgPSBmdW5jdGlvbiggZGF0YVVSTCApe1xuXHRcdFx0XHRcdHZhciBpZCA9ICdfX3RoZXBhc3RlX2JveF8nKyhjb3VudGVyKyspLFxuXHRcdFx0XHRcdFx0dHlwZSA9IGRhdGFVUkwubWF0Y2goL15kYXRhXFw6KFteXFw7XSspXFw7LylbMV1cblx0XHRcdFx0XHRcdGZpbGUgPSBuZXcgby5CbG9iKCBudWxsLCB7IGRhdGE6IGRhdGFVUkwgfSApXG5cdFx0XHRcdFx0XHRzdWZmaXggPSB0aGVwYXN0ZS5vcHRpb25zLm1pbWVfdHlwZXMuY29udmVydFsgdHlwZSBdO1xuXG5cdFx0XHRcdFx0JChpbWFnZSkud3JhcCgnPGRpdiBpZD1cIicraWQrJ1wiIGRhdGEtcHJvZ3Jlc3M9XCIwXCIgY2xhc3M9XCJ0aGVwYXN0ZS1pbWFnZS1wbGFjZWhvbGRlclwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCI+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0JGNvbnRhaW5lciA9IGVkaXRvci4kKCcjJytpZCk7XG5cblx0XHRcdFx0XHRmaWxlLm5hbWUgPSB0aGVwYXN0ZS5sMTBuLnBhc3RlZCArICcuJyArIHN1ZmZpeDtcblx0XHRcdFx0XHRmaWxlLnR5cGUgPSB0eXBlO1xuXG5cdFx0XHRcdFx0dmFyIGFkZEZpbGUgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYWRkRmlsZSggZmlsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoICEgd29ya2Zsb3cgKSB7XG5cdFx0XHRcdFx0XHR3b3JrZmxvdyA9IHdwLm1lZGlhLmVkaXRvci5vcGVuKCB3aW5kb3cud3BBY3RpdmVFZGl0b3IsIHtcblx0XHRcdFx0XHRcdFx0ZnJhbWU6XHRcdCdwb3N0Jyxcblx0XHRcdFx0XHRcdFx0c3RhdGU6XHRcdCdpbnNlcnQnLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTpcdFx0dGhlcGFzdGUubDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTpcdGZhbHNlXG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdHdvcmtmbG93LmNsb3NlKCk7XG5cblx0XHRcdFx0XHRcdGlmICggd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIgJiYgd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIucmVhZHkgKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHdvcmtmbG93Lm9uKCAndXBsb2FkZXI6cmVhZHknLCBhZGRGaWxlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHdvcmtmbG93LnN0YXRlKCkucmVzZXQoKTtcblx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnVXBsb2FkUHJvZ3Jlc3MnLGZ1bmN0aW9uKCBlICl7XG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLmF0dHIoJ2RhdGEtcHJvZ3Jlc3MnLGUudG90YWwucGVyY2VudCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnRmlsZVVwbG9hZGVkJyxmdW5jdGlvbiggdXAsIGFyZ3MgKXtcblx0XHRcdFx0XHRcdHZhciBpbWdIVE1MID0gJzxpbWcgY2xhc3M9XCJhbGlnbm5vbmUgd3AtaW1hZ2UtJythcmdzLmF0dGFjaG1lbnQuaWQrJyBzaXplLWZ1bGxcIiBzcmM9XCInK2FyZ3MuYXR0YWNobWVudC5jaGFuZ2VkLnVybCsnXCIgLz4nO1xuXHRcdFx0XHRcdFx0Ly8gcmVwbGFjZSBtYWluIGltYWdlXG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLnJlcGxhY2VXaXRoKCBpbWdIVE1MICk7XG5cdFx0XHRcdFx0XHQvLyByZXBsYWNlIG90aGVyIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0ZWRpdG9yLiQoJ2ltZ1tzcmM9XCInK3NyYysnXCJdJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLnJlcGxhY2VXaXRoKCBpbWdIVE1MICk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR3b3JrZmxvdy51cGxvYWRlci51cGxvYWRlci51cGxvYWRlci5iaW5kKCdFcnJvcicsZnVuY3Rpb24oIHVwLCBhcmdzICl7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh1cCxhcmdzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0aWYgKCBzcmMuc3Vic3RyKDAsNSkgPT09ICdibG9iOicgKSB7XG5cdFx0XHRcblx0XHRcdFx0Ly8qXG5cdFx0XHRcdHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0XHR4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuXHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR2YXIgcmVhZGVyO1xuXHRcdFx0XHRcdGlmICggeGhyLnJlYWR5U3RhdGUgPT0gNCApIHtcblx0XHRcdFx0XHRcdHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHVwbG9hZCggcmVhZGVyLnJlc3VsdCApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoIHhoci5yZXNwb25zZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR4aHIub3BlbiggJ0dFVCcsIHNyYyApO1xuXHRcdFx0XHR4aHIuc2VuZCggbnVsbCApO1xuXG5cdFx0XHRcdC8qL1xuXHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdG1ldGhvZDonR0VUJyxcblx0XHRcdFx0XHR1cmw6aW1hZ2Uuc3JjLFxuXHRcdFx0XHRcdGFjY2VwdHM6J2FycmF5YnVmZmVyJywgLy8gYXJyYXlidWZmZXJcbiAgICBcdFx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oIHJlc3BvbnNlLCBzdWNjZXNzLCB4aHIgKSB7XG5cdFx0XHRcdFx0XHR2YXIgdHlwZSA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyksXG5cdFx0XHRcdFx0XHRcdGI2NCA9IHRoZXBhc3RlLmJ0b2FVbmljb2RlKCB4aHIucmVzcG9uc2VUZXh0ICk7XG5cdFx0XHRcdFx0XHR1cGxvYWQoICdkYXRhOicgKyB0eXBlICsgJztiYXNlNjQsJyArIGI2NCApO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXNjYXBlKHJlc3BvbnNlLnN1YnN0cmluZygwLDUwKSksYjY0LnN1YnN0cmluZygwLDUwKSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQvLyovXG5cblx0XHRcdH0gZWxzZSBpZiAoIHNyYy5zdWJzdHIoMCw1KSA9PT0gJ2RhdGE6JyApIHtcblxuXHRcdFx0XHR1cGxvYWQoIHNyYyApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBzcmMubWF0Y2goIC9eaHR0cHM/Oi8gKSApIHtcblx0XHRcdFx0Ly8gb25seSBmcm9tIGZvcmVpZ24gc2VydmVyc1xuXHRcdFx0fSBcblxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICpcdEByZXR1cm46IG51bGx8dHJ1ZXxmYWxzZVxuXHRcdCAqL1xuXHRcdGNsaXBib2FyZEhhc0ltYWdlOmZ1bmN0aW9uKCBjbGlwYm9hcmREYXRhICkge1xuXHRcdFx0dmFyIGhhc0ltYWdlID0gZmFsc2U7XG5cdFx0XHRpZiAoIGNsaXBib2FyZERhdGEuaXRlbXMgKSB7XG5cdFx0XHRcdCQuZWFjaCggY2xpcGJvYXJkRGF0YS5pdGVtcywgZnVuY3Rpb24oaSxpdGVtKXtcblx0XHRcdFx0XHRpZiAoIGl0ZW0udHlwZSBpbiB0aGVwYXN0ZS5vcHRpb25zLm1pbWVfdHlwZXMucGFzdGUgKSB7XG5cdFx0XHRcdFx0XHRoYXNJbWFnZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHJldHVybiBoYXNJbWFnZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBjbGlwYm9hcmREYXRhLnR5cGVzICkge1xuXHRcdFx0XHQkLmVhY2goIHRoZXBhc3RlLm9wdGlvbnMubWltZV90eXBlcy5wYXN0ZSwgZnVuY3Rpb24odHlwZSxleHQpe1xuXHRcdFx0XHRcdGlmICggY2xpcGJvYXJkRGF0YS50eXBlcy5pbmRleE9mKHR5cGUpID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRoYXNJbWFnZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHJldHVybiBoYXNJbWFnZTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKGNsaXBib2FyZERhdGEpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdFxuXG5cdH0sIHRoZXBhc3RlICk7XG5jb25zb2xlLmxvZyh0aGVwYXN0ZSk7XG59KSggalF1ZXJ5LCB3cC5tZWRpYSApO1xuXG4iLCIoZnVuY3Rpb24oJCxleHBvcnRzKXtcblxuXHR2YXIgY291bnRlciAgICAgID0gMCxcblx0XHRsMTBuID0gd3AubWVkaWEudGhlcGFzdGUubDEwbixcblx0XHRpc19jaHJvbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0Nocm9tZScpID4gLTE7XG5cblx0JC5leHRlbmQoIHdwLlVwbG9hZGVyLnByb3RvdHlwZSwge1xuXHRcdHN1Y2Nlc3MgOiBmdW5jdGlvbiggZmlsZV9hdHRhY2htZW50ICl7XG5cdFx0fVxuXHR9KTtcblxuXG5cdC8qKlxuXHQgKlx0SW50ZWdyYXRlIGludG8gbWVkaWEgbGlicmFyeSBtb2RhbFxuXHQgKi9cblx0Ly8gYWRkIHN0YXRlcyB0byBicm93c2Ugcm91dGVyXG5cdF8uZXh0ZW5kKCB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0LnByb3RvdHlwZSwge1xuXHRcdF9wYXJlbnRJbml0aWFsaXplOiB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0LnByb3RvdHlwZS5pbml0aWFsaXplLFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fcGFyZW50SW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR0aGlzLmJpbmRQYXN0ZUhhbmRsZXJzKCk7XG5cdFx0fSxcblx0XHRfcGFyZW50QnJvd3NlUm91dGVyOiB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0LnByb3RvdHlwZS5icm93c2VSb3V0ZXIsXG5cdFx0YnJvd3NlUm91dGVyIDogZnVuY3Rpb24oIHZpZXcgKSB7XG5cdFx0XHR0aGlzLl9wYXJlbnRCcm93c2VSb3V0ZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHRpZiAoIHdwLm1lZGlhLnRoZXBhc3RlLnN1cHBvcnRzLnBhc3RlICkge1xuXHRcdFx0XHR2aWV3LnNldCh7cGFzdGVib2FyZDp7XG5cdFx0XHRcdFx0dGV4dDogICAgIGwxMG4uY29weV9wYXN0ZSxcblx0XHRcdFx0XHRwcmlvcml0eTogMzVcblx0XHRcdFx0fX0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRiaW5kUGFzdGVIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcHJldmlvdXNDb250ZW50ID0gZmFsc2U7XG5cdFx0XG5cdFx0XHQvLyBkaXNtaXNzIGNvbnRlbnQgb24gY2xvc2Vcblx0XHRcdHRoaXMub24oICdjb250ZW50OnJlbmRlciBjbG9zZScgLCBmdW5jdGlvbihjb250ZW50KXtcblx0XHRcdFx0aWYgKCBwcmV2aW91c0NvbnRlbnQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHByZXZpb3VzQ29udGVudC5kaXNtaXNzICkge1xuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudC5kaXNtaXNzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGNvbnRlbnQgKVxuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudCA9IGNvbnRlbnQ7XG5cdFx0XHR9ICwgdGhpcyApO1xuXHRcdFxuXHRcdFx0dGhpcy5vbiggJ2NvbnRlbnQ6Y3JlYXRlOnBhc3RlYm9hcmQnLCB0aGlzLmNvbnRlbnRDcmVhdGVQYXN0ZWJvYXJkLCB0aGlzICk7XG5cdFx0XHR0aGlzLm9uKCAnY29udGVudDpyZW5kZXI6cGFzdGVib2FyZCcsIHRoaXMuY29udGVudFJlbmRlckdyYWJiZXIsIHRoaXMgKTtcblxuXHRcdFx0ZnJhbWUgPSB0aGlzO1xuXHRcdH0sXG5cdFx0Ly8gYWRkIGhhbmRsZXJzXG5cdFx0Y29udGVudENyZWF0ZVBhc3RlYm9hcmQ6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdFx0dmFyIHN0YXRlID0gdGhpcy5zdGF0ZSgpO1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRQYXN0ZVZpZXcgPSBjb250ZW50LnZpZXcgPSBuZXcgd3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VHcmFiYmVyKCB7IFxuXHRcdFx0XHRjb250cm9sbGVyXHQ6IHRoaXMsIFxuXHRcdFx0XHRncmFiYmVyXHRcdDogd3AubWVkaWEudGhlcGFzdGUudmlldy5QYXN0ZWJvYXJkXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMuY3VycmVudFBhc3RlVmlldy51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWRlZDpkYXRhaW1hZ2UnLCB0aGlzLnVwbG9hZGVkRGF0YUltYWdlICk7XG5cdFx0fSxcblx0XHRjb250ZW50UmVuZGVyR3JhYmJlcjogZnVuY3Rpb24oIGNvbnRlbnQgKSB7XG5cdFx0XHRjb250ZW50LnN0YXJ0R3JhYmJpbmcoKTtcblx0XHR9LFxuXHRcdHVwbG9hZGVkRGF0YUltYWdlOiBmdW5jdGlvbiggY29udGVudCApIHtcblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZyggdGhpcy5jdXJyZW50UGFzdGVWaWV3LnVwbG9hZGVyLCAnYWN0aW9uOnVwbG9hZGVkOmRhdGFpbWFnZScgKTtcblx0XHRcdHZhciBvYmogPSB7IHZpZXc6IG51bGwgfTtcblx0XHRcdHRoaXMuYnJvd3NlQ29udGVudChvYmopO1xuXHRcdFx0dGhpcy5jb250ZW50LnNldCggb2JqLnZpZXcgKTtcblx0XHRcdHRoaXMucm91dGVyLmdldCgpLnNlbGVjdCgnYnJvd3NlJylcblx0XHR9XG5cdH0pO1xuXHRcblxuXG5cdC8qKlxuXHQgKlx0QWRkIHBhc3RlIGJ1dHRvbiB0byB0b29sYmFyIG9uIHVwbG9hZC5waHBcblx0ICovXG5cdF8uZXh0ZW5kKCB3cC5tZWRpYS52aWV3LkF0dGFjaG1lbnRzQnJvd3Nlci5wcm90b3R5cGUsIHtcblx0XHRfcGFyZW50SW5pdGlhbGl6ZTpcdHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudHNCcm93c2VyLnByb3RvdHlwZS5pbml0aWFsaXplLFxuXHRcdGluaXRpYWxpemU6XHRmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0cGFzdGVCdG47XG5cblx0XHRcdHRoaXMuX3BhcmVudEluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnRoZXBhc3RlID0ge1xuXHRcdFx0XHRwYXN0ZVx0OiB7XG4vL1x0XHRcdFx0XHRidXR0b25cdDogZmFsc2UsXG5cdFx0XHRcdFx0Z3JhYmJlclx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RhbFx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RlXHQ6ICdwYXN0ZScsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGN1cnJlbnRcdFx0OiBmYWxzZVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgKCB0aGlzLmNvbnRyb2xsZXIgaW5zdGFuY2VvZiB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0ICkgKSB7XG5cblx0XHRcdFx0aWYgKCB3cC5tZWRpYS50aGVwYXN0ZS5zdXBwb3J0cy5wYXN0ZSApIHtcblxuXHRcdFx0XHRcdHBhc3RlQnRuID0gbmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKCB7XG5cdFx0XHRcdFx0XHR0ZXh0XHRcdDogbDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAgJ2dyYWJiZXItYnV0dG9uJyxcblx0XHRcdFx0XHRcdHByaW9yaXR5XHQ6IC02NCxcblx0XHRcdFx0XHRcdGNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi50aGVwYXN0ZS5hY3RpdmUgPSBzZWxmLnRoZXBhc3RlLnBhc3RlO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnBhc3RlT3BlbiggbDEwbi5jb3B5X3Bhc3RlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdHRoaXMudGhlcGFzdGUucGFzdGUuZ3JhYmJlciA9IG5ldyB3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIoIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJcdDogdGhpcy5jb250cm9sbGVyLFxuXHRcdFx0XHRcdFx0Z3JhYmJlclx0XHQ6IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZCxcblx0XHRcdFx0XHRcdHdwdXBsb2FkZXJcdDogdGhpcy5jb250cm9sbGVyLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0dGhpcy50b29sYmFyLnNldCggJ3Bhc3RlTW9kZUJ1dHRvbicsIHBhc3RlQnRuLnJlbmRlcigpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHRoZXBhc3RlVXBsb2FkZWQ6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci5kaXNtaXNzKCk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNsb3NlKCk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlQ2xvc2UoKTtcblx0XHR9LFxuXHRcdHRoZXBhc3RlRXJyb3I6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0Y29uc29sZS5sb2coICdlcnJvcicsIGUgKTtcblx0XHR9LFxuXHRcdHBhc3RlT3BlbjogZnVuY3Rpb24oIHRpdGxlICkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsICA9ICBuZXcgd3AubWVkaWEudmlldy5Nb2RhbCgge1xuXHRcdFx0XHRjb250cm9sbGVyIDogdGhpcyxcblx0XHRcdFx0dGl0bGUgICAgICA6IHRpdGxlXG5cdFx0XHR9ICk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNvbnRlbnQoIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIgKTtcblx0XHRcdHRoaXMudGhlcGFzdGUubW9kYWwub3BlbigpO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLm9uKCAnY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50aGVwYXN0ZUNsb3NlLmFwcGx5KHNlbGYpO1xuXHRcdFx0XHRzZWxmLnRoZXBhc3RlLmFjdGl2ZS5ncmFiYmVyLnN0b3BHcmFiYmluZygpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIuc3RhcnRHcmFiYmluZygpO1xuXG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLnRoZXBhc3RlLmFjdGl2ZS5ncmFiYmVyLnVwbG9hZGVyLCAnYWN0aW9uOnVwbG9hZGVkOmRhdGFpbWFnZScsIHRoaXMudGhlcGFzdGVVcGxvYWRlZCApO1xuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci51cGxvYWRlciwgJ2Vycm9yOnVwbG9hZGVkOmRhdGFpbWFnZScsIHRoaXMudGhlcGFzdGVFcnJvciApO1xuXHRcdH0sXG5cdFx0dGhlcGFzdGVDbG9zZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHRoaXMuY29udHJvbGxlci5kZWFjdGl2YXRlTW9kZSggdGhpcy50aGVwYXN0ZS5hY3RpdmUubW9kZSApLmFjdGl2YXRlTW9kZSggJ2VkaXQnICk7XG5cblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZyggdGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcoIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIudXBsb2FkZXIsICdlcnJvcjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0fVxuXHR9KTtcblx0XG59KShqUXVlcnksd2luZG93KTtcbiIsIihmdW5jdGlvbigkLHdpbmRvdyxvKXtcblx0dmFyIHRoZXBhc3RlID0gd3AubWVkaWEudGhlcGFzdGUsXG5cdFx0QnV0dG9uID0gd3AubWVkaWEudmlldy5CdXR0b24sXG5cdFx0TW9kYWwgID0gd3AubWVkaWEudmlldy5Nb2RhbCxcblx0XHRsMTBuICAgPSB0aGVwYXN0ZS5sMTBuO1xuXG5cblx0d3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VVcGxvYWRlciA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ3RoZXBhc3RlLXVwbG9hZGVyJyksXG5cdFx0Y2xhc3NOYW1lOiAndGhlcGFzdGUtdXBsb2FkZXInLFxuXHRcdGNvbnRyb2xsZXI6bnVsbCxcblx0XHRpbWFnZSA6IG51bGwsXG5cdFx0JGRpc2NhcmRCdG4gOiBudWxsLFxuXHRcdCR1cGxvYWRCdG4gOiBudWxsLFxuXHRcdFxuXHRcdHVwbG9hZGVyIDogbnVsbCxcblx0XHRcblx0XHRldmVudHMgOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtYWN0aW9uPVwidXBsb2FkXCJdJ1x0OiAndXBsb2FkSW1hZ2UnLFxuXHRcdFx0J2NsaWNrIFtkYXRhLWFjdGlvbj1cImRpc2NhcmRcIl0nXHQ6ICdkaXNjYXJkSW1hZ2UnLFxuXHRcdH0sXG5cdFx0aW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Xy5kZWZhdWx0cyggdGhpcy5vcHRpb25zLCB7XG5cdFx0XHRcdGRlZmF1bHRGaWxlTmFtZSA6IGwxMG4uaW1hZ2Vcblx0XHRcdH0pO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRpbnN0ciA9IG5ldyB3cC5tZWRpYS5WaWV3KHtcblx0XHRcdFx0dGFnTmFtZSAgICA6ICdkaXYnLFxuXHRcdFx0XHRjbGFzc05hbWUgIDogJ2luc3RydW1lbnRzJyxcblx0XHRcdFx0Y29udHJvbGxlciA6IHRoaXMuY29udHJvbGxlclxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMudXBsb2FkZXIgPSB0aGlzLm9wdGlvbnMudXBsb2Rlcjtcblx0XHR9LFxuXHRcdHNldEltYWdlRGF0YSA6IGZ1bmN0aW9uKCBkYXRhICkge1xuXHRcdFx0dmFyIGNvbnRhaW5lciA9IHRoaXMuJGltYWdlQ29udGFpbmVyLmh0bWwoJycpLmdldCgwKSxcblx0XHRcdFx0c2VsZiA9IHRoaXMsXG5cdFx0XHRcdGZvcm1hdCA9IGRhdGEubWF0Y2goL2RhdGE6KGltYWdlXFwvKFxcdyspKTsvKVsxXTtcblxuXHRcdFx0aWYgKCAhIHRoZXBhc3RlLm9wdGlvbnMubWltZV90eXBlcy5jb252ZXJ0W2Zvcm1hdF0gKSB7XG5cdFx0XHRcdGZvcm1hdCA9IHRoaXMub3B0aW9ucy5kZWZhdWx0RmlsZUZvcm1hdDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCB0aGlzLmltYWdlICkge1xuXHRcdFx0XHR0aGlzLmltYWdlLmRlc3Ryb3koKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5pbWFnZSA9IG5ldyBvLkltYWdlKCk7XG5cdFx0XHR0aGlzLmltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgb3B0cyA9IHNlbGYuZ2V0VXBsb2FkZXIoKS5nZXRPcHRpb24oJ3Jlc2l6ZScpLFxuXHRcdFx0XHRcdHNjYWxlID0gTWF0aC5tYXgoIG9wdHMud2lkdGggLyB0aGlzLndpZHRoLCBvcHRzLmhlaWdodCAvIHRoaXMuaGVpZ2h0ICk7XG5cblx0XHRcdFx0ISFvcHRzICYmIChzY2FsZSA8IDEpICYmIHRoaXMuZG93bnNpemUoIHRoaXMud2lkdGgqc2NhbGUsIHRoaXMuaGVpZ2h0KnNjYWxlICk7XG5cblx0XHRcdFx0dGhpcy5lbWJlZCggY29udGFpbmVyICk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmltYWdlLmJpbmQoJ1Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0dGhpcy5lbWJlZCggY29udGFpbmVyICk7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuaW1hZ2UubG9hZCggZGF0YSApO1xuXHRcdFx0aWYgKCB0aGlzLiRpbWFnZUNvbnRhaW5lciApIHtcblx0XHRcdFx0dGhpcy4kaW1hZ2VDb250YWluZXIuYXBwZW5kKHRoaXMuaW1hZ2UpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy4kKCdbZGF0YS1zZXR0aW5nPVwiZm9ybWF0XCJdIGlucHV0W3ZhbHVlPVwiJytmb3JtYXQrJ1wiXScpLnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuXG5cblx0XHRcdHRoaXMuZGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZW5kZXIgOiBmdW5jdGlvbigpIHtcblx0XHRcdHdwLm1lZGlhLlZpZXcucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRpbWFnZUNvbnRhaW5lciA9IHRoaXMuJCgnLmltYWdlLWNvbnRhaW5lcicpO1xuXHRcdFx0dGhpcy4kZGlzY2FyZEJ0biA9IHRoaXMuJCgnW2RhdGEtYWN0aW9uPVwiZGlzY2FyZFwiXScpO1xuXHRcdFx0dGhpcy4kdXBsb2FkQnRuID0gdGhpcy4kKCdbZGF0YS1hY3Rpb249XCJ1cGxvYWRcIl0nKTtcblx0XHRcdHRoaXMuJCgnW2RhdGEtc2V0dGluZz1cInRpdGxlXCJdJykudmFsKCB0aGlzLm9wdGlvbnMuZGVmYXVsdEZpbGVOYW1lICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGRpc2NhcmRJbWFnZSA6IGZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY3Rpb246ZGlzY2FyZDpkYXRhaW1hZ2UnICwgdGhpcyApO1xuXHRcdFx0dGhpcy51bmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXHRcdH0sXG5cdFx0dXBsb2FkSW1hZ2UgOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLiQoJ1tkYXRhLXNldHRpbmc9XCJmb3JtYXRcIl0gOmNoZWNrZWQnKS52YWwoKSxcblx0XHRcdFx0c3VmZml4ID0gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLmNvbnZlcnRbIHR5cGUgXSxcblx0XHRcdFx0bmFtZSA9IHRoaXMuJCgnaW5wdXRbZGF0YS1zZXR0aW5nPVwidGl0bGVcIl0nKS52YWwoKSArICcuJyArIHN1ZmZpeCxcblx0XHRcdFx0YmxvYiA9IHRoaXMuaW1hZ2UuZ2V0QXNCbG9iKCB0eXBlLCB0aGVwYXN0ZS5vcHRpb25zLmpwZWdfcXVhbGl0eSApO1xuXG5cdFx0XHR0aGlzLmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXG5cdFx0XHRibG9iLmRldGFjaCggYmxvYi5nZXRTb3VyY2UoKSApO1xuXHRcdFx0YmxvYi5uYW1lID0gbmFtZTtcblx0XHRcdGJsb2IudHlwZSA9IHR5cGU7XG5cdFx0XHR0aGlzLmdldFVwbG9hZGVyKCkuYWRkRmlsZSggYmxvYiAsIG5hbWUgKTtcblxuXHRcdFx0dGhpcy5kaXNhYmxlZCggdHJ1ZSApO1xuXG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY3Rpb246dXBsb2FkOmRhdGFpbWFnZScgLCB0aGlzICk7XG5cdFx0fSxcblx0XHRzaG93OmZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLiRlbC5zaG93KCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGhpZGU6ZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMuJGVsLmhpZGUoKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0ZGlzYWJsZWQgOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7XG5cdFx0XHR0aGlzLiRkaXNjYXJkQnRuLnByb3AoICdkaXNhYmxlZCcsIGRpc2FibGVkICk7XG5cdFx0XHR0aGlzLiR1cGxvYWRCdG4ucHJvcCggJ2Rpc2FibGVkJywgZGlzYWJsZWQgKTtcblx0XHR9LFxuXHRcdF91cGxvYWRTdWNjZXNzSGFuZGxlciA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCAnYWN0aW9uOnVwbG9hZGVkOmRhdGFpbWFnZScgKTtcblx0XHRcdHRoaXMuZGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0dGhpcy51bmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXHRcdH0sXG5cdFx0X3VwbG9hZEVycm9ySGFuZGxlciA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCAnZXJyb3I6dXBsb2FkZWQ6ZGF0YWltYWdlJyApO1xuXHRcdFx0dGhpcy5kaXNhYmxlZChmYWxzZSk7XG5cdFx0XHR0aGlzLnVuYmluZFVwbG9hZGVyRXZlbnRzKCk7XG5cdFx0fSxcblx0XHRiaW5kVXBsb2FkZXJFdmVudHMgOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZ2V0VXBsb2FkZXIoKS5iaW5kKCAnRmlsZVVwbG9hZGVkJyxcdHRoaXMuX3VwbG9hZFN1Y2Nlc3NIYW5kbGVyLFx0dGhpcyApO1xuXHRcdFx0dGhpcy5nZXRVcGxvYWRlcigpLmJpbmQoICdFcnJvcicsXHRcdFx0dGhpcy5fdXBsb2FkRXJyb3JIYW5kbGVyLFx0dGhpcyApO1xuXHRcdH0sXG5cdFx0dW5iaW5kVXBsb2FkZXJFdmVudHMgOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZ2V0VXBsb2FkZXIoKS51bmJpbmQoICdGaWxlVXBsb2FkZWQnLFx0dGhpcy5fdXBsb2FkU3VjY2Vzc0hhbmRsZXIsXHR0aGlzICk7XG5cdFx0XHR0aGlzLmdldFVwbG9hZGVyKCkudW5iaW5kKCAnRXJyb3InLFx0XHRcdHRoaXMuX3VwbG9hZEVycm9ySGFuZGxlcixcdHRoaXMgKTtcblx0XHR9LFxuXHRcdGdldFVwbG9hZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmNvbnRyb2xsZXIudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXI7XG5cdFx0fVxuXHR9KTtcblxuXG5cdHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZCA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ3RoZXBhc3RlLXBhc3RlYm9hcmQnKSxcblx0XHRjbGFzc05hbWU6ICd0aGVwYXN0ZS1wYXN0ZWJvYXJkJyxcblx0XHRjb250cm9sbGVyOm51bGwsXG5cdFx0YWN0aW9uOidwYXN0ZScsXG5cdFx0JHBhc3RlYm9hcmQgOiBudWxsLFxuXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHdwLm1lZGlhLlZpZXcucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRwYXN0ZWJvYXJkID0gdGhpcy4kKCAnLmluamVjdG9yJyApLnBhc3RhYmxlQ29udGVudGVkaXRhYmxlKCk7XG5cdFx0XHR0aGlzLiRtZXNzYWdlID0gdGhpcy4kKCAnLm1lc3NhZ2UnICk7XG5cdFx0XHR0aGlzLiRwYXN0ZWJvYXJkLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGYuc2hvd19tZXNzYWdlKCcnKTtcblx0XHRcdH0gKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c3RhcnQgOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0Y2xpcGJvYXJkSGFzSW1hZ2U7XG5cblx0XHRcdHRoaXMuaW1hZ2VQYXN0ZWQgPSBmYWxzZTtcblxuXHRcdFx0dGhpcy4kcGFzdGVib2FyZFxuXHRcdFx0XHQub24oJ3Bhc3RlJyxmdW5jdGlvbihlKXtcblx0XHRcdFx0XHRjbGlwYm9hcmRIYXNJbWFnZSA9IHdwLm1lZGlhLnRoZXBhc3RlLmNsaXBib2FyZEhhc0ltYWdlKGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0Lm9uKCdwYXN0ZVRleHQnICwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNsaXBib2FyZEhhc0ltYWdlIHx8IHNlbGYuaW1hZ2VQYXN0ZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlbGYuc2hvd19tZXNzYWdlKCBsMTBuLnBhc3RlX2Vycm9yX25vX2ltYWdlICk7XG5cdFx0XHRcdFx0JCggdGhpcyApLmh0bWwoJycpO1xuXHRcdFx0XHR9IClcblx0XHRcdFx0Lm9uKCdwYXN0ZUltYWdlJyAsIGZ1bmN0aW9uKCBlLCBkYXRhICkge1xuXHRcdFx0XHRcdGlmICggc2VsZi5pbWFnZVBhc3RlZCApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2VsZi50cmlnZ2VyKCAnYWN0aW9uOmNyZWF0ZTpkYXRhaW1hZ2UnLCB0aGlzICwgZGF0YS5kYXRhVVJMICk7XG5cdFx0XHRcdFx0c2VsZi5pbWFnZVBhc3RlZCA9IHRydWU7XG5cdFx0XHRcdH0gKVxuXHRcdFx0XHQub24oJ3Bhc3RlSW1hZ2VFcnJvcicgLCBmdW5jdGlvbiggZSwgZGF0YSApIHtcblx0XHRcdFx0XHRzZWxmLnNob3dfbWVzc2FnZSggbDEwbi5wYXN0ZV9lcnJvciApO1xuXHRcdFx0XHRcdCQoIHRoaXMgKS5odG1sKCcnKTtcblx0XHRcdFx0fSApXG5cdFx0XHRcdDtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRzZWxmLiRwYXN0ZWJvYXJkLmdldCgwKS5mb2N1cygpO1xuXHRcdFx0fSwxKTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzdG9wIDogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRwYXN0ZWJvYXJkXG5cdFx0XHRcdC5vZmYoJ3Bhc3RlSW1hZ2UnKVxuXHRcdFx0XHQub2ZmKCdwYXN0ZUltYWdlRXJyb3InKVxuXHRcdFx0XHQub2ZmKCdwYXN0ZVRleHQnKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2hvdzpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJGVsLnNob3coKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0aGlkZTpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJGVsLmhpZGUoKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2hvd19tZXNzYWdlOmZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0XHR0aGlzLiRtZXNzYWdlLnRleHQoIG1zZyApO1xuXHRcdH1cblx0fSk7XG5cblx0d3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VHcmFiYmVyID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuLy9cdFx0dGFnTmFtZTogICAnZGl2Jyxcblx0XHR0ZW1wbGF0ZTogd3AudGVtcGxhdGUoJ3RoZXBhc3RlLWdyYWJiZXInKSxcblx0XHRjbGFzc05hbWUgOiAndGhlcGFzdGUtZ3JhYmJlcicsXG5cdFx0XG5cdFx0Z3JhYmJlciA6IG51bGwsXG5cdFx0dXBsb2FkZXIgOiBudWxsLFxuXHRcdFxuXHRcdGluaXRpYWxpemUgOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciByZXQgPSB3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Xy5kZWZhdWx0cyggdGhpcy5vcHRpb25zLCB7XG5cdFx0XHRcdHdwdXBsb2FkZXJcdFx0OiBudWxsLFxuXHRcdFx0XHRkZWZhdWx0RmlsZU5hbWVcdDogbDEwbi5wYXN0ZWQsXG5cdFx0XHRcdGRlZmF1bHRGaWxlRm9ybWF0IDogJ2ltYWdlL3BuZycsXG5cdFx0XHRcdHRpdGxlXHRcdFx0OiBsMTBuLmNvcHlfcGFzdGUgXG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5ncmFiYmVyICA9IG5ldyB0aGlzLm9wdGlvbnMuZ3JhYmJlciggeyBjb250cm9sbGVyXHQ6IHRoaXMuY29udHJvbGxlciB9ICk7XG5cblx0XHRcdHRoaXMudXBsb2FkZXIgPSBuZXcgd3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VVcGxvYWRlcigge1x0XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyXHRcdFx0OiB0aGlzLmNvbnRyb2xsZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGxvZGVyXHRcdFx0XHQ6IHRoaXMub3B0aW9ucy53cHVwbG9hZGVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdEZpbGVOYW1lXHRcdDogdGhpcy5vcHRpb25zLmRlZmF1bHRGaWxlTmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdGRlZmF1bHRGaWxlRm9ybWF0XHQ6IHRoaXMub3B0aW9ucy5kZWZhdWx0RmlsZUZvcm1hdFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0dGhpcy5yZW5kZXIoKTtcblxuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy5ncmFiYmVyLCAnYWN0aW9uOmNyZWF0ZTpkYXRhaW1hZ2UnLFx0dGhpcy5pbWFnZUNyZWF0ZWQgKTtcblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMudXBsb2FkZXIsICdhY3Rpb246ZGlzY2FyZDpkYXRhaW1hZ2UnLFx0dGhpcy5zdGFydEdyYWJiaW5nICk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKXtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0dGhpcy4kKCcuY29udGVudCcpXG5cdFx0XHRcdC5hcHBlbmQoIHRoaXMuZ3JhYmJlci5yZW5kZXIoKS4kZWwgKVxuXHRcdFx0XHQuYXBwZW5kKCB0aGlzLnVwbG9hZGVyLnJlbmRlcigpLiRlbCApO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGltYWdlQ3JlYXRlZCA6IGZ1bmN0aW9uKCBncmFiYmVyICwgaW1hZ2VEYXRhICkge1xuXHRcdFx0dGhpcy5ncmFiYmVyLnN0b3AoKS5oaWRlKCk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnNob3coKS5zZXRJbWFnZURhdGEoIGltYWdlRGF0YSApO1xuXHRcdH0sXG5cdFx0c3RhcnRHcmFiYmluZzpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMudXBsb2FkZXIuaGlkZSgpO1xuXHRcdFx0dGhpcy5ncmFiYmVyLnNob3coKS5zdGFydCgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzdG9wR3JhYmJpbmc6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmdyYWJiZXIuc3RvcCgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRnZXRBY3Rpb24gOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmdyYWJiZXIuYWN0aW9uO1xuXHRcdH0sXG5cdFx0ZGlzbWlzczpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZ3JhYmJlci5zdG9wKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH0pO1xuXG59KShqUXVlcnksd2luZG93LG1PeGllKTtcbiJdfQ==
