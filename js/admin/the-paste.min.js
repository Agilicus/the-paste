(function(){var e,t,a,i,n;e=window.jQuery,e.paste=function(e){var a;return"undefined"!=typeof console&&null!==console&&console.log("DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead."),a=t.mountNonInputable(e),a._container},e.fn.pastableNonInputable=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is("textarea, input:text, [contenteditable]")||(t.mountNonInputable(a),a._pastable=!0);return this},e.fn.pastableTextarea=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is(":not(textarea, input:text)")||(t.mountTextarea(a),a._pastable=!0);return this},e.fn.pastableContenteditable=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is(":not([contenteditable])")||(t.mountContenteditable(a),a._pastable=!0);return this},i=function(e,t){var a,i,n,r,o,s,l,p,d,u,h;if(null==t&&(t=512),!(p=e.match(/^data\:([^\;]+)\;base64\,(.+)$/)))return null;for(u=p,p=u[0],s=u[1],a=u[2],r=atob(a),n=[],d=0;d<r.length;){for(h=r.slice(d,d+t),o=new Array(h.length),l=0;l<h.length;)o[l]=h.charCodeAt(l),l++;i=new Uint8Array(o),n.push(i),d+=t}return new Blob(n,{type:s})},a=function(){return e(document.createElement("div")).attr("contenteditable",!0).attr("aria-hidden",!0).attr("tabindex",-1).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},n=function(t,a){var i,n,r,o,s,l;return o=void 0,s=void 0,r=void 0,n=void 0,i=void 0,"area"===(l=t.nodeName.toLowerCase())?(o=t.parentNode,s=o.name,!(!t.href||!s||"map"!==o.nodeName.toLowerCase())&&(r=e("img[usemap='#"+s+"']"),r.length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(n=!t.disabled)&&(i=e(t).closest("fieldset")[0])&&(n=!i.disabled):n="a"===l?t.href||a:a,(n=n||e(t).is("[contenteditable]"))&&e(t).is(":visible"))},t=function(){function t(t,a){this._container=t,this._target=a,this._container=e(this._container),this._target=e(this._target).addClass("pastable"),this._container.on("paste",function(e){return function(t){var a,i,n,r,o,s,l,p,d,u,h,c,g;if(t.currentTarget!==t.target)return t.preventDefault();if(e._paste_event_fired=!0,null!=(null!=(d=t.originalEvent)?d.clipboardData:void 0))if(a=t.originalEvent.clipboardData,a.items)for(u=a.items,r=0,s=u.length;r<s;r++){if(n=u[r],n.type.match(/^image\//)){p=new FileReader,p.onload=function(t){return e._handleImage(t.target.result)};try{p.readAsDataURL(n.getAsFile())}catch(e){}t.preventDefault();break}"text/plain"===n.type&&n.getAsString(function(t){return e._target.trigger("pasteText",{text:t})})}else-1!==Array.prototype.indexOf.call(a.types,"text/plain")&&(g=a.getData("Text"),setTimeout(function(){return e._target.trigger("pasteText",{text:g})},1)),e._checkImagesInContainer(function(t){return e._handleImage(t)});if(a=window.clipboardData)if(null!=(h=g=a.getData("Text"))?h.length:void 0)setTimeout(function(){return e._target.trigger("pasteText",{text:g}),e._target.trigger("_pasteCheckContainerDone")},1);else{for(c=a.files,o=0,l=c.length;o<l;o++)i=c[o],e._handleImage(URL.createObjectURL(i));e._checkImagesInContainer(function(e){})}return null}}(this))}return t.prototype._target=null,t.prototype._container=null,t.mountNonInputable=function(i){var r;return r=new t(a().appendTo(i),i),e(i).on("click",function(e){return function(e){if(!n(e.target,!1))return r._container.focus()}}()),r._container.on("focus",function(t){return function(){return e(i).addClass("pastable-focus")}}()),r._container.on("blur",function(t){return function(){return e(i).removeClass("pastable-focus")}}())},t.mountTextarea=function(i){var n,r,o,s;return("undefined"!=typeof DataTransfer&&null!==DataTransfer?DataTransfer.prototype:void 0)&&(null!=(o=Object.getOwnPropertyDescriptor)&&null!=(s=o.call(Object,DataTransfer.prototype,"items"))?s.get:void 0)?this.mountContenteditable(i):(r=new t(a().insertBefore(i),i),n=!1,e(i).on("keyup",function(e){var t;return 17!==(t=e.keyCode)&&224!==t||(n=!1),null}),e(i).on("keydown",function(t){var a;return 17!==(a=t.keyCode)&&224!==a||(n=!0),null!=t.ctrlKey&&null!=t.metaKey&&(n=t.ctrlKey||t.metaKey),n&&86===t.keyCode&&(r._textarea_focus_stolen=!0,r._container.focus(),r._paste_event_fired=!1,setTimeout(function(t){return function(){if(!r._paste_event_fired)return e(i).focus(),r._textarea_focus_stolen=!1}}(),1)),null}),e(i).on("paste",function(e){return function(){}}()),e(i).on("focus",function(t){return function(){if(!r._textarea_focus_stolen)return e(i).addClass("pastable-focus")}}()),e(i).on("blur",function(t){return function(){if(!r._textarea_focus_stolen)return e(i).removeClass("pastable-focus")}}()),e(r._target).on("_pasteCheckContainerDone",function(t){return function(){return e(i).focus(),r._textarea_focus_stolen=!1}}()),e(r._target).on("pasteText",function(t){return function(t,a){var n,r,o;return o=e(i).prop("selectionStart"),r=e(i).prop("selectionEnd"),n=e(i).val(),e(i).val(""+n.slice(0,o)+a.text+n.slice(r)),e(i)[0].setSelectionRange(o+a.text.length,o+a.text.length),e(i).trigger("change")}}()))},t.mountContenteditable=function(a){return new t(a,a),e(a).on("focus",function(t){return function(){return e(a).addClass("pastable-focus")}}()),e(a).on("blur",function(t){return function(){return e(a).removeClass("pastable-focus")}}())},t.prototype._handleImage=function(e){var t;return e.match(/^webkit\-fake\-url\:\/\//)?this._target.trigger("pasteImageError",{message:"You are trying to paste an image in Safari, however we are unable to retieve its data."}):(this._target.trigger("pasteImageStart"),t=new Image,t.crossOrigin="anonymous",t.onload=function(e){return function(){var a,n,r,o;n=document.createElement("canvas"),n.width=t.width,n.height=t.height,r=n.getContext("2d"),r.drawImage(t,0,0,n.width,n.height),o=null;try{o=n.toDataURL("image/png"),a=i(o)}catch(e){}return o&&e._target.trigger("pasteImage",{blob:a,dataURL:o,width:t.width,height:t.height}),e._target.trigger("pasteImageEnd")}}(this),t.onerror=function(t){return function(){return t._target.trigger("pasteImageError",{message:"Failed to get image from: "+e,url:e}),t._target.trigger("pasteImageEnd")}}(this),t.src=e)},t.prototype._checkImagesInContainer=function(t){var a,i,n,r,o;for(o=Math.floor(1e3*Math.random()),r=this._container.find("img"),i=0,n=r.length;i<n;i++)a=r[i],a["_paste_marked_"+o]=!0;return setTimeout(function(i){return function(){var n,r,s;for(s=i._container.find("img"),n=0,r=s.length;n<r;n++)a=s[n],a["_paste_marked_"+o]||(t(a.src),e(a).remove());return i._target.trigger("_pasteCheckContainerDone")}}(this),1)},t}()}).call(this),function(e,t,a){var i=(navigator.userAgent.indexOf("Chrome"),0);thepaste=t.thepaste=e.extend({supports:{paste:"paste"in document||"onpaste"in document||"object"==typeof window.onpaste||"onpaste"in document.createElement("DIV")},view:{},uploadImage:function(t,n,r){var o="__thepaste_box_"+i++,s=e(t).wrap('<div id="'+o+'" data-progress="0" class="thepaste-image-placeholder" contenteditable="false"></div>').parent();t.onload=function(){e(n.$("#"+o)).width(this.naturalWidth),e(n.$("#"+o)).height(this.naturalHeight)};var l,p,d=t.src,u=function(t){var i=t.match(/^data\:([^\;]+)\;/)[1],r=new a.Blob(null,{data:t}),s=thepaste.options.mime_types.convert[i],l=e('#post [name="post_title"]#title').val();void 0===s&&console.trace("Won't upload, bad mime type: "+i),void 0!==l?(l=l.replace(/([\^\!\?<>:"'\/\|\*ยง])/g,"").replace(/ +/g," "),r.name=thepaste.l10n.pasted_into+" "+l+"."+s):r.name=thepaste.l10n.pasted+"."+s,r.type=i;var u=function(){p.uploader.uploader.uploader.addFile(r)};p?(p.state().reset(),u()):(p=wp.media.editor.open(window.wpActiveEditor,{frame:"post",state:"insert",title:thepaste.l10n.copy_paste,multiple:!1}),p.close(),p.uploader.uploader&&p.uploader.uploader.ready?u():p.on("uploader:ready",u)),p.uploader.uploader.uploader.bind("UploadProgress",function(e){n.$("#"+o).attr("data-progress",e.total.percent)}),p.uploader.uploader.uploader.bind("FileUploaded",function(t,a){var i=n.$("#"+o),r='<img class="alignnone wp-image-'+a.attachment.id+' size-full" src="'+a.attachment.changed.url+'" />';i.replaceWith(r),n.$('img[src="'+d+'"]').each(function(){e(this).replaceWith(r)})}),p.uploader.uploader.uploader.bind("Error",function(e,t){console.log(e,t)})};return"blob:"===d.substr(0,5)?(l=new XMLHttpRequest,l.responseType="blob",l.onreadystatechange=function(){var e;4==l.readyState&&(e=new FileReader,e.onload=function(){u(e.result)},e.readAsDataURL(new Blob([l.response],{type:"image/png"})))},l.open("GET",d),l.send(null)):"data:"===d.substr(0,5)&&u(d),s},clipboardHasImage:function(t){var a=!1;return t.items?(e.each(t.items,function(e,t){if(t.type in thepaste.options.mime_types.paste)return a=!0,!1}),a):t.types?(e.each(thepaste.options.mime_types.paste,function(e,i){if(t.types.indexOf(e)>-1)return a=!0,!1}),a):null}},thepaste)}(jQuery,wp.media,mOxie),function(e,t){var a=wp.media.thepaste.l10n;e.extend(wp.Uploader.prototype,{success:function(e){}}),_.extend(wp.media.view.MediaFrame.Select.prototype,{_parentInitialize:wp.media.view.MediaFrame.Select.prototype.initialize,initialize:function(){this._parentInitialize.apply(this,arguments),this.bindPasteHandlers()},_parentBrowseRouter:wp.media.view.MediaFrame.Select.prototype.browseRouter,browseRouter:function(e){this._parentBrowseRouter.apply(this,arguments),wp.media.thepaste.supports.paste&&e.set({pasteboard:{text:a.copy_paste,priority:35}})},bindPasteHandlers:function(){var e=!1;this.on("content:render close",function(t){e&&"function"==typeof e.dismiss&&e.dismiss(),void 0!==t&&(e=t)},this),this.on("content:create:pasteboard",this.contentCreatePasteboard,this),this.on("content:render:pasteboard",this.contentRenderGrabber,this),this.on("content:create:dataimage",this.contentRenderGrabber,this),frame=this},contentCreatePasteboard:function(e){this.state();this.currentPasteView=e.view=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this,grabber:wp.media.thepaste.view.Pasteboard}),this.listenTo(this.currentPasteView.uploader,"action:uploaded:dataimage",this.uploadedDataImage)},contentRenderGrabber:function(e){e.startGrabbing()},uploadedDataImage:function(e){this.stopListening(this.currentPasteView.uploader,"action:uploaded:dataimage");var t={view:null};this.browseContent(t),this.content.set(t.view),this.router.get().select("browse")},imagePasted:function(){console.log(this)}}),_.extend(wp.media.view.AttachmentsBrowser.prototype,{_parentInitialize:wp.media.view.AttachmentsBrowser.prototype.initialize,initialize:function(){var e,t=this;this._parentInitialize.apply(this,arguments),this.thepaste={paste:{grabber:!1,modal:!1,mode:"paste"},current:!1},this.controller instanceof wp.media.view.MediaFrame.Select||wp.media.thepaste.supports.paste&&(e=new wp.media.view.Button({text:a.copy_paste,className:"grabber-button",priority:-64,click:function(){t.thepaste.active=t.thepaste.paste,t.thepasteOpen(a.copy_paste)}}),this.thepaste.paste.grabber=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this.controller,grabber:wp.media.thepaste.view.Pasteboard,wpuploader:this.controller.uploader.uploader.uploader}),this.toolbar.set("pasteModeButton",e.render()))},thepasteUploaded:function(e){this.thepaste.active.grabber.dismiss(),this.thepaste.modal.close(),this.thepasteClose()},thepasteError:function(e){console.log("error",e)},thepasteOpen:function(e){var t=this;this.thepaste.modal=new wp.media.view.Modal({controller:this,title:e}),this.thepaste.modal.content(this.thepaste.active.grabber),this.thepaste.modal.open(),this.thepaste.modal.on("close",function(){t.thepasteClose.apply(t),t.thepaste.active.grabber.stopGrabbing()}),this.thepaste.active.grabber.startGrabbing(),this.listenTo(this.thepaste.active.grabber.uploader,"action:uploaded:dataimage",this.thepasteUploaded),this.listenTo(this.thepaste.active.grabber.uploader,"error:uploaded:dataimage",this.thepasteError)},thepasteClose:function(){this.controller.deactivateMode(this.thepaste.active.mode).activateMode("edit"),this.stopListening(this.thepaste.active.grabber.uploader,"action:uploaded:dataimage"),this.stopListening(this.thepaste.active.grabber.uploader,"error:uploaded:dataimage")}})}(jQuery,window),function(e,t,a){var i=wp.media.thepaste,n=(wp.media.view.Button,wp.media.view.Modal,i.l10n);wp.media.thepaste.view.DataSourceImageUploader=wp.media.View.extend({template:wp.template("thepaste-uploader"),className:"thepaste-uploader",controller:null,image:null,$discardBtn:null,$uploadBtn:null,uploader:null,events:{'click [data-action="upload"]':"uploadImage",'click [data-action="discard"]':"discardImage"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),_.defaults(this.options,{defaultFileName:n.image});new wp.media.View({tagName:"div",className:"instruments",controller:this.controller});this.uploader=this.options.uploder},setImageData:function(e){var t=this.$imageContainer.html("").get(0),n=this,r=e.match(/data:(image\/(\w+));/)[1];return i.options.mime_types.convert[r]||(r=this.options.defaultFileFormat),this.image&&this.image.destroy(),this.image=new a.Image,this.image.onload=function(){var e=n.getUploader().getOption("resize"),a=Math.max(e.width/this.width,e.height/this.height);!!e&&a<1&&this.downsize(this.width*a,this.height*a),this.embed(t)},this.image.load(e),this.$imageContainer&&this.$imageContainer.append(this.image),this.$('[data-setting="format"] input[value="'+r+'"]').prop("checked",!0),this.disabled(!1),this},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$imageContainer=this.$(".image-container"),this.$discardBtn=this.$('[data-action="discard"]'),this.$uploadBtn=this.$('[data-action="upload"]'),this.$('[data-setting="title"]').val(this.options.defaultFileName),this},discardImage:function(){this.trigger("action:discard:dataimage",this),this.unbindUploaderEvents()},uploadImage:function(){var e=this.$('[data-setting="format"] :checked').val(),t=i.options.mime_types.convert[e],a=this.$('input[data-setting="title"]').val()+"."+t,n=this.image.getAsBlob(e,i.options.jpeg_quality);this.bindUploaderEvents(),n.detach(n.getSource()),n.name=a,n.type=e,this.getUploader().addFile(n,a),this.disabled(!0),this.trigger("action:upload:dataimage",this)},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},disabled:function(e){this.$discardBtn.prop("disabled",e),this.$uploadBtn.prop("disabled",e)},_uploadSuccessHandler:function(){this.trigger("action:uploaded:dataimage"),this.disabled(!1),this.unbindUploaderEvents()},_uploadErrorHandler:function(){this.trigger("error:uploaded:dataimage"),this.disabled(!1),this.unbindUploaderEvents()},bindUploaderEvents:function(){this.getUploader().bind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().bind("Error",this._uploadErrorHandler,this)},unbindUploaderEvents:function(){this.getUploader().unbind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().unbind("Error",this._uploadErrorHandler,this)},getUploader:function(){return this.controller.uploader.uploader.uploader}}),wp.media.thepaste.view.Pasteboard=wp.media.View.extend({template:wp.template("thepaste-pasteboard"),className:"thepaste-pasteboard",controller:null,action:"paste",$pasteboard:null,render:function(){var e=this;return wp.media.View.prototype.render.apply(this,arguments),this.$pasteboard=this.$(".injector").pastableContenteditable(),this.$message=this.$(".message"),this.$pasteboard.on("click",function(){e.show_message("")}),this},start:function(){var t,a=this;return this.imagePasted=!1,this.$pasteboard.on("paste",function(e){t=wp.media.thepaste.clipboardHasImage(e.originalEvent.clipboardData)}).on("pasteText",function(i,r){t||a.imagePasted||(a.show_message(n.paste_error_no_image),e(this).html(""))}).on("pasteImage",function(e,t){a.imagePasted||(a.trigger("action:create:dataimage",this,t.dataURL),a.imagePasted=!0)}).on("pasteImageError",function(t,i){a.show_message(n.paste_error),e(this).html("")}),setTimeout(function(){a.$pasteboard.get(0).focus()},1),this},stop:function(){return this.$pasteboard.off("pasteImage").off("pasteImageError").off("pasteText"),this},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},show_message:function(e){this.$message.text(e)}}),wp.media.thepaste.view.DataSourceImageGrabber=wp.media.View.extend({template:wp.template("thepaste-grabber"),className:"thepaste-grabber",grabber:null,uploader:null,initialize:function(){var e=wp.media.View.prototype.initialize.apply(this,arguments);return _.defaults(this.options,{wpuploader:null,defaultFileName:n.pasted,defaultFileFormat:"image/png",title:n.copy_paste}),this.grabber=new this.options.grabber({controller:this.controller}),this.uploader=new wp.media.thepaste.view.DataSourceImageUploader({controller:this.controller,uploder:this.options.wpuploader,defaultFileName:this.options.defaultFileName,defaultFileFormat:this.options.defaultFileFormat}),this.render(),this.listenTo(this.grabber,"action:create:dataimage",this.imageCreated),this.listenTo(this.uploader,"action:discard:dataimage",this.startGrabbing),e},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$(".content").append(this.grabber.render().$el).append(this.uploader.render().$el),this},imageCreated:function(e,t){this.grabber.stop().hide(),this.uploader.show().setImageData(t)},startGrabbing:function(){return this.uploader.hide(),this.grabber.show().start(),this},stopGrabbing:function(){return this.grabber.stop(),this},getAction:function(){return this.grabber.action},dismiss:function(){return this.grabber.stop(),this}})}(jQuery,window,mOxie);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3RlLmpzIiwidGhlLXBhc3RlLWJhc2UuanMiLCJ0aGUtcGFzdGUuanMiLCJtZWRpYS12aWV3LmpzIl0sIm5hbWVzIjpbIiQiLCJQYXN0ZSIsImNyZWF0ZUhpZGRlbkVkaXRhYmxlIiwiZGF0YVVSTHRvQmxvYiIsImlzRm9jdXNhYmxlIiwid2luZG93IiwialF1ZXJ5IiwicGFzdGUiLCJwYXN0ZUNvbnRhaW5lciIsInBtIiwiY29uc29sZSIsImxvZyIsIm1vdW50Tm9uSW5wdXRhYmxlIiwiX2NvbnRhaW5lciIsImZuIiwicGFzdGFibGVOb25JbnB1dGFibGUiLCJlbCIsImoiLCJsZW4iLCJyZWYiLCJ0aGlzIiwibGVuZ3RoIiwiX3Bhc3RhYmxlIiwiaXMiLCJwYXN0YWJsZVRleHRhcmVhIiwibW91bnRUZXh0YXJlYSIsInBhc3RhYmxlQ29udGVudGVkaXRhYmxlIiwibW91bnRDb250ZW50ZWRpdGFibGUiLCJkYXRhVVJMIiwic2xpY2VTaXplIiwiYjY0RGF0YSIsImJ5dGVBcnJheSIsImJ5dGVBcnJheXMiLCJieXRlQ2hhcmFjdGVycyIsImJ5dGVOdW1iZXJzIiwiY29udGVudFR5cGUiLCJpIiwibSIsIm9mZnNldCIsInNsaWNlIiwibWF0Y2giLCJhdG9iIiwiQXJyYXkiLCJjaGFyQ29kZUF0IiwiVWludDhBcnJheSIsInB1c2giLCJCbG9iIiwidHlwZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHIiLCJjc3MiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwibGVmdCIsIm92ZXJmbG93IiwiZWxlbWVudCIsImhhc1RhYmluZGV4IiwiZmllbGRzZXQiLCJmb2N1c2FibGVJZlZpc2libGUiLCJpbWciLCJtYXAiLCJtYXBOYW1lIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudE5vZGUiLCJuYW1lIiwiaHJlZiIsInRlc3QiLCJkaXNhYmxlZCIsImNsb3Nlc3QiLCJfdGFyZ2V0IiwiYWRkQ2xhc3MiLCJvbiIsIl90aGlzIiwiZXYiLCJjbGlwYm9hcmREYXRhIiwiZmlsZSIsIml0ZW0iLCJrIiwibGVuMSIsInJlYWRlciIsInJlZjEiLCJyZWYyIiwicmVmMyIsInRleHQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJfcGFzdGVfZXZlbnRfZmlyZWQiLCJvcmlnaW5hbEV2ZW50IiwiaXRlbXMiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJfaGFuZGxlSW1hZ2UiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0QXNGaWxlIiwiZXJyb3IiLCJnZXRBc1N0cmluZyIsInN0cmluZyIsInRyaWdnZXIiLCJwcm90b3R5cGUiLCJpbmRleE9mIiwiY2FsbCIsInR5cGVzIiwiZ2V0RGF0YSIsInNldFRpbWVvdXQiLCJfY2hlY2tJbWFnZXNJbkNvbnRhaW5lciIsInNyYyIsImZpbGVzIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibm9uSW5wdXRhYmxlIiwiYXBwZW5kVG8iLCJmb2N1cyIsInJlbW92ZUNsYXNzIiwidGV4dGFyZWEiLCJjdGxEb3duIiwiRGF0YVRyYW5zZmVyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0IiwiaW5zZXJ0QmVmb3JlIiwia2V5Q29kZSIsImN0cmxLZXkiLCJtZXRhS2V5IiwiX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiIsImRhdGEiLCJjb250ZW50IiwiY3VyRW5kIiwiY3VyU3RhcnQiLCJwcm9wIiwidmFsIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJjb250ZW50ZWRpdGFibGUiLCJsb2FkZXIiLCJtZXNzYWdlIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsImJsb2IiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwidG9EYXRhVVJMIiwib25lcnJvciIsInVybCIsImNiIiwidGltZXNwYW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmaW5kIiwicmVtb3ZlIiwiZXhwb3J0cyIsIm8iLCJjb3VudGVyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidGhlcGFzdGUiLCJleHRlbmQiLCJzdXBwb3J0cyIsInZpZXciLCJ1cGxvYWRJbWFnZSIsImltYWdlIiwiZWRpdG9yIiwidXBsb2FkX3BsYWNlaG9sZGVyIiwiaWQiLCIkY29udGFpbmVyIiwid3JhcCIsInBhcmVudCIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJ4aHIiLCJ3b3JrZmxvdyIsInVwbG9hZCIsInN1ZmZpeCIsIm9wdGlvbnMiLCJtaW1lX3R5cGVzIiwiY29udmVydCIsInBvc3RuYW1lIiwidHJhY2UiLCJyZXBsYWNlIiwibDEwbiIsInBhc3RlZF9pbnRvIiwicGFzdGVkIiwiYWRkRmlsZSIsInVwbG9hZGVyIiwic3RhdGUiLCJyZXNldCIsIndwIiwibWVkaWEiLCJvcGVuIiwid3BBY3RpdmVFZGl0b3IiLCJmcmFtZSIsInRpdGxlIiwiY29weV9wYXN0ZSIsIm11bHRpcGxlIiwiY2xvc2UiLCJyZWFkeSIsImJpbmQiLCJlIiwidG90YWwiLCJwZXJjZW50IiwidXAiLCJhcmdzIiwiaW1nSFRNTCIsImF0dGFjaG1lbnQiLCJjaGFuZ2VkIiwicmVwbGFjZVdpdGgiLCJlYWNoIiwic3Vic3RyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVR5cGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJzZW5kIiwiY2xpcGJvYXJkSGFzSW1hZ2UiLCJoYXNJbWFnZSIsImV4dCIsIm1PeGllIiwiVXBsb2FkZXIiLCJzdWNjZXNzIiwiZmlsZV9hdHRhY2htZW50IiwiXyIsIk1lZGlhRnJhbWUiLCJTZWxlY3QiLCJfcGFyZW50SW5pdGlhbGl6ZSIsImluaXRpYWxpemUiLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmRQYXN0ZUhhbmRsZXJzIiwiX3BhcmVudEJyb3dzZVJvdXRlciIsImJyb3dzZVJvdXRlciIsInNldCIsInBhc3RlYm9hcmQiLCJwcmlvcml0eSIsInByZXZpb3VzQ29udGVudCIsImRpc21pc3MiLCJjb250ZW50Q3JlYXRlUGFzdGVib2FyZCIsImNvbnRlbnRSZW5kZXJHcmFiYmVyIiwiY3VycmVudFBhc3RlVmlldyIsIkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIiLCJjb250cm9sbGVyIiwiZ3JhYmJlciIsIlBhc3RlYm9hcmQiLCJsaXN0ZW5UbyIsInVwbG9hZGVkRGF0YUltYWdlIiwic3RhcnRHcmFiYmluZyIsInN0b3BMaXN0ZW5pbmciLCJvYmoiLCJicm93c2VDb250ZW50Iiwicm91dGVyIiwic2VsZWN0IiwiaW1hZ2VQYXN0ZWQiLCJBdHRhY2htZW50c0Jyb3dzZXIiLCJwYXN0ZUJ0biIsInNlbGYiLCJtb2RhbCIsIm1vZGUiLCJjdXJyZW50IiwiQnV0dG9uIiwiY2xhc3NOYW1lIiwiY2xpY2siLCJhY3RpdmUiLCJ0aGVwYXN0ZU9wZW4iLCJ3cHVwbG9hZGVyIiwidG9vbGJhciIsInJlbmRlciIsInRoZXBhc3RlVXBsb2FkZWQiLCJ0aGVwYXN0ZUNsb3NlIiwidGhlcGFzdGVFcnJvciIsIk1vZGFsIiwic3RvcEdyYWJiaW5nIiwiZGVhY3RpdmF0ZU1vZGUiLCJhY3RpdmF0ZU1vZGUiLCJEYXRhU291cmNlSW1hZ2VVcGxvYWRlciIsIlZpZXciLCJ0ZW1wbGF0ZSIsIiRkaXNjYXJkQnRuIiwiJHVwbG9hZEJ0biIsImV2ZW50cyIsImNsaWNrIFtkYXRhLWFjdGlvbj1cInVwbG9hZFwiXSIsImNsaWNrIFtkYXRhLWFjdGlvbj1cImRpc2NhcmRcIl0iLCJkZWZhdWx0cyIsImRlZmF1bHRGaWxlTmFtZSIsInRhZ05hbWUiLCJ1cGxvZGVyIiwic2V0SW1hZ2VEYXRhIiwiY29udGFpbmVyIiwiJGltYWdlQ29udGFpbmVyIiwiaHRtbCIsImZvcm1hdCIsImRlZmF1bHRGaWxlRm9ybWF0IiwiZGVzdHJveSIsIm9wdHMiLCJnZXRVcGxvYWRlciIsImdldE9wdGlvbiIsInNjYWxlIiwibWF4IiwiZG93bnNpemUiLCJlbWJlZCIsImxvYWQiLCJhcHBlbmQiLCJkaXNjYXJkSW1hZ2UiLCJ1bmJpbmRVcGxvYWRlckV2ZW50cyIsImdldEFzQmxvYiIsImpwZWdfcXVhbGl0eSIsImJpbmRVcGxvYWRlckV2ZW50cyIsImRldGFjaCIsImdldFNvdXJjZSIsInNob3ciLCIkZWwiLCJoaWRlIiwiX3VwbG9hZFN1Y2Nlc3NIYW5kbGVyIiwiX3VwbG9hZEVycm9ySGFuZGxlciIsInVuYmluZCIsImFjdGlvbiIsIiRwYXN0ZWJvYXJkIiwiJG1lc3NhZ2UiLCJzaG93X21lc3NhZ2UiLCJzdGFydCIsInBhc3RlX2Vycm9yX25vX2ltYWdlIiwicGFzdGVfZXJyb3IiLCJzdG9wIiwib2ZmIiwibXNnIiwicmV0IiwiaW1hZ2VDcmVhdGVkIiwiaW1hZ2VEYXRhIiwiZ2V0QWN0aW9uIl0sIm1hcHBpbmdzIjoiQ0FRQSxXQUNBLEdBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLENBRUFKLEdBQUFLLE9BQUFDLE9BRUFOLEVBQUFPLE1BQUEsU0FBQUMsR0FDQSxHQUFBQyxFQUtBLE9BSkEsbUJBQUFDLFVBQUEsT0FBQUEsU0FDQUEsUUFBQUMsSUFBQSwwRkFFQUYsRUFBQVIsRUFBQVcsa0JBQUFKLEdBQ0FDLEVBQUFJLFlBR0FiLEVBQUFjLEdBQUFDLHFCQUFBLFdBQ0EsR0FBQUMsR0FBQUMsRUFBQUMsRUFBQUMsQ0FFQSxLQURBQSxFQUFBQyxLQUNBSCxFQUFBLEVBQUFDLEVBQUFDLEVBQUFFLE9BQUFKLEVBQUFDLEVBQUFELElBQ0FELEVBQUFHLEVBQUFGLEdBQ0FELEVBQUFNLFdBQUF0QixFQUFBZ0IsR0FBQU8sR0FBQSw2Q0FHQXRCLEVBQUFXLGtCQUFBSSxHQUNBQSxFQUFBTSxXQUFBLEVBRUEsT0FBQUYsT0FHQXBCLEVBQUFjLEdBQUFVLGlCQUFBLFdBQ0EsR0FBQVIsR0FBQUMsRUFBQUMsRUFBQUMsQ0FFQSxLQURBQSxFQUFBQyxLQUNBSCxFQUFBLEVBQUFDLEVBQUFDLEVBQUFFLE9BQUFKLEVBQUFDLEVBQUFELElBQ0FELEVBQUFHLEVBQUFGLEdBQ0FELEVBQUFNLFdBQUF0QixFQUFBZ0IsR0FBQU8sR0FBQSxnQ0FHQXRCLEVB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LE1BRUF3VCxhQUFBLFNBQUFwRixFQUFBcUYsR0FDQXpULEtBQUFvTyxRQUFBZ0YsT0FBQVgsT0FDQXpTLEtBQUEwSyxTQUFBNkgsT0FBQXZCLGFBQUF5QyxJQUVBakYsY0FBQSxXQUdBLE1BRkF4TyxNQUFBMEssU0FBQStILE9BQ0F6UyxLQUFBb08sUUFBQW1FLE9BQUFVLFFBQ0FqVCxNQUVBaVEsYUFBQSxXQUVBLE1BREFqUSxNQUFBb08sUUFBQWdGLE9BQ0FwVCxNQUVBMFQsVUFBQSxXQUNBLE1BQUExVCxNQUFBb08sUUFBQXlFLFFBRUEvRSxRQUFBLFdBRUEsTUFEQTlOLE1BQUFvTyxRQUFBZ0YsT0FDQXBULFNBSUFkLE9BQUFELE9BQUEyTiIsImZpbGUiOiJhZG1pbi90aGUtcGFzdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcblxuLypcbnBhc3RlLmpzIGlzIGFuIGludGVyZmFjZSB0byByZWFkIGRhdGEgKCB0ZXh0IC8gaW1hZ2UgKSBmcm9tIGNsaXBib2FyZCBpbiBkaWZmZXJlbnQgYnJvd3NlcnMuIEl0IGFsc28gY29udGFpbnMgc2V2ZXJhbCBoYWNrcy5cblxuaHR0cHM6Ly9naXRodWIuY29tL2xheWVyc3Nzcy9wYXN0ZS5qc1xuICovXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyICQsIFBhc3RlLCBjcmVhdGVIaWRkZW5FZGl0YWJsZSwgZGF0YVVSTHRvQmxvYiwgaXNGb2N1c2FibGU7XG5cbiAgJCA9IHdpbmRvdy5qUXVlcnk7XG5cbiAgJC5wYXN0ZSA9IGZ1bmN0aW9uKHBhc3RlQ29udGFpbmVyKSB7XG4gICAgdmFyIHBtO1xuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRFUFJFQ0FURUQ6IFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJC5mbi5wYXN0YWJsZU5vbklucHV0YWJsZSgpIGluc3RlYWQuXCIpO1xuICAgIH1cbiAgICBwbSA9IFBhc3RlLm1vdW50Tm9uSW5wdXRhYmxlKHBhc3RlQ29udGFpbmVyKTtcbiAgICByZXR1cm4gcG0uX2NvbnRhaW5lcjtcbiAgfTtcblxuICAkLmZuLnBhc3RhYmxlTm9uSW5wdXRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsLCBqLCBsZW4sIHJlZjtcbiAgICByZWYgPSB0aGlzO1xuICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgZWwgPSByZWZbal07XG4gICAgICBpZiAoZWwuX3Bhc3RhYmxlIHx8ICQoZWwpLmlzKCd0ZXh0YXJlYSwgaW5wdXQ6dGV4dCwgW2NvbnRlbnRlZGl0YWJsZV0nKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFBhc3RlLm1vdW50Tm9uSW5wdXRhYmxlKGVsKTtcbiAgICAgIGVsLl9wYXN0YWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gICQuZm4ucGFzdGFibGVUZXh0YXJlYSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbCwgaiwgbGVuLCByZWY7XG4gICAgcmVmID0gdGhpcztcbiAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgIGVsID0gcmVmW2pdO1xuICAgICAgaWYgKGVsLl9wYXN0YWJsZSB8fCAkKGVsKS5pcygnOm5vdCh0ZXh0YXJlYSwgaW5wdXQ6dGV4dCknKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFBhc3RlLm1vdW50VGV4dGFyZWEoZWwpO1xuICAgICAgZWwuX3Bhc3RhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgJC5mbi5wYXN0YWJsZUNvbnRlbnRlZGl0YWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbCwgaiwgbGVuLCByZWY7XG4gICAgcmVmID0gdGhpcztcbiAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgIGVsID0gcmVmW2pdO1xuICAgICAgaWYgKGVsLl9wYXN0YWJsZSB8fCAkKGVsKS5pcygnOm5vdChbY29udGVudGVkaXRhYmxlXSknKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFBhc3RlLm1vdW50Q29udGVudGVkaXRhYmxlKGVsKTtcbiAgICAgIGVsLl9wYXN0YWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIGRhdGFVUkx0b0Jsb2IgPSBmdW5jdGlvbihkYXRhVVJMLCBzbGljZVNpemUpIHtcbiAgICB2YXIgYjY0RGF0YSwgYnl0ZUFycmF5LCBieXRlQXJyYXlzLCBieXRlQ2hhcmFjdGVycywgYnl0ZU51bWJlcnMsIGNvbnRlbnRUeXBlLCBpLCBtLCBvZmZzZXQsIHJlZiwgc2xpY2U7XG4gICAgaWYgKHNsaWNlU2l6ZSA9PSBudWxsKSB7XG4gICAgICBzbGljZVNpemUgPSA1MTI7XG4gICAgfVxuICAgIGlmICghKG0gPSBkYXRhVVJMLm1hdGNoKC9eZGF0YVxcOihbXlxcO10rKVxcO2Jhc2U2NFxcLCguKykkLykpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmVmID0gbSwgbSA9IHJlZlswXSwgY29udGVudFR5cGUgPSByZWZbMV0sIGI2NERhdGEgPSByZWZbMl07XG4gICAgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGI2NERhdGEpO1xuICAgIGJ5dGVBcnJheXMgPSBbXTtcbiAgICBvZmZzZXQgPSAwO1xuICAgIHdoaWxlIChvZmZzZXQgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGgpIHtcbiAgICAgIHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzbGljZVNpemUpO1xuICAgICAgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoc2xpY2UubGVuZ3RoKTtcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBzbGljZS5sZW5ndGgpIHtcbiAgICAgICAgYnl0ZU51bWJlcnNbaV0gPSBzbGljZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpKys7XG4gICAgICB9XG4gICAgICBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlTnVtYmVycyk7XG4gICAgICBieXRlQXJyYXlzLnB1c2goYnl0ZUFycmF5KTtcbiAgICAgIG9mZnNldCArPSBzbGljZVNpemU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQmxvYihieXRlQXJyYXlzLCB7XG4gICAgICB0eXBlOiBjb250ZW50VHlwZVxuICAgIH0pO1xuICB9O1xuXG4gIGNyZWF0ZUhpZGRlbkVkaXRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLmF0dHIoJ2NvbnRlbnRlZGl0YWJsZScsIHRydWUpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSkuYXR0cigndGFiaW5kZXgnLCAtMSkuY3NzKHtcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgaGVpZ2h0OiAxLFxuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBsZWZ0OiAtMTAwLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gICAgfSk7XG4gIH07XG5cbiAgaXNGb2N1c2FibGUgPSBmdW5jdGlvbihlbGVtZW50LCBoYXNUYWJpbmRleCkge1xuICAgIHZhciBmaWVsZHNldCwgZm9jdXNhYmxlSWZWaXNpYmxlLCBpbWcsIG1hcCwgbWFwTmFtZSwgbm9kZU5hbWU7XG4gICAgbWFwID0gdm9pZCAwO1xuICAgIG1hcE5hbWUgPSB2b2lkIDA7XG4gICAgaW1nID0gdm9pZCAwO1xuICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9IHZvaWQgMDtcbiAgICBmaWVsZHNldCA9IHZvaWQgMDtcbiAgICBub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoJ2FyZWEnID09PSBub2RlTmFtZSkge1xuICAgICAgbWFwID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgbWFwTmFtZSA9IG1hcC5uYW1lO1xuICAgICAgaWYgKCFlbGVtZW50LmhyZWYgfHwgIW1hcE5hbWUgfHwgbWFwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdtYXAnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGltZyA9ICQoJ2ltZ1t1c2VtYXA9XFwnIycgKyBtYXBOYW1lICsgJ1xcJ10nKTtcbiAgICAgIHJldHVybiBpbWcubGVuZ3RoID4gMCAmJiBpbWcuaXMoJzp2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICgvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkLy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gIWVsZW1lbnQuZGlzYWJsZWQ7XG4gICAgICBpZiAoZm9jdXNhYmxlSWZWaXNpYmxlKSB7XG4gICAgICAgIGZpZWxkc2V0ID0gJChlbGVtZW50KS5jbG9zZXN0KCdmaWVsZHNldCcpWzBdO1xuICAgICAgICBpZiAoZmllbGRzZXQpIHtcbiAgICAgICAgICBmb2N1c2FibGVJZlZpc2libGUgPSAhZmllbGRzZXQuZGlzYWJsZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCdhJyA9PT0gbm9kZU5hbWUpIHtcbiAgICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9IGVsZW1lbnQuaHJlZiB8fCBoYXNUYWJpbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gaGFzVGFiaW5kZXg7XG4gICAgfVxuICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9IGZvY3VzYWJsZUlmVmlzaWJsZSB8fCAkKGVsZW1lbnQpLmlzKCdbY29udGVudGVkaXRhYmxlXScpO1xuICAgIHJldHVybiBmb2N1c2FibGVJZlZpc2libGUgJiYgJChlbGVtZW50KS5pcygnOnZpc2libGUnKTtcbiAgfTtcblxuICBQYXN0ZSA9IChmdW5jdGlvbigpIHtcbiAgICBQYXN0ZS5wcm90b3R5cGUuX3RhcmdldCA9IG51bGw7XG5cbiAgICBQYXN0ZS5wcm90b3R5cGUuX2NvbnRhaW5lciA9IG51bGw7XG5cbiAgICBQYXN0ZS5tb3VudE5vbklucHV0YWJsZSA9IGZ1bmN0aW9uKG5vbklucHV0YWJsZSkge1xuICAgICAgdmFyIHBhc3RlO1xuICAgICAgcGFzdGUgPSBuZXcgUGFzdGUoY3JlYXRlSGlkZGVuRWRpdGFibGUoKS5hcHBlbmRUbyhub25JbnB1dGFibGUpLCBub25JbnB1dGFibGUpO1xuICAgICAgJChub25JbnB1dGFibGUpLm9uKCdjbGljaycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICBpZiAoIWlzRm9jdXNhYmxlKGV2LnRhcmdldCwgZmFsc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFzdGUuX2NvbnRhaW5lci5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHBhc3RlLl9jb250YWluZXIub24oJ2ZvY3VzJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJChub25JbnB1dGFibGUpLmFkZENsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcmV0dXJuIHBhc3RlLl9jb250YWluZXIub24oJ2JsdXInLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkKG5vbklucHV0YWJsZSkucmVtb3ZlQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFBhc3RlLm1vdW50VGV4dGFyZWEgPSBmdW5jdGlvbih0ZXh0YXJlYSkge1xuICAgICAgdmFyIGN0bERvd24sIHBhc3RlLCByZWYsIHJlZjE7XG4gICAgICBpZiAoKHR5cGVvZiBEYXRhVHJhbnNmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgRGF0YVRyYW5zZmVyICE9PSBudWxsID8gRGF0YVRyYW5zZmVyLnByb3RvdHlwZSA6IHZvaWQgMCkgJiYgKChyZWYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKSAhPSBudWxsID8gKHJlZjEgPSByZWYuY2FsbChPYmplY3QsIERhdGFUcmFuc2Zlci5wcm90b3R5cGUsICdpdGVtcycpKSAhPSBudWxsID8gcmVmMS5nZXQgOiB2b2lkIDAgOiB2b2lkIDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vdW50Q29udGVudGVkaXRhYmxlKHRleHRhcmVhKTtcbiAgICAgIH1cbiAgICAgIHBhc3RlID0gbmV3IFBhc3RlKGNyZWF0ZUhpZGRlbkVkaXRhYmxlKCkuaW5zZXJ0QmVmb3JlKHRleHRhcmVhKSwgdGV4dGFyZWEpO1xuICAgICAgY3RsRG93biA9IGZhbHNlO1xuICAgICAgJCh0ZXh0YXJlYSkub24oJ2tleXVwJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIHJlZjI7XG4gICAgICAgIGlmICgocmVmMiA9IGV2LmtleUNvZGUpID09PSAxNyB8fCByZWYyID09PSAyMjQpIHtcbiAgICAgICAgICBjdGxEb3duID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbiAgICAgICQodGV4dGFyZWEpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIHJlZjI7XG4gICAgICAgIGlmICgocmVmMiA9IGV2LmtleUNvZGUpID09PSAxNyB8fCByZWYyID09PSAyMjQpIHtcbiAgICAgICAgICBjdGxEb3duID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGV2LmN0cmxLZXkgIT0gbnVsbCkgJiYgKGV2Lm1ldGFLZXkgIT0gbnVsbCkpIHtcbiAgICAgICAgICBjdGxEb3duID0gZXYuY3RybEtleSB8fCBldi5tZXRhS2V5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdGxEb3duICYmIGV2LmtleUNvZGUgPT09IDg2KSB7XG4gICAgICAgICAgcGFzdGUuX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiA9IHRydWU7XG4gICAgICAgICAgcGFzdGUuX2NvbnRhaW5lci5mb2N1cygpO1xuICAgICAgICAgIHBhc3RlLl9wYXN0ZV9ldmVudF9maXJlZCA9IGZhbHNlO1xuICAgICAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghcGFzdGUuX3Bhc3RlX2V2ZW50X2ZpcmVkKSB7XG4gICAgICAgICAgICAgICAgJCh0ZXh0YXJlYSkuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFzdGUuX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpLCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgICAgJCh0ZXh0YXJlYSkub24oJ3Bhc3RlJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHt9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgJCh0ZXh0YXJlYSkub24oJ2ZvY3VzJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIXBhc3RlLl90ZXh0YXJlYV9mb2N1c19zdG9sZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAkKHRleHRhcmVhKS5hZGRDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICAkKHRleHRhcmVhKS5vbignYmx1cicsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFwYXN0ZS5fdGV4dGFyZWFfZm9jdXNfc3RvbGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gJCh0ZXh0YXJlYSkucmVtb3ZlQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgJChwYXN0ZS5fdGFyZ2V0KS5vbignX3Bhc3RlQ2hlY2tDb250YWluZXJEb25lJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRleHRhcmVhKS5mb2N1cygpO1xuICAgICAgICAgIHJldHVybiBwYXN0ZS5fdGV4dGFyZWFfZm9jdXNfc3RvbGVuID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gJChwYXN0ZS5fdGFyZ2V0KS5vbigncGFzdGVUZXh0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldiwgZGF0YSkge1xuICAgICAgICAgIHZhciBjb250ZW50LCBjdXJFbmQsIGN1clN0YXJ0O1xuICAgICAgICAgIGN1clN0YXJ0ID0gJCh0ZXh0YXJlYSkucHJvcCgnc2VsZWN0aW9uU3RhcnQnKTtcbiAgICAgICAgICBjdXJFbmQgPSAkKHRleHRhcmVhKS5wcm9wKCdzZWxlY3Rpb25FbmQnKTtcbiAgICAgICAgICBjb250ZW50ID0gJCh0ZXh0YXJlYSkudmFsKCk7XG4gICAgICAgICAgJCh0ZXh0YXJlYSkudmFsKFwiXCIgKyBjb250ZW50LnNsaWNlKDAsIGN1clN0YXJ0KSArIGRhdGEudGV4dCArIGNvbnRlbnQuc2xpY2UoY3VyRW5kKSk7XG4gICAgICAgICAgJCh0ZXh0YXJlYSlbMF0uc2V0U2VsZWN0aW9uUmFuZ2UoY3VyU3RhcnQgKyBkYXRhLnRleHQubGVuZ3RoLCBjdXJTdGFydCArIGRhdGEudGV4dC5sZW5ndGgpO1xuICAgICAgICAgIHJldHVybiAkKHRleHRhcmVhKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgUGFzdGUubW91bnRDb250ZW50ZWRpdGFibGUgPSBmdW5jdGlvbihjb250ZW50ZWRpdGFibGUpIHtcbiAgICAgIHZhciBwYXN0ZTtcbiAgICAgIHBhc3RlID0gbmV3IFBhc3RlKGNvbnRlbnRlZGl0YWJsZSwgY29udGVudGVkaXRhYmxlKTtcbiAgICAgICQoY29udGVudGVkaXRhYmxlKS5vbignZm9jdXMnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkKGNvbnRlbnRlZGl0YWJsZSkuYWRkQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gJChjb250ZW50ZWRpdGFibGUpLm9uKCdibHVyJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJChjb250ZW50ZWRpdGFibGUpLnJlbW92ZUNsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBQYXN0ZShfY29udGFpbmVyLCBfdGFyZ2V0KSB7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBfY29udGFpbmVyO1xuICAgICAgdGhpcy5fdGFyZ2V0ID0gX3RhcmdldDtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9ICQodGhpcy5fY29udGFpbmVyKTtcbiAgICAgIHRoaXMuX3RhcmdldCA9ICQodGhpcy5fdGFyZ2V0KS5hZGRDbGFzcygncGFzdGFibGUnKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5vbigncGFzdGUnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgdmFyIGNsaXBib2FyZERhdGEsIGZpbGUsIGl0ZW0sIGosIGssIGxlbiwgbGVuMSwgcmVhZGVyLCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHRleHQ7XG4gICAgICAgICAgaWYgKGV2LmN1cnJlbnRUYXJnZXQgIT09IGV2LnRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzLl9wYXN0ZV9ldmVudF9maXJlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKCgocmVmID0gZXYub3JpZ2luYWxFdmVudCkgIT0gbnVsbCA/IHJlZi5jbGlwYm9hcmREYXRhIDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGlwYm9hcmREYXRhID0gZXYub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhO1xuICAgICAgICAgICAgaWYgKGNsaXBib2FyZERhdGEuaXRlbXMpIHtcbiAgICAgICAgICAgICAgcmVmMSA9IGNsaXBib2FyZERhdGEuaXRlbXM7XG4gICAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gcmVmMVtqXTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlLm1hdGNoKC9eaW1hZ2VcXC8vKSkge1xuICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2hhbmRsZUltYWdlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGl0ZW0uZ2V0QXNGaWxlKCkpO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9XG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0ZXh0L3BsYWluJykge1xuICAgICAgICAgICAgICAgICAgaXRlbS5nZXRBc1N0cmluZyhmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVUZXh0Jywge1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKC0xICE9PSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNsaXBib2FyZERhdGEudHlwZXMsICd0ZXh0L3BsYWluJykpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlVGV4dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX3RoaXMuX2NoZWNrSW1hZ2VzSW5Db250YWluZXIoZnVuY3Rpb24oc3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9oYW5kbGVJbWFnZShzcmMpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNsaXBib2FyZERhdGEgPSB3aW5kb3cuY2xpcGJvYXJkRGF0YSkge1xuICAgICAgICAgICAgaWYgKChyZWYyID0gKHRleHQgPSBjbGlwYm9hcmREYXRhLmdldERhdGEoJ1RleHQnKSkpICE9IG51bGwgPyByZWYyLmxlbmd0aCA6IHZvaWQgMCkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVUZXh0Jywge1xuICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ19wYXN0ZUNoZWNrQ29udGFpbmVyRG9uZScpO1xuICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlZjMgPSBjbGlwYm9hcmREYXRhLmZpbGVzO1xuICAgICAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVmMy5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgICAgICAgICBmaWxlID0gcmVmM1trXTtcbiAgICAgICAgICAgICAgICBfdGhpcy5faGFuZGxlSW1hZ2UoVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX3RoaXMuX2NoZWNrSW1hZ2VzSW5Db250YWluZXIoZnVuY3Rpb24oc3JjKSB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH1cblxuICAgIFBhc3RlLnByb3RvdHlwZS5faGFuZGxlSW1hZ2UgPSBmdW5jdGlvbihzcmMpIHtcbiAgICAgIHZhciBsb2FkZXI7XG4gICAgICBpZiAoc3JjLm1hdGNoKC9ed2Via2l0XFwtZmFrZVxcLXVybFxcOlxcL1xcLy8pKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZUVycm9yJywge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiWW91IGFyZSB0cnlpbmcgdG8gcGFzdGUgYW4gaW1hZ2UgaW4gU2FmYXJpLCBob3dldmVyIHdlIGFyZSB1bmFibGUgdG8gcmV0aWV2ZSBpdHMgZGF0YS5cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlU3RhcnQnKTtcbiAgICAgIGxvYWRlciA9IG5ldyBJbWFnZSgpO1xuICAgICAgbG9hZGVyLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgIGxvYWRlci5vbmxvYWQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBibG9iLCBjYW52YXMsIGN0eCwgZGF0YVVSTDtcbiAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICBjYW52YXMud2lkdGggPSBsb2FkZXIud2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IGxvYWRlci5oZWlnaHQ7XG4gICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgY3R4LmRyYXdJbWFnZShsb2FkZXIsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgZGF0YVVSTCA9IG51bGw7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgICAgICAgIGJsb2IgPSBkYXRhVVJMdG9CbG9iKGRhdGFVUkwpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAgICAgICAgIGlmIChkYXRhVVJMKSB7XG4gICAgICAgICAgICBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2UnLCB7XG4gICAgICAgICAgICAgIGJsb2I6IGJsb2IsXG4gICAgICAgICAgICAgIGRhdGFVUkw6IGRhdGFVUkwsXG4gICAgICAgICAgICAgIHdpZHRoOiBsb2FkZXIud2lkdGgsXG4gICAgICAgICAgICAgIGhlaWdodDogbG9hZGVyLmhlaWdodFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2VFbmQnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgbG9hZGVyLm9uZXJyb3IgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZUVycm9yJywge1xuICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IGltYWdlIGZyb206IFwiICsgc3JjLFxuICAgICAgICAgICAgdXJsOiBzcmNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlRW5kJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHJldHVybiBsb2FkZXIuc3JjID0gc3JjO1xuICAgIH07XG5cbiAgICBQYXN0ZS5wcm90b3R5cGUuX2NoZWNrSW1hZ2VzSW5Db250YWluZXIgPSBmdW5jdGlvbihjYikge1xuICAgICAgdmFyIGltZywgaiwgbGVuLCByZWYsIHRpbWVzcGFuO1xuICAgICAgdGltZXNwYW4gPSBNYXRoLmZsb29yKDEwMDAgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgIHJlZiA9IHRoaXMuX2NvbnRhaW5lci5maW5kKCdpbWcnKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBpbWcgPSByZWZbal07XG4gICAgICAgIGltZ1tcIl9wYXN0ZV9tYXJrZWRfXCIgKyB0aW1lc3Bhbl0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaywgbGVuMSwgcmVmMTtcbiAgICAgICAgICByZWYxID0gX3RoaXMuX2NvbnRhaW5lci5maW5kKCdpbWcnKTtcbiAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgICAgIGltZyA9IHJlZjFba107XG4gICAgICAgICAgICBpZiAoIWltZ1tcIl9wYXN0ZV9tYXJrZWRfXCIgKyB0aW1lc3Bhbl0pIHtcbiAgICAgICAgICAgICAgY2IoaW1nLnNyYyk7XG4gICAgICAgICAgICAgICQoaW1nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcignX3Bhc3RlQ2hlY2tDb250YWluZXJEb25lJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSwgMSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXN0ZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCAkLCBleHBvcnRzLCBvICkge1xuXG5cdHZhciBpc19jaHJvbWVcdD0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA+IC0xLFxuXHRcdGNvdW50ZXIgPSAwLFxuXHRcdHdvcmtmbG93O1xuXG5cdHRoZXBhc3RlID0gZXhwb3J0cy50aGVwYXN0ZSA9ICQuZXh0ZW5kKCB7XG5cdFx0c3VwcG9ydHMgOiB7XG5cdFx0XHRwYXN0ZTogKCAoJ3Bhc3RlJyBpbiBkb2N1bWVudCkgfHwgKCdvbnBhc3RlJyBpbiBkb2N1bWVudCkgfHwgdHlwZW9mKHdpbmRvdy5vbnBhc3RlKSA9PT0gJ29iamVjdCcgfHwgKCAnb25wYXN0ZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJykgKSApLCAvLyBicm93c2VyXG5cdFx0fSxcblx0XHR2aWV3Ont9LFxuXG5cdFx0dXBsb2FkSW1hZ2U6IGZ1bmN0aW9uKCBpbWFnZSwgZWRpdG9yLCB1cGxvYWRfcGxhY2Vob2xkZXIgKSB7XG5cblx0XHRcdHZhciBpZCA9ICdfX3RoZXBhc3RlX2JveF8nKyhjb3VudGVyKyspLFxuXHRcdFx0XHQkY29udGFpbmVyID0gJChpbWFnZSlcblx0XHRcdFx0XHQud3JhcCgnPGRpdiBpZD1cIicraWQrJ1wiIGRhdGEtcHJvZ3Jlc3M9XCIwXCIgY2xhc3M9XCJ0aGVwYXN0ZS1pbWFnZS1wbGFjZWhvbGRlclwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCI+PC9kaXY+Jylcblx0XHRcdFx0XHQucGFyZW50KCk7XG5cblx0XHRcdFx0Ly8gc2V0ICRjb250YWluZXIgc2l6ZSBvbmNlIGtub3duXG5cdFx0XHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoIGVkaXRvci4kKCcjJytpZCkgKS53aWR0aCggdGhpcy5uYXR1cmFsV2lkdGggKTtcblx0XHRcdFx0XHQkKCBlZGl0b3IuJCgnIycraWQpICkuaGVpZ2h0KCB0aGlzLm5hdHVyYWxIZWlnaHQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR2YXIgeGhyLFxuXHRcdFx0XHR3b3JrZmxvdyxcblx0XHRcdFx0c3JjID0gaW1hZ2Uuc3JjLFxuXHRcdFx0XHR1cGxvYWQgPSBmdW5jdGlvbiggZGF0YVVSTCApe1xuXHRcdFx0XHRcdHZhciB0eXBlID0gZGF0YVVSTC5tYXRjaCgvXmRhdGFcXDooW15cXDtdKylcXDsvKVsxXSxcblx0XHRcdFx0XHRcdGZpbGUgPSBuZXcgby5CbG9iKCBudWxsLCB7IGRhdGE6IGRhdGFVUkwgfSApLFxuXHRcdFx0XHRcdFx0c3VmZml4ID0gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLmNvbnZlcnRbIHR5cGUgXSxcblx0XHRcdFx0XHRcdHBvc3RuYW1lID0gJCgnI3Bvc3QgW25hbWU9XCJwb3N0X3RpdGxlXCJdI3RpdGxlJykudmFsKCk7XG5cdFx0XHRcdFx0aWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHN1ZmZpeCApIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUudHJhY2UoICdXb25cXCd0IHVwbG9hZCwgYmFkIG1pbWUgdHlwZTogJyArIHR5cGUgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgcG9zdG5hbWUgKSB7XG5cdFx0XHRcdFx0XHRwb3N0bmFtZSA9IHBvc3RuYW1lLnJlcGxhY2UoLyhbXFxeXFwhXFw/PD46XCInXFwvXFx8XFwqwqddKS9nLCcnKS5yZXBsYWNlKC8gKy9nLCcgJyk7XG5cdFx0XHRcdFx0XHRmaWxlLm5hbWUgPSB0aGVwYXN0ZS5sMTBuLnBhc3RlZF9pbnRvICsgJyAnICsgcG9zdG5hbWUgKyAnLicgKyBzdWZmaXg7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpbGUubmFtZSA9IHRoZXBhc3RlLmwxMG4ucGFzdGVkICsgJy4nICsgc3VmZml4O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlLnR5cGUgPSB0eXBlO1xuXG5cdFx0XHRcdFx0dmFyIGFkZEZpbGUgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYWRkRmlsZSggZmlsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoICEgd29ya2Zsb3cgKSB7XG5cdFx0XHRcdFx0XHR3b3JrZmxvdyA9IHdwLm1lZGlhLmVkaXRvci5vcGVuKCB3aW5kb3cud3BBY3RpdmVFZGl0b3IsIHtcblx0XHRcdFx0XHRcdFx0ZnJhbWU6XHRcdCdwb3N0Jyxcblx0XHRcdFx0XHRcdFx0c3RhdGU6XHRcdCdpbnNlcnQnLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTpcdFx0dGhlcGFzdGUubDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTpcdGZhbHNlXG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdHdvcmtmbG93LmNsb3NlKCk7XG5cblx0XHRcdFx0XHRcdGlmICggd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIgJiYgd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIucmVhZHkgKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHdvcmtmbG93Lm9uKCAndXBsb2FkZXI6cmVhZHknLCBhZGRGaWxlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHdvcmtmbG93LnN0YXRlKCkucmVzZXQoKTtcblx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnVXBsb2FkUHJvZ3Jlc3MnLGZ1bmN0aW9uKCBlICl7XG5cdFx0XHRcdFx0XHRlZGl0b3IuJCgnIycraWQpLmF0dHIoJ2RhdGEtcHJvZ3Jlc3MnLGUudG90YWwucGVyY2VudCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnRmlsZVVwbG9hZGVkJyxmdW5jdGlvbiggdXAsIGFyZ3MgKXtcblxuXHRcdFx0XHRcdFx0dmFyICRjb250YWluZXIgPSBlZGl0b3IuJCgnIycraWQpLFxuXHRcdFx0XHRcdFx0XHRpbWdIVE1MID0gJzxpbWcgY2xhc3M9XCJhbGlnbm5vbmUgd3AtaW1hZ2UtJythcmdzLmF0dGFjaG1lbnQuaWQrJyBzaXplLWZ1bGxcIiBzcmM9XCInK2FyZ3MuYXR0YWNobWVudC5jaGFuZ2VkLnVybCsnXCIgLz4nO1xuXG5cdFx0XHRcdFx0XHQvLyByZXBsYWNlIGltYWdlXG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLnJlcGxhY2VXaXRoKCBpbWdIVE1MICk7XG5cblx0XHRcdFx0XHRcdC8vIHJlcGxhY2Ugb3RoZXIgaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHRlZGl0b3IuJCgnaW1nW3NyYz1cIicrc3JjKydcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdCQodGhpcykucmVwbGFjZVdpdGgoIGltZ0hUTUwgKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHdvcmtmbG93LnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0Vycm9yJyxmdW5jdGlvbiggdXAsIGFyZ3MgKXtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHVwLGFyZ3MpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRpZiAoIHNyYy5zdWJzdHIoMCw1KSA9PT0gJ2Jsb2I6JyApIHtcblxuXHRcdFx0XHR4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFx0eGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcblx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIHJlYWRlcjtcblx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09IDQgKSB7XG5cdFx0XHRcdFx0XHRyZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0XHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR1cGxvYWQoIHJlYWRlci5yZXN1bHQgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKCBuZXcgQmxvYiggWyB4aHIucmVzcG9uc2UgXSwgeyB0eXBlOiAnaW1hZ2UvcG5nJyB9ICkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0eGhyLm9wZW4oICdHRVQnLCBzcmMgKTtcblx0XHRcdFx0eGhyLnNlbmQoIG51bGwgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggc3JjLnN1YnN0cigwLDUpID09PSAnZGF0YTonICkge1xuXHRcdFx0XHR1cGxvYWQoIHNyYyApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICRjb250YWluZXI7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqXHRAcmV0dXJuOiBudWxsfHRydWV8ZmFsc2Vcblx0XHQgKi9cblx0XHRjbGlwYm9hcmRIYXNJbWFnZTpmdW5jdGlvbiggY2xpcGJvYXJkRGF0YSApIHtcblx0XHRcdHZhciBoYXNJbWFnZSA9IGZhbHNlO1xuXHRcdFx0aWYgKCBjbGlwYm9hcmREYXRhLml0ZW1zICkge1xuXHRcdFx0XHQkLmVhY2goIGNsaXBib2FyZERhdGEuaXRlbXMsIGZ1bmN0aW9uKGksaXRlbSl7XG5cdFx0XHRcdFx0aWYgKCBpdGVtLnR5cGUgaW4gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLnBhc3RlICkge1xuXHRcdFx0XHRcdFx0aGFzSW1hZ2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gaGFzSW1hZ2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggY2xpcGJvYXJkRGF0YS50eXBlcyApIHtcblx0XHRcdFx0JC5lYWNoKCB0aGVwYXN0ZS5vcHRpb25zLm1pbWVfdHlwZXMucGFzdGUsIGZ1bmN0aW9uKHR5cGUsZXh0KXtcblx0XHRcdFx0XHRpZiAoIGNsaXBib2FyZERhdGEudHlwZXMuaW5kZXhPZih0eXBlKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0aGFzSW1hZ2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gaGFzSW1hZ2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblxuXHR9LCB0aGVwYXN0ZSApO1xuXG59KSggalF1ZXJ5LCB3cC5tZWRpYSwgbU94aWUgKTtcbiIsIihmdW5jdGlvbigkLGV4cG9ydHMpe1xuXG5cdHZhciBjb3VudGVyICAgICAgPSAwLFxuXHRcdGwxMG4gPSB3cC5tZWRpYS50aGVwYXN0ZS5sMTBuO1xuXG5cdCQuZXh0ZW5kKCB3cC5VcGxvYWRlci5wcm90b3R5cGUsIHtcblx0XHRzdWNjZXNzIDogZnVuY3Rpb24oIGZpbGVfYXR0YWNobWVudCApe1xuXHRcdH1cblx0fSk7XG5cblxuXHQvKipcblx0ICpcdEludGVncmF0ZSBpbnRvIG1lZGlhIGxpYnJhcnkgbW9kYWxcblx0ICovXG5cdC8vIGFkZCBzdGF0ZXMgdG8gYnJvd3NlIHJvdXRlclxuXHRfLmV4dGVuZCggd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUsIHtcblx0XHRfcGFyZW50SW5pdGlhbGl6ZTogd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuX3BhcmVudEluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0dGhpcy5iaW5kUGFzdGVIYW5kbGVycygpO1xuXHRcdH0sXG5cdFx0X3BhcmVudEJyb3dzZVJvdXRlcjogd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUuYnJvd3NlUm91dGVyLFxuXHRcdGJyb3dzZVJvdXRlciA6IGZ1bmN0aW9uKCB2aWV3ICkge1xuXHRcdFx0dGhpcy5fcGFyZW50QnJvd3NlUm91dGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0aWYgKCB3cC5tZWRpYS50aGVwYXN0ZS5zdXBwb3J0cy5wYXN0ZSApIHtcblx0XHRcdFx0dmlldy5zZXQoe3Bhc3RlYm9hcmQ6e1xuXHRcdFx0XHRcdHRleHQ6ICAgICBsMTBuLmNvcHlfcGFzdGUsXG5cdFx0XHRcdFx0cHJpb3JpdHk6IDM1XG5cdFx0XHRcdH19KTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmluZFBhc3RlSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHByZXZpb3VzQ29udGVudCA9IGZhbHNlO1xuXG5cdFx0XHQvLyBkaXNtaXNzIGNvbnRlbnQgb24gY2xvc2Vcblx0XHRcdHRoaXMub24oICdjb250ZW50OnJlbmRlciBjbG9zZScgLCBmdW5jdGlvbihjb250ZW50KXtcblx0XHRcdFx0aWYgKCBwcmV2aW91c0NvbnRlbnQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHByZXZpb3VzQ29udGVudC5kaXNtaXNzICkge1xuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudC5kaXNtaXNzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGNvbnRlbnQgKVxuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudCA9IGNvbnRlbnQ7XG5cdFx0XHR9ICwgdGhpcyApO1xuXG5cdFx0XHR0aGlzLm9uKCAnY29udGVudDpjcmVhdGU6cGFzdGVib2FyZCcsIHRoaXMuY29udGVudENyZWF0ZVBhc3RlYm9hcmQsIHRoaXMgKTtcblx0XHRcdHRoaXMub24oICdjb250ZW50OnJlbmRlcjpwYXN0ZWJvYXJkJywgdGhpcy5jb250ZW50UmVuZGVyR3JhYmJlciwgdGhpcyApO1xuXHRcdFx0dGhpcy5vbiggJ2NvbnRlbnQ6Y3JlYXRlOmRhdGFpbWFnZScsIHRoaXMuY29udGVudFJlbmRlckdyYWJiZXIsIHRoaXMgKTtcblxuXHRcdFx0ZnJhbWUgPSB0aGlzO1xuXHRcdH0sXG5cdFx0Ly8gYWRkIGhhbmRsZXJzXG5cdFx0Y29udGVudENyZWF0ZVBhc3RlYm9hcmQ6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdFx0dmFyIHN0YXRlID0gdGhpcy5zdGF0ZSgpO1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRQYXN0ZVZpZXcgPSBjb250ZW50LnZpZXcgPSBuZXcgd3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VHcmFiYmVyKCB7XG5cdFx0XHRcdGNvbnRyb2xsZXJcdDogdGhpcyxcblx0XHRcdFx0Z3JhYmJlclx0XHQ6IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLmN1cnJlbnRQYXN0ZVZpZXcudXBsb2FkZXIsICdhY3Rpb246dXBsb2FkZWQ6ZGF0YWltYWdlJywgdGhpcy51cGxvYWRlZERhdGFJbWFnZSApO1xuXHRcdH0sXG5cdFx0Y29udGVudFJlbmRlckdyYWJiZXI6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdFx0Y29udGVudC5zdGFydEdyYWJiaW5nKCk7XG5cdFx0fSxcblx0XHR1cGxvYWRlZERhdGFJbWFnZTogZnVuY3Rpb24oIGNvbnRlbnQgKSB7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcoIHRoaXMuY3VycmVudFBhc3RlVmlldy51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0XHR2YXIgb2JqID0geyB2aWV3OiBudWxsIH07XG5cdFx0XHR0aGlzLmJyb3dzZUNvbnRlbnQob2JqKTtcblx0XHRcdHRoaXMuY29udGVudC5zZXQoIG9iai52aWV3ICk7XG5cdFx0XHR0aGlzLnJvdXRlci5nZXQoKS5zZWxlY3QoJ2Jyb3dzZScpXG5cdFx0fSxcblx0XHRpbWFnZVBhc3RlZDpmdW5jdGlvbigpe1xuXHRcdFx0Ly8gZW5hYmxlIGluc2VydCBidG5cblx0XHRcdC8vIGNsZWFyIHNlbGVjdGlvblxuXHRcdFx0Y29uc29sZS5sb2codGhpcylcblxuXHRcdH1cblx0fSk7XG5cblxuXG5cdC8qKlxuXHQgKlx0QWRkIHBhc3RlIGJ1dHRvbiB0byB0b29sYmFyIG9uIHVwbG9hZC5waHBcblx0ICovXG5cdF8uZXh0ZW5kKCB3cC5tZWRpYS52aWV3LkF0dGFjaG1lbnRzQnJvd3Nlci5wcm90b3R5cGUsIHtcblx0XHRfcGFyZW50SW5pdGlhbGl6ZTpcdHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudHNCcm93c2VyLnByb3RvdHlwZS5pbml0aWFsaXplLFxuXHRcdGluaXRpYWxpemU6XHRmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0cGFzdGVCdG47XG5cblx0XHRcdHRoaXMuX3BhcmVudEluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlID0ge1xuXHRcdFx0XHRwYXN0ZVx0OiB7XG4vL1x0XHRcdFx0XHRidXR0b25cdDogZmFsc2UsXG5cdFx0XHRcdFx0Z3JhYmJlclx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RhbFx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RlXHQ6ICdwYXN0ZScsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGN1cnJlbnRcdFx0OiBmYWxzZVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgKCB0aGlzLmNvbnRyb2xsZXIgaW5zdGFuY2VvZiB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0ICkgKSB7XG5cblx0XHRcdFx0aWYgKCB3cC5tZWRpYS50aGVwYXN0ZS5zdXBwb3J0cy5wYXN0ZSApIHtcblxuXHRcdFx0XHRcdHBhc3RlQnRuID0gbmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKCB7XG5cdFx0XHRcdFx0XHR0ZXh0XHRcdDogbDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAgJ2dyYWJiZXItYnV0dG9uJyxcblx0XHRcdFx0XHRcdHByaW9yaXR5XHQ6IC02NCxcblx0XHRcdFx0XHRcdGNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi50aGVwYXN0ZS5hY3RpdmUgPSBzZWxmLnRoZXBhc3RlLnBhc3RlO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnRoZXBhc3RlT3BlbiggbDEwbi5jb3B5X3Bhc3RlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdHRoaXMudGhlcGFzdGUucGFzdGUuZ3JhYmJlciA9IG5ldyB3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIoIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJcdDogdGhpcy5jb250cm9sbGVyLFxuXHRcdFx0XHRcdFx0Z3JhYmJlclx0XHQ6IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZCxcblx0XHRcdFx0XHRcdHdwdXBsb2FkZXJcdDogdGhpcy5jb250cm9sbGVyLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0dGhpcy50b29sYmFyLnNldCggJ3Bhc3RlTW9kZUJ1dHRvbicsIHBhc3RlQnRuLnJlbmRlcigpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHRoZXBhc3RlVXBsb2FkZWQ6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci5kaXNtaXNzKCk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNsb3NlKCk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlQ2xvc2UoKTtcblx0XHR9LFxuXHRcdHRoZXBhc3RlRXJyb3I6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0Y29uc29sZS5sb2coICdlcnJvcicsIGUgKTtcblx0XHR9LFxuXHRcdHRoZXBhc3RlT3BlbjogZnVuY3Rpb24oIHRpdGxlICkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsICA9ICBuZXcgd3AubWVkaWEudmlldy5Nb2RhbCgge1xuXHRcdFx0XHRjb250cm9sbGVyIDogdGhpcyxcblx0XHRcdFx0dGl0bGUgICAgICA6IHRpdGxlXG5cdFx0XHR9ICk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNvbnRlbnQoIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIgKTtcblx0XHRcdHRoaXMudGhlcGFzdGUubW9kYWwub3BlbigpO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLm9uKCAnY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50aGVwYXN0ZUNsb3NlLmFwcGx5KHNlbGYpO1xuXHRcdFx0XHRzZWxmLnRoZXBhc3RlLmFjdGl2ZS5ncmFiYmVyLnN0b3BHcmFiYmluZygpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIuc3RhcnRHcmFiYmluZygpO1xuXG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLnRoZXBhc3RlLmFjdGl2ZS5ncmFiYmVyLnVwbG9hZGVyLCAnYWN0aW9uOnVwbG9hZGVkOmRhdGFpbWFnZScsIHRoaXMudGhlcGFzdGVVcGxvYWRlZCApO1xuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci51cGxvYWRlciwgJ2Vycm9yOnVwbG9hZGVkOmRhdGFpbWFnZScsIHRoaXMudGhlcGFzdGVFcnJvciApO1xuXHRcdH0sXG5cdFx0dGhlcGFzdGVDbG9zZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHRoaXMuY29udHJvbGxlci5kZWFjdGl2YXRlTW9kZSggdGhpcy50aGVwYXN0ZS5hY3RpdmUubW9kZSApLmFjdGl2YXRlTW9kZSggJ2VkaXQnICk7XG5cblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZyggdGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcoIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIudXBsb2FkZXIsICdlcnJvcjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0fVxuXHR9KTtcblxufSkoalF1ZXJ5LHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24oJCx3aW5kb3csbyl7XG5cdHZhciB0aGVwYXN0ZSA9IHdwLm1lZGlhLnRoZXBhc3RlLFxuXHRcdEJ1dHRvbiA9IHdwLm1lZGlhLnZpZXcuQnV0dG9uLFxuXHRcdE1vZGFsICA9IHdwLm1lZGlhLnZpZXcuTW9kYWwsXG5cdFx0bDEwbiAgID0gdGhlcGFzdGUubDEwbjtcblxuXG5cdHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuRGF0YVNvdXJjZUltYWdlVXBsb2FkZXIgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG5cdFx0dGVtcGxhdGU6IHdwLnRlbXBsYXRlKCd0aGVwYXN0ZS11cGxvYWRlcicpLFxuXHRcdGNsYXNzTmFtZTogJ3RoZXBhc3RlLXVwbG9hZGVyJyxcblx0XHRjb250cm9sbGVyOm51bGwsXG5cdFx0aW1hZ2UgOiBudWxsLFxuXHRcdCRkaXNjYXJkQnRuIDogbnVsbCxcblx0XHQkdXBsb2FkQnRuIDogbnVsbCxcblxuXHRcdHVwbG9hZGVyIDogbnVsbCxcblxuXHRcdGV2ZW50cyA6IHtcblx0XHRcdCdjbGljayBbZGF0YS1hY3Rpb249XCJ1cGxvYWRcIl0nXHQ6ICd1cGxvYWRJbWFnZScsXG5cdFx0XHQnY2xpY2sgW2RhdGEtYWN0aW9uPVwiZGlzY2FyZFwiXSdcdDogJ2Rpc2NhcmRJbWFnZScsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplIDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHdwLm1lZGlhLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHRfLmRlZmF1bHRzKCB0aGlzLm9wdGlvbnMsIHtcblx0XHRcdFx0ZGVmYXVsdEZpbGVOYW1lIDogbDEwbi5pbWFnZVxuXHRcdFx0fSk7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdGluc3RyID0gbmV3IHdwLm1lZGlhLlZpZXcoe1xuXHRcdFx0XHR0YWdOYW1lICAgIDogJ2RpdicsXG5cdFx0XHRcdGNsYXNzTmFtZSAgOiAnaW5zdHJ1bWVudHMnLFxuXHRcdFx0XHRjb250cm9sbGVyIDogdGhpcy5jb250cm9sbGVyXG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy51cGxvYWRlciA9IHRoaXMub3B0aW9ucy51cGxvZGVyO1xuXHRcdH0sXG5cdFx0c2V0SW1hZ2VEYXRhIDogZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHR2YXIgY29udGFpbmVyID0gdGhpcy4kaW1hZ2VDb250YWluZXIuaHRtbCgnJykuZ2V0KDApLFxuXHRcdFx0XHRzZWxmID0gdGhpcyxcblx0XHRcdFx0Zm9ybWF0ID0gZGF0YS5tYXRjaCgvZGF0YTooaW1hZ2VcXC8oXFx3KykpOy8pWzFdO1xuXG5cdFx0XHRpZiAoICEgdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLmNvbnZlcnRbZm9ybWF0XSApIHtcblx0XHRcdFx0Zm9ybWF0ID0gdGhpcy5vcHRpb25zLmRlZmF1bHRGaWxlRm9ybWF0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHRoaXMuaW1hZ2UgKSB7XG5cdFx0XHRcdHRoaXMuaW1hZ2UuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmltYWdlID0gbmV3IG8uSW1hZ2UoKTtcblx0XHRcdHRoaXMuaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBvcHRzID0gc2VsZi5nZXRVcGxvYWRlcigpLmdldE9wdGlvbigncmVzaXplJyksXG5cdFx0XHRcdFx0c2NhbGUgPSBNYXRoLm1heCggb3B0cy53aWR0aCAvIHRoaXMud2lkdGgsIG9wdHMuaGVpZ2h0IC8gdGhpcy5oZWlnaHQgKTtcblxuXHRcdFx0XHQhIW9wdHMgJiYgKHNjYWxlIDwgMSkgJiYgdGhpcy5kb3duc2l6ZSggdGhpcy53aWR0aCpzY2FsZSwgdGhpcy5oZWlnaHQqc2NhbGUgKTtcblxuXHRcdFx0XHR0aGlzLmVtYmVkKCBjb250YWluZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5pbWFnZS5sb2FkKCBkYXRhICk7XG5cdFx0XHRpZiAoIHRoaXMuJGltYWdlQ29udGFpbmVyICkge1xuXHRcdFx0XHR0aGlzLiRpbWFnZUNvbnRhaW5lci5hcHBlbmQodGhpcy5pbWFnZSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLiQoJ1tkYXRhLXNldHRpbmc9XCJmb3JtYXRcIl0gaW5wdXRbdmFsdWU9XCInK2Zvcm1hdCsnXCJdJykucHJvcCggJ2NoZWNrZWQnLCB0cnVlICk7XG5cblxuXHRcdFx0dGhpcy5kaXNhYmxlZChmYWxzZSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHJlbmRlciA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdHRoaXMuJGltYWdlQ29udGFpbmVyID0gdGhpcy4kKCcuaW1hZ2UtY29udGFpbmVyJyk7XG5cdFx0XHR0aGlzLiRkaXNjYXJkQnRuID0gdGhpcy4kKCdbZGF0YS1hY3Rpb249XCJkaXNjYXJkXCJdJyk7XG5cdFx0XHR0aGlzLiR1cGxvYWRCdG4gPSB0aGlzLiQoJ1tkYXRhLWFjdGlvbj1cInVwbG9hZFwiXScpO1xuXHRcdFx0dGhpcy4kKCdbZGF0YS1zZXR0aW5nPVwidGl0bGVcIl0nKS52YWwoIHRoaXMub3B0aW9ucy5kZWZhdWx0RmlsZU5hbWUgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0ZGlzY2FyZEltYWdlIDogZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMudHJpZ2dlciggJ2FjdGlvbjpkaXNjYXJkOmRhdGFpbWFnZScgLCB0aGlzICk7XG5cdFx0XHR0aGlzLnVuYmluZFVwbG9hZGVyRXZlbnRzKCk7XG5cdFx0fSxcblx0XHR1cGxvYWRJbWFnZSA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgdHlwZSA9IHRoaXMuJCgnW2RhdGEtc2V0dGluZz1cImZvcm1hdFwiXSA6Y2hlY2tlZCcpLnZhbCgpLFxuXHRcdFx0XHRzdWZmaXggPSB0aGVwYXN0ZS5vcHRpb25zLm1pbWVfdHlwZXMuY29udmVydFsgdHlwZSBdLFxuXHRcdFx0XHRuYW1lID0gdGhpcy4kKCdpbnB1dFtkYXRhLXNldHRpbmc9XCJ0aXRsZVwiXScpLnZhbCgpICsgJy4nICsgc3VmZml4LFxuXHRcdFx0XHRibG9iID0gdGhpcy5pbWFnZS5nZXRBc0Jsb2IoIHR5cGUsIHRoZXBhc3RlLm9wdGlvbnMuanBlZ19xdWFsaXR5ICk7XG5cblx0XHRcdHRoaXMuYmluZFVwbG9hZGVyRXZlbnRzKCk7XG5cblx0XHRcdGJsb2IuZGV0YWNoKCBibG9iLmdldFNvdXJjZSgpICk7XG5cdFx0XHRibG9iLm5hbWUgPSBuYW1lO1xuXHRcdFx0YmxvYi50eXBlID0gdHlwZTtcblx0XHRcdHRoaXMuZ2V0VXBsb2FkZXIoKS5hZGRGaWxlKCBibG9iICwgbmFtZSApO1xuXG5cdFx0XHR0aGlzLmRpc2FibGVkKCB0cnVlICk7XG5cblx0XHRcdHRoaXMudHJpZ2dlciggJ2FjdGlvbjp1cGxvYWQ6ZGF0YWltYWdlJyAsIHRoaXMgKTtcblx0XHR9LFxuXHRcdHNob3c6ZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMuJGVsLnNob3coKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0aGlkZTpmdW5jdGlvbigpe1xuXHRcdFx0dGhpcy4kZWwuaGlkZSgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRkaXNhYmxlZCA6IGZ1bmN0aW9uKCBkaXNhYmxlZCApIHtcblx0XHRcdHRoaXMuJGRpc2NhcmRCdG4ucHJvcCggJ2Rpc2FibGVkJywgZGlzYWJsZWQgKTtcblx0XHRcdHRoaXMuJHVwbG9hZEJ0bi5wcm9wKCAnZGlzYWJsZWQnLCBkaXNhYmxlZCApO1xuXHRcdH0sXG5cdFx0X3VwbG9hZFN1Y2Nlc3NIYW5kbGVyIDogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY3Rpb246dXBsb2FkZWQ6ZGF0YWltYWdlJyApO1xuXHRcdFx0dGhpcy5kaXNhYmxlZChmYWxzZSk7XG5cdFx0XHR0aGlzLnVuYmluZFVwbG9hZGVyRXZlbnRzKCk7XG5cdFx0fSxcblx0XHRfdXBsb2FkRXJyb3JIYW5kbGVyIDogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoICdlcnJvcjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0XHR0aGlzLmRpc2FibGVkKGZhbHNlKTtcblx0XHRcdHRoaXMudW5iaW5kVXBsb2FkZXJFdmVudHMoKTtcblx0XHR9LFxuXHRcdGJpbmRVcGxvYWRlckV2ZW50cyA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5nZXRVcGxvYWRlcigpLmJpbmQoICdGaWxlVXBsb2FkZWQnLFx0dGhpcy5fdXBsb2FkU3VjY2Vzc0hhbmRsZXIsXHR0aGlzICk7XG5cdFx0XHR0aGlzLmdldFVwbG9hZGVyKCkuYmluZCggJ0Vycm9yJyxcdFx0XHR0aGlzLl91cGxvYWRFcnJvckhhbmRsZXIsXHR0aGlzICk7XG5cdFx0fSxcblx0XHR1bmJpbmRVcGxvYWRlckV2ZW50cyA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5nZXRVcGxvYWRlcigpLnVuYmluZCggJ0ZpbGVVcGxvYWRlZCcsXHR0aGlzLl91cGxvYWRTdWNjZXNzSGFuZGxlcixcdHRoaXMgKTtcblx0XHRcdHRoaXMuZ2V0VXBsb2FkZXIoKS51bmJpbmQoICdFcnJvcicsXHRcdFx0dGhpcy5fdXBsb2FkRXJyb3JIYW5kbGVyLFx0dGhpcyApO1xuXHRcdH0sXG5cdFx0Z2V0VXBsb2FkZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY29udHJvbGxlci51cGxvYWRlci51cGxvYWRlci51cGxvYWRlcjtcblx0XHR9XG5cdH0pO1xuXG5cblx0d3AubWVkaWEudGhlcGFzdGUudmlldy5QYXN0ZWJvYXJkID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdHRlbXBsYXRlOiB3cC50ZW1wbGF0ZSgndGhlcGFzdGUtcGFzdGVib2FyZCcpLFxuXHRcdGNsYXNzTmFtZTogJ3RoZXBhc3RlLXBhc3RlYm9hcmQnLFxuXHRcdGNvbnRyb2xsZXI6bnVsbCxcblx0XHRhY3Rpb246J3Bhc3RlJyxcblx0XHQkcGFzdGVib2FyZCA6IG51bGwsXG5cblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdHRoaXMuJHBhc3RlYm9hcmQgPSB0aGlzLiQoICcuaW5qZWN0b3InICkucGFzdGFibGVDb250ZW50ZWRpdGFibGUoKTtcblx0XHRcdHRoaXMuJG1lc3NhZ2UgPSB0aGlzLiQoICcubWVzc2FnZScgKTtcblx0XHRcdHRoaXMuJHBhc3RlYm9hcmQub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0c2VsZi5zaG93X21lc3NhZ2UoJycpO1xuXHRcdFx0fSApO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzdGFydCA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRjbGlwYm9hcmRIYXNJbWFnZTtcblxuXHRcdFx0dGhpcy5pbWFnZVBhc3RlZCA9IGZhbHNlO1xuXG5cdFx0XHR0aGlzLiRwYXN0ZWJvYXJkXG5cdFx0XHRcdC5vbigncGFzdGUnLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdGNsaXBib2FyZEhhc0ltYWdlID0gd3AubWVkaWEudGhlcGFzdGUuY2xpcGJvYXJkSGFzSW1hZ2UoZS5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGEpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQub24oJ3Bhc3RlVGV4dCcgLCBmdW5jdGlvbiggZSwgZGF0YSApIHtcblxuXHRcdFx0XHRcdGlmICggY2xpcGJvYXJkSGFzSW1hZ2UgfHwgc2VsZi5pbWFnZVBhc3RlZCApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2VsZi5zaG93X21lc3NhZ2UoIGwxMG4ucGFzdGVfZXJyb3Jfbm9faW1hZ2UgKTtcblx0XHRcdFx0XHQkKCB0aGlzICkuaHRtbCgnJyk7XG5cdFx0XHRcdH0gKVxuXHRcdFx0XHQub24oJ3Bhc3RlSW1hZ2UnICwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBzZWxmLmltYWdlUGFzdGVkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZWxmLnRyaWdnZXIoICdhY3Rpb246Y3JlYXRlOmRhdGFpbWFnZScsIHRoaXMgLCBkYXRhLmRhdGFVUkwgKTtcblx0XHRcdFx0XHRzZWxmLmltYWdlUGFzdGVkID0gdHJ1ZTtcblx0XHRcdFx0fSApXG5cdFx0XHRcdC5vbigncGFzdGVJbWFnZUVycm9yJyAsIGZ1bmN0aW9uKCBlLCBkYXRhICkge1xuXHRcdFx0XHRcdHNlbGYuc2hvd19tZXNzYWdlKCBsMTBuLnBhc3RlX2Vycm9yICk7XG5cdFx0XHRcdFx0JCggdGhpcyApLmh0bWwoJycpO1xuXHRcdFx0XHR9IClcblx0XHRcdFx0O1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGYuJHBhc3RlYm9hcmQuZ2V0KDApLmZvY3VzKCk7XG5cdFx0XHR9LDEpO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHN0b3AgOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJHBhc3RlYm9hcmRcblx0XHRcdFx0Lm9mZigncGFzdGVJbWFnZScpXG5cdFx0XHRcdC5vZmYoJ3Bhc3RlSW1hZ2VFcnJvcicpXG5cdFx0XHRcdC5vZmYoJ3Bhc3RlVGV4dCcpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzaG93OmZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy4kZWwuc2hvdygpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRoaWRlOmZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy4kZWwuaGlkZSgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzaG93X21lc3NhZ2U6ZnVuY3Rpb24oIG1zZyApIHtcblx0XHRcdHRoaXMuJG1lc3NhZ2UudGV4dCggbXNnICk7XG5cdFx0fVxuXHR9KTtcblxuXHR3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG4vL1x0XHR0YWdOYW1lOiAgICdkaXYnLFxuXHRcdHRlbXBsYXRlOiB3cC50ZW1wbGF0ZSgndGhlcGFzdGUtZ3JhYmJlcicpLFxuXHRcdGNsYXNzTmFtZSA6ICd0aGVwYXN0ZS1ncmFiYmVyJyxcblxuXHRcdGdyYWJiZXIgOiBudWxsLFxuXHRcdHVwbG9hZGVyIDogbnVsbCxcblxuXHRcdGluaXRpYWxpemUgOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciByZXQgPSB3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Xy5kZWZhdWx0cyggdGhpcy5vcHRpb25zLCB7XG5cdFx0XHRcdHdwdXBsb2FkZXJcdFx0OiBudWxsLFxuXHRcdFx0XHRkZWZhdWx0RmlsZU5hbWVcdDogbDEwbi5wYXN0ZWQsXG5cdFx0XHRcdGRlZmF1bHRGaWxlRm9ybWF0IDogJ2ltYWdlL3BuZycsXG5cdFx0XHRcdHRpdGxlXHRcdFx0OiBsMTBuLmNvcHlfcGFzdGVcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmdyYWJiZXIgID0gbmV3IHRoaXMub3B0aW9ucy5ncmFiYmVyKCB7IGNvbnRyb2xsZXJcdDogdGhpcy5jb250cm9sbGVyIH0gKTtcblxuXHRcdFx0dGhpcy51cGxvYWRlciA9IG5ldyB3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZVVwbG9hZGVyKCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyXHRcdFx0OiB0aGlzLmNvbnRyb2xsZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGxvZGVyXHRcdFx0XHQ6IHRoaXMub3B0aW9ucy53cHVwbG9hZGVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdEZpbGVOYW1lXHRcdDogdGhpcy5vcHRpb25zLmRlZmF1bHRGaWxlTmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdGRlZmF1bHRGaWxlRm9ybWF0XHQ6IHRoaXMub3B0aW9ucy5kZWZhdWx0RmlsZUZvcm1hdFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0dGhpcy5yZW5kZXIoKTtcblxuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy5ncmFiYmVyLCAnYWN0aW9uOmNyZWF0ZTpkYXRhaW1hZ2UnLFx0dGhpcy5pbWFnZUNyZWF0ZWQgKTtcblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMudXBsb2FkZXIsICdhY3Rpb246ZGlzY2FyZDpkYXRhaW1hZ2UnLFx0dGhpcy5zdGFydEdyYWJiaW5nICk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKXtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0dGhpcy4kKCcuY29udGVudCcpXG5cdFx0XHRcdC5hcHBlbmQoIHRoaXMuZ3JhYmJlci5yZW5kZXIoKS4kZWwgKVxuXHRcdFx0XHQuYXBwZW5kKCB0aGlzLnVwbG9hZGVyLnJlbmRlcigpLiRlbCApO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGltYWdlQ3JlYXRlZCA6IGZ1bmN0aW9uKCBncmFiYmVyICwgaW1hZ2VEYXRhICkge1xuXHRcdFx0dGhpcy5ncmFiYmVyLnN0b3AoKS5oaWRlKCk7XG5cdFx0XHR0aGlzLnVwbG9hZGVyLnNob3coKS5zZXRJbWFnZURhdGEoIGltYWdlRGF0YSApO1xuXHRcdH0sXG5cdFx0c3RhcnRHcmFiYmluZzpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMudXBsb2FkZXIuaGlkZSgpO1xuXHRcdFx0dGhpcy5ncmFiYmVyLnNob3coKS5zdGFydCgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzdG9wR3JhYmJpbmc6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmdyYWJiZXIuc3RvcCgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRnZXRBY3Rpb24gOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmdyYWJiZXIuYWN0aW9uO1xuXHRcdH0sXG5cdFx0ZGlzbWlzczpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZ3JhYmJlci5zdG9wKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH0pO1xuXG59KShqUXVlcnksd2luZG93LG1PeGllKTtcbiJdfQ==
