var the_pastePluginCallback;!function(t){the_pastePluginCallback=function(e){function o(t){var e=t.src.substring(0,5);return"blob:"===e||"data:"===e}var a,n,i=wp.media.thepaste;i.options.editor.auto_upload="false"!==localStorage.getItem("thepaste.auto_upload"),e.addCommand("cmd_thepaste",function(){i.options.editor.auto_upload=!i.options.editor.auto_upload,localStorage.setItem("thepaste.auto_upload",i.options.editor.auto_upload.toString()),a.active(i.options.editor.auto_upload)}),e.addButton("thepaste",{icon:"thepaste",tooltip:i.l10n.upload_pasted_images,cmd:"cmd_thepaste",onPostRender:function(){a=this},active:i.options.editor.auto_upload}),e.addButton("wp_img_thepaste_upload",{icon:"dashicon dashicons dashicons-upload thepaste-upload",tooltip:i.l10n.upload_image,onclick:function(){var t;t=e.selection.getNode(),i.uploadImage(t,e)}}),e.once("preinit",function(){e.wp&&e.wp._createToolbar&&(n=e.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wp_img_thepaste_upload","wp_img_edit","wp_img_remove"]))}),e.on("wptoolbar",function(t){var a;"IMG"!==t.element.nodeName||e.wp.isPlaceholder(t.element)||(t.toolbar=n,a=n.$el.find(".thepaste-upload").closest(".mce-btn"),o(t.element)?a.show():a.hide())}),e.on("BeforePastePreProcess",function(t){return t.content.match(/&lt;svg[\s\S.]*&lt;\/svg&gt;/i)&&(t.preventDefault(),t.content=""),t}).on("PastePostProcess",function(a){var n,p;i.options.editor.auto_upload&&(n=t(a.node).children().first(),n.is("img")&&o(n.get(0))&&(p=i.uploadImage(n.get(0),e),n.remove(),t(a.node).append(p)))})},tinymce.PluginManager.add("the_paste",the_pastePluginCallback)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoZS1wYXN0ZS1wbHVnaW4uanMiXSwibmFtZXMiOlsidGhlX3Bhc3RlUGx1Z2luQ2FsbGJhY2siLCIkIiwiZWRpdG9yIiwiY2FuVXBsb2FkIiwiaW1nIiwic3ViIiwic3JjIiwic3Vic3RyaW5nIiwicGFzdGVCdG4iLCJ0b29sYmFyIiwidGhlcGFzdGUiLCJ3cCIsIm1lZGlhIiwib3B0aW9ucyIsImF1dG9fdXBsb2FkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFkZENvbW1hbmQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJhY3RpdmUiLCJhZGRCdXR0b24iLCJpY29uIiwidG9vbHRpcCIsImwxMG4iLCJ1cGxvYWRfcGFzdGVkX2ltYWdlcyIsImNtZCIsIm9uUG9zdFJlbmRlciIsInRoaXMiLCJ1cGxvYWRfaW1hZ2UiLCJvbmNsaWNrIiwiaW1hZ2UiLCJzZWxlY3Rpb24iLCJnZXROb2RlIiwidXBsb2FkSW1hZ2UiLCJvbmNlIiwiX2NyZWF0ZVRvb2xiYXIiLCJvbiIsImV2ZW50IiwidXBsb2FkQnRuIiwiZWxlbWVudCIsIm5vZGVOYW1lIiwiaXNQbGFjZWhvbGRlciIsIiRlbCIsImZpbmQiLCJjbG9zZXN0Iiwic2hvdyIsImhpZGUiLCJlIiwiY29udGVudCIsIm1hdGNoIiwicHJldmVudERlZmF1bHQiLCIkZmlyc3RDaGlsZCIsIiR1cGxvYWRCb3giLCJub2RlIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzIiwiZ2V0IiwicmVtb3ZlIiwiYXBwZW5kIiwidGlueW1jZSIsIlBsdWdpbk1hbmFnZXIiLCJhZGQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLDBCQUVKLFNBQVVDLEdBQ1RELHdCQUEwQixTQUFVRSxHQThFbkMsUUFBU0MsR0FBV0MsR0FDbkIsR0FBSUMsR0FBTUQsRUFBSUUsSUFBSUMsVUFBVSxFQUFFLEVBQzlCLE9BQWUsVUFBUkYsR0FBMkIsVUFBUkEsRUEvRTNCLEdBQUlHLEdBTUhDLEVBREFDLEVBQVdDLEdBQUdDLE1BQU1GLFFBTXJCQSxHQUFTRyxRQUFRWCxPQUFPWSxZQUFpRSxVQUFuREMsYUFBYUMsUUFBUyx3QkFHNURkLEVBQU9lLFdBQVksZUFBZ0IsV0FDbENQLEVBQVNHLFFBQVFYLE9BQU9ZLGFBQWdCSixFQUFTRyxRQUFRWCxPQUFPWSxZQUNoRUMsYUFBYUcsUUFBUyx1QkFBd0JSLEVBQVNHLFFBQVFYLE9BQU9ZLFlBQVlLLFlBQ2xGWCxFQUFTWSxPQUFRVixFQUFTRyxRQUFRWCxPQUFPWSxlQUsxQ1osRUFBT21CLFVBQVUsWUFDaEJDLEtBQU0sV0FDTkMsUUFBU2IsRUFBU2MsS0FBS0MscUJBQ3ZCQyxJQUFNLGVBQ05DLGFBQWMsV0FDYm5CLEVBQVdvQixNQUVaUixPQUFPVixFQUFTRyxRQUFRWCxPQUFPWSxjQUloQ1osRUFBT21CLFVBQVUsMEJBQ2hCQyxLQUFNLHNEQUNOQyxRQUFTYixFQUFTYyxLQUFLSyxhQUN2QkMsUUFBUyxXQUVSLEdBQUlDLEVBQ0pBLEdBQVE3QixFQUFPOEIsVUFBVUMsVUFFekJ2QixFQUFTd0IsWUFBYUgsRUFBTzdCLE1BSy9CQSxFQUFPaUMsS0FBTSxVQUFXLFdBQ2xCakMsRUFBT1MsSUFBTVQsRUFBT1MsR0FBR3lCLGlCQUMzQjNCLEVBQVVQLEVBQU9TLEdBQUd5QixnQkFDbkIsbUJBQ0EscUJBQ0Esb0JBQ0EsbUJBQ0EseUJBQ0EsY0FDQSxxQkFNSGxDLEVBQU9tQyxHQUFJLFlBQWEsU0FBVUMsR0FDakMsR0FBSUMsRUFDNEIsU0FBM0JELEVBQU1FLFFBQVFDLFVBQXdCdkMsRUFBT1MsR0FBRytCLGNBQWVKLEVBQU1FLFdBQ3pFRixFQUFNN0IsUUFBVUEsRUFFaEI4QixFQUFZOUIsRUFBUWtDLElBQUlDLEtBQUssb0JBQW9CQyxRQUFRLFlBRXBEMUMsRUFBV21DLEVBQU1FLFNBQ3JCRCxFQUFVTyxPQUVWUCxFQUFVUSxVQVliN0MsRUFDRW1DLEdBQUksd0JBQXlCLFNBQVNXLEdBTXRDLE1BSk1BLEdBQUVDLFFBQVFDLE1BQU8sbUNBQ3RCRixFQUFFRyxpQkFDRkgsRUFBRUMsUUFBVSxJQUVORCxJQUdQWCxHQUFJLG1CQUFvQixTQUFTVyxHQUVqQyxHQUFJSSxHQUFhQyxDQUVaM0MsR0FBU0csUUFBUVgsT0FBT1ksY0FDNUJzQyxFQUFjbkQsRUFBRStDLEVBQUVNLE1BQU1DLFdBQVdDLFFBQzlCSixFQUFZSyxHQUFHLFFBQVV0RCxFQUFXaUQsRUFBWU0sSUFBSSxNQUN4REwsRUFBYTNDLEVBQVN3QixZQUFha0IsRUFBWU0sSUFBSSxHQUFJeEQsR0FDdkRrRCxFQUFZTyxTQUNaMUQsRUFBRStDLEVBQUVNLE1BQU1NLE9BQVFQLFFBUXZCUSxRQUFRQyxjQUFjQyxJQUFLLFlBQWEvRCwwQkFFckNnRSIsImZpbGUiOiJ0aGUtcGFzdGUtcGx1Z2luLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0aGVfcGFzdGVQbHVnaW5DYWxsYmFjaztcblxuKGZ1bmN0aW9uKCQpe1xuXHR0aGVfcGFzdGVQbHVnaW5DYWxsYmFjayA9IGZ1bmN0aW9uKCBlZGl0b3IgKSB7XG5cdFx0dmFyIHBhc3RlQnRuLFxuXHRcdFx0b3JpZ0RvbUFkZCxcblx0XHRcdGNsaXBib2FyZEhhc0ltYWdlID0gZmFsc2UsXG5cdFx0XHRjdXJyZW50Q2xpcGJvYXJkRXZlbnQgPSBudWxsLFxuXHRcdFx0cHJldmVudEltYWdlUGFzdGUgPSBmYWxzZSxcblx0XHRcdHRoZXBhc3RlID0gd3AubWVkaWEudGhlcGFzdGUsXG5cdFx0XHR0b29sYmFyLFxuXHRcdFx0cGFzdGVkX2ltYWdlX3RtcF9wcmVmaXggPSAnX19wYXN0ZWRfaW1hZ2VfdG1wXycsXG5cdFx0XHRwYXN0ZWRfaW1hZ2VfdG1wX2NsYXNzID0gJyc7XG5cblx0XHQvLyBkZWZhdWx0IG9uXG5cdFx0dGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSggJ3RoZXBhc3RlLmF1dG9fdXBsb2FkJyApICE9PSAnZmFsc2UnO1xuXG5cdFx0Ly8gZW5hYmxlIC8gZGlzYWJsZSBhdXRvdXBsb2FkXG5cdFx0ZWRpdG9yLmFkZENvbW1hbmQoICdjbWRfdGhlcGFzdGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkID0gISB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZDtcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCAndGhlcGFzdGUuYXV0b191cGxvYWQnLCB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZC50b1N0cmluZygpICk7XG5cdFx0XHRwYXN0ZUJ0bi5hY3RpdmUoIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkICk7XG5cblx0XHR9KTtcblxuXHRcdC8vIGVuYWJsZSAvIGRpc2FibGUgYXV0b3VwbG9hZCBidXR0b25cblx0XHRlZGl0b3IuYWRkQnV0dG9uKCd0aGVwYXN0ZScsIHtcblx0XHRcdGljb246ICd0aGVwYXN0ZScsXG5cdFx0XHR0b29sdGlwOiB0aGVwYXN0ZS5sMTBuLnVwbG9hZF9wYXN0ZWRfaW1hZ2VzLFxuXHRcdFx0Y21kIDogJ2NtZF90aGVwYXN0ZScsXG5cdFx0XHRvblBvc3RSZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRwYXN0ZUJ0biA9IHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0YWN0aXZlOnRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkXG5cdFx0fSk7XG5cblx0XHQvLyB1cGxvYWQgYnV0dG9uIGluIG1lZGlhIHRvb2xiYXIgZmx5b3V0XG5cdFx0ZWRpdG9yLmFkZEJ1dHRvbignd3BfaW1nX3RoZXBhc3RlX3VwbG9hZCcsIHtcblx0XHRcdGljb246ICdkYXNoaWNvbiBkYXNoaWNvbnMgZGFzaGljb25zLXVwbG9hZCB0aGVwYXN0ZS11cGxvYWQnLFxuXHRcdFx0dG9vbHRpcDogdGhlcGFzdGUubDEwbi51cGxvYWRfaW1hZ2UsXG5cdFx0XHRvbmNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gd3JhcCBpbWcsIHVwbG9hZFxuXHRcdFx0XHR2YXIgaW1hZ2U7XG5cdFx0XHRcdGltYWdlID0gZWRpdG9yLnNlbGVjdGlvbi5nZXROb2RlKCk7XG5cblx0XHRcdFx0dGhlcGFzdGUudXBsb2FkSW1hZ2UoIGltYWdlLCBlZGl0b3IgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGluaXQgbWVkaWEgdG9vbGJhciBmbHlvdXRcblx0XHRlZGl0b3Iub25jZSggJ3ByZWluaXQnLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggZWRpdG9yLndwICYmIGVkaXRvci53cC5fY3JlYXRlVG9vbGJhciApIHtcblx0XHRcdFx0dG9vbGJhciA9IGVkaXRvci53cC5fY3JlYXRlVG9vbGJhciggW1xuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25sZWZ0Jyxcblx0XHRcdFx0XHQnd3BfaW1nX2FsaWduY2VudGVyJyxcblx0XHRcdFx0XHQnd3BfaW1nX2FsaWducmlnaHQnLFxuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25ub25lJyxcblx0XHRcdFx0XHQnd3BfaW1nX3RoZXBhc3RlX3VwbG9hZCcsXG5cdFx0XHRcdFx0J3dwX2ltZ19lZGl0Jyxcblx0XHRcdFx0XHQnd3BfaW1nX3JlbW92ZScsXG5cdFx0XHRcdF0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cblx0XHQvLyBzZXR1cCBtZWRpYSB0b29sYmFyIGZseW91dCBvbiBub2RlIGNoYW5nZVxuXHRcdGVkaXRvci5vbiggJ3dwdG9vbGJhcicsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciB1cGxvYWRCdG47XG5cdFx0XHRpZiAoIGV2ZW50LmVsZW1lbnQubm9kZU5hbWUgPT09ICdJTUcnICYmICEgZWRpdG9yLndwLmlzUGxhY2Vob2xkZXIoIGV2ZW50LmVsZW1lbnQgKSApIHtcblx0XHRcdFx0ZXZlbnQudG9vbGJhciA9IHRvb2xiYXI7XG5cblx0XHRcdFx0dXBsb2FkQnRuID0gdG9vbGJhci4kZWwuZmluZCgnLnRoZXBhc3RlLXVwbG9hZCcpLmNsb3Nlc3QoJy5tY2UtYnRuJyk7XG5cblx0XHRcdFx0aWYgKCBjYW5VcGxvYWQoIGV2ZW50LmVsZW1lbnQgKSApIHtcblx0XHRcdFx0XHR1cGxvYWRCdG4uc2hvdygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHVwbG9hZEJ0bi5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cblx0XHQvLyB0cnUgaWYgZGF0YSBzb3VyY2Ugb3IgYmxvYiBpbWFnZVxuXHRcdGZ1bmN0aW9uIGNhblVwbG9hZCggaW1nICkge1xuXHRcdFx0dmFyIHN1YiA9IGltZy5zcmMuc3Vic3RyaW5nKDAsNSk7XG5cdFx0XHRyZXR1cm4gc3ViID09PSAnYmxvYjonIHx8IHN1YiA9PT0gJ2RhdGE6Jztcblx0XHR9XG5cblx0XHQvLyBzZXR1cCBtZWRpYSB0b29sYmFyIGZseW91dFxuXHRcdGVkaXRvclxuXHRcdFx0Lm9uKCAnQmVmb3JlUGFzdGVQcmVQcm9jZXNzJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vIHJlbW92ZSBzdmcgZGF0YVxuXHRcdFx0XHRpZiAoICBlLmNvbnRlbnQubWF0Y2goIC8mbHQ7c3ZnW1xcc1xcUy5dKiZsdDtcXC9zdmcmZ3Q7L2kgKSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0ZS5jb250ZW50ID0gJyc7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGU7XG5cblx0XHRcdH0gKVxuXHRcdFx0Lm9uKCAnUGFzdGVQb3N0UHJvY2VzcycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHQvLyB1cGxvYWQgaW1hZ2Vcblx0XHRcdFx0dmFyICRmaXJzdENoaWxkLCAkdXBsb2FkQm94O1xuXG5cdFx0XHRcdGlmICggdGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgKSB7XG5cdFx0XHRcdFx0JGZpcnN0Q2hpbGQgPSAkKGUubm9kZSkuY2hpbGRyZW4oKS5maXJzdCgpO1xuXHRcdFx0XHRcdGlmICggJGZpcnN0Q2hpbGQuaXMoJ2ltZycpICYmIGNhblVwbG9hZCggJGZpcnN0Q2hpbGQuZ2V0KDApICkgKSB7XG5cdFx0XHRcdFx0XHQkdXBsb2FkQm94ID0gdGhlcGFzdGUudXBsb2FkSW1hZ2UoICRmaXJzdENoaWxkLmdldCgwKSwgZWRpdG9yICk7XG5cdFx0XHRcdFx0XHQkZmlyc3RDaGlsZC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdCQoZS5ub2RlKS5hcHBlbmQoICR1cGxvYWRCb3ggKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQ7XG5cblx0fTtcblxuXHR0aW55bWNlLlBsdWdpbk1hbmFnZXIuYWRkKCAndGhlX3Bhc3RlJywgdGhlX3Bhc3RlUGx1Z2luQ2FsbGJhY2sgKTtcblxufSApKGpRdWVyeSk7XG4iXX0=
