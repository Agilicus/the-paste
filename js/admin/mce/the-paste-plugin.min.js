var thepastePluginCallback;!function(t){thepastePluginCallback=function(e){function o(t){var e=t.src.substring(0,5);return"blob:"===e||"data:"===e}function a(a){l.options.editor.auto_upload&&"mceInsertContent"==a.command&&a.value&&a.value.content&&"<img"===a.value.content.substring(0,4).toLowerCase()&&($img=t(e.getBody()).find("."+p),o($img.get(0))&&(l.uploadImage($img.get(0),e),$img.removeClass(p)))}var n,i,l=wp.media.thepaste,p="";l.options.editor.auto_upload="false"!==localStorage.getItem("thepaste.auto_upload"),e.addCommand("cmd_thepaste",function(){l.options.editor.auto_upload=!l.options.editor.auto_upload,localStorage.setItem("thepaste.auto_upload",l.options.editor.auto_upload.toString()),n.active(l.options.editor.auto_upload)}),e.addButton("thepaste",{icon:"thepaste",tooltip:l.l10n.upload_pasted_images,cmd:"cmd_thepaste",onPostRender:function(){n=this},active:l.options.editor.auto_upload}),e.addButton("wp_img_thepaste_upload",{icon:"dashicon dashicons dashicons-upload thepaste-upload",tooltip:l.l10n.upload_image,onclick:function(){var t;t=e.selection.getNode(),l.uploadImage(t,e)}}),e.once("preinit",function(){e.wp&&e.wp._createToolbar&&(i=e.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wp_img_thepaste_upload","wp_img_edit","wp_img_remove"]))}),e.on("wptoolbar",function(t){var a;"IMG"!==t.element.nodeName||e.wp.isPlaceholder(t.element)||(t.toolbar=i,a=i.$el.find(".thepaste-upload").closest(".mce-btn"),o(t.element)?a.show():a.hide())}),e.on("PastePostProcess",function(n){var i;l.options.editor.auto_upload&&(i=t(n.node).children().first(),i.is("img")&&o(i.get(0))&&(p="__pasted_image_tmp_"+Date.now(),i.addClass(p),e.once("ExecCommand",a)))}).on("BeforePastePreProcess",function(t){return t.content.match(/&lt;svg[\s\S.]*&lt;\/svg&gt;/i)&&(t.preventDefault(),t.content=""),t})},tinymce.PluginManager.add("thepaste",thepastePluginCallback)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoZS1wYXN0ZS1wbHVnaW4uanMiXSwibmFtZXMiOlsidGhlcGFzdGVQbHVnaW5DYWxsYmFjayIsIiQiLCJlZGl0b3IiLCJjYW5VcGxvYWQiLCJpbWciLCJzdWIiLCJzcmMiLCJzdWJzdHJpbmciLCJleGVjQ29tbWFuZFVwbG9hZFBhc3RlZEltYWdlIiwiYSIsInRoZXBhc3RlIiwib3B0aW9ucyIsImF1dG9fdXBsb2FkIiwiY29tbWFuZCIsInZhbHVlIiwiY29udGVudCIsInRvTG93ZXJDYXNlIiwiJGltZyIsImdldEJvZHkiLCJmaW5kIiwicGFzdGVkX2ltYWdlX3RtcF9jbGFzcyIsImdldCIsInVwbG9hZEltYWdlIiwicmVtb3ZlQ2xhc3MiLCJwYXN0ZUJ0biIsInRvb2xiYXIiLCJ3cCIsIm1lZGlhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFkZENvbW1hbmQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJhY3RpdmUiLCJhZGRCdXR0b24iLCJpY29uIiwidG9vbHRpcCIsImwxMG4iLCJ1cGxvYWRfcGFzdGVkX2ltYWdlcyIsImNtZCIsIm9uUG9zdFJlbmRlciIsInRoaXMiLCJ1cGxvYWRfaW1hZ2UiLCJvbmNsaWNrIiwiaW1hZ2UiLCJzZWxlY3Rpb24iLCJnZXROb2RlIiwib25jZSIsIl9jcmVhdGVUb29sYmFyIiwib24iLCJldmVudCIsInVwbG9hZEJ0biIsImVsZW1lbnQiLCJub2RlTmFtZSIsImlzUGxhY2Vob2xkZXIiLCIkZWwiLCJjbG9zZXN0Iiwic2hvdyIsImhpZGUiLCJlIiwiJGZpcnN0Q2hpbGQiLCJub2RlIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzIiwiRGF0ZSIsIm5vdyIsImFkZENsYXNzIiwibWF0Y2giLCJwcmV2ZW50RGVmYXVsdCIsInRpbnltY2UiLCJQbHVnaW5NYW5hZ2VyIiwiYWRkIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSx5QkFFSixTQUFVQyxHQUNURCx1QkFBeUIsU0FBVUUsR0F3RWxDLFFBQVNDLEdBQVdDLEdBQ25CLEdBQUlDLEdBQU1ELEVBQUlFLElBQUlDLFVBQVUsRUFBRSxFQUM5QixPQUFlLFVBQVJGLEdBQTJCLFVBQVJBLEVBRzNCLFFBQVNHLEdBQTZCQyxHQUNoQ0MsRUFBU0MsUUFBUVQsT0FBT1UsYUFDZixvQkFBYkgsRUFBRUksU0FDQ0osRUFBRUssT0FBWUwsRUFBRUssTUFBTUMsU0FDekIsU0FBV04sRUFBRUssTUFBTUMsUUFBUVIsVUFBVSxFQUFFLEdBQUdTLGdCQUUxQ0MsS0FBT2hCLEVBQUVDLEVBQU9nQixXQUFXQyxLQUFLLElBQUlDLEdBQy9CakIsRUFBV2MsS0FBS0ksSUFBSSxNQUN4QlgsRUFBU1ksWUFBYUwsS0FBS0ksSUFBSSxHQUFJbkIsR0FDbkNlLEtBQUtNLFlBQVlILEtBckZwQixHQUFJSSxHQU1IQyxFQURBZixFQUFXZ0IsR0FBR0MsTUFBTWpCLFNBR3BCVSxFQUF5QixFQUcxQlYsR0FBU0MsUUFBUVQsT0FBT1UsWUFBaUUsVUFBbkRnQixhQUFhQyxRQUFTLHdCQUU1RDNCLEVBQU80QixXQUFZLGVBQWdCLFdBQ2xDcEIsRUFBU0MsUUFBUVQsT0FBT1UsYUFBZ0JGLEVBQVNDLFFBQVFULE9BQU9VLFlBQ2hFZ0IsYUFBYUcsUUFBUyx1QkFBd0JyQixFQUFTQyxRQUFRVCxPQUFPVSxZQUFZb0IsWUFDbEZSLEVBQVNTLE9BQVF2QixFQUFTQyxRQUFRVCxPQUFPVSxlQUsxQ1YsRUFBT2dDLFVBQVUsWUFDaEJDLEtBQU0sV0FDTkMsUUFBUzFCLEVBQVMyQixLQUFLQyxxQkFDdkJDLElBQU0sZUFDTkMsYUFBYyxXQUNiaEIsRUFBV2lCLE1BRVpSLE9BQU92QixFQUFTQyxRQUFRVCxPQUFPVSxjQUdoQ1YsRUFBT2dDLFVBQVUsMEJBQ2hCQyxLQUFNLHNEQUNOQyxRQUFTMUIsRUFBUzJCLEtBQUtLLGFBQ3ZCQyxRQUFTLFdBRVIsR0FBSUMsRUFDSkEsR0FBUTFDLEVBQU8yQyxVQUFVQyxVQUV6QnBDLEVBQVNZLFlBQWFzQixFQUFPMUMsTUFJL0JBLEVBQU82QyxLQUFNLFVBQVcsV0FDbEI3QyxFQUFPd0IsSUFBTXhCLEVBQU93QixHQUFHc0IsaUJBQzNCdkIsRUFBVXZCLEVBQU93QixHQUFHc0IsZ0JBQ25CLG1CQUNBLHFCQUNBLG9CQUNBLG1CQUNBLHlCQUNBLGNBQ0EscUJBS0g5QyxFQUFPK0MsR0FBSSxZQUFhLFNBQVVDLEdBQ2pDLEdBQUlDLEVBQzRCLFNBQTNCRCxFQUFNRSxRQUFRQyxVQUF3Qm5ELEVBQU93QixHQUFHNEIsY0FBZUosRUFBTUUsV0FDekVGLEVBQU16QixRQUFVQSxFQUNoQjBCLEVBQVkxQixFQUFROEIsSUFBSXBDLEtBQUssb0JBQW9CcUMsUUFBUSxZQUVwRHJELEVBQVcrQyxFQUFNRSxTQUNyQkQsRUFBVU0sT0FFVk4sRUFBVU8sVUF1QmJ4RCxFQUVFK0MsR0FBSSxtQkFBb0IsU0FBU1UsR0FDakMsR0FBSUMsRUFDQ2xELEdBQVNDLFFBQVFULE9BQU9VLGNBQzVCZ0QsRUFBYzNELEVBQUUwRCxFQUFFRSxNQUFNQyxXQUFXQyxRQUM5QkgsRUFBWUksR0FBRyxRQUFVN0QsRUFBV3lELEVBQVl2QyxJQUFJLE1BQ3hERCxFQXpGdUIsc0JBeUY0QjZDLEtBQUtDLE1BQ3hETixFQUFZTyxTQUFVL0MsR0FDdEJsQixFQUFPNkMsS0FBTSxjQUFldkMsT0FJOUJ5QyxHQUFJLHdCQUF5QixTQUFTVSxHQU10QyxNQUpNQSxHQUFFNUMsUUFBUXFELE1BQU8sbUNBQ3RCVCxFQUFFVSxpQkFDRlYsRUFBRTVDLFFBQVUsSUFFTjRDLEtBT1ZXLFFBQVFDLGNBQWNDLElBQUssV0FBWXhFLHlCQUVwQ3lFIiwiZmlsZSI6InRoZS1wYXN0ZS1wbHVnaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHRoZXBhc3RlUGx1Z2luQ2FsbGJhY2s7XG5cbihmdW5jdGlvbigkKXtcblx0dGhlcGFzdGVQbHVnaW5DYWxsYmFjayA9IGZ1bmN0aW9uKCBlZGl0b3IgKSB7XG5cdFx0dmFyIHBhc3RlQnRuLFxuXHRcdFx0b3JpZ0RvbUFkZCxcblx0XHRcdGNsaXBib2FyZEhhc0ltYWdlID0gZmFsc2UsXG5cdFx0XHRjdXJyZW50Q2xpcGJvYXJkRXZlbnQgPSBudWxsLFxuXHRcdFx0cHJldmVudEltYWdlUGFzdGUgPSBmYWxzZSxcblx0XHRcdHRoZXBhc3RlID0gd3AubWVkaWEudGhlcGFzdGUsXG5cdFx0XHR0b29sYmFyLFxuXHRcdFx0cGFzdGVkX2ltYWdlX3RtcF9wcmVmaXggPSAnX19wYXN0ZWRfaW1hZ2VfdG1wXycsXG5cdFx0XHRwYXN0ZWRfaW1hZ2VfdG1wX2NsYXNzID0gJyc7XG5cblx0XHQvLyBkZWZhdWx0IG9uXG5cdFx0dGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSggJ3RoZXBhc3RlLmF1dG9fdXBsb2FkJyApICE9PSAnZmFsc2UnO1xuXG5cdFx0ZWRpdG9yLmFkZENvbW1hbmQoICdjbWRfdGhlcGFzdGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkID0gISB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZDtcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCAndGhlcGFzdGUuYXV0b191cGxvYWQnLCB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZC50b1N0cmluZygpICk7XG5cdFx0XHRwYXN0ZUJ0bi5hY3RpdmUoIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkICk7XG5cblx0XHR9KTtcblxuXG5cdFx0ZWRpdG9yLmFkZEJ1dHRvbigndGhlcGFzdGUnLCB7XG5cdFx0XHRpY29uOiAndGhlcGFzdGUnLFxuXHRcdFx0dG9vbHRpcDogdGhlcGFzdGUubDEwbi51cGxvYWRfcGFzdGVkX2ltYWdlcyxcblx0XHRcdGNtZCA6ICdjbWRfdGhlcGFzdGUnLFxuXHRcdFx0b25Qb3N0UmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cGFzdGVCdG4gPSB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGFjdGl2ZTp0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZFxuXHRcdH0pO1xuXG5cdFx0ZWRpdG9yLmFkZEJ1dHRvbignd3BfaW1nX3RoZXBhc3RlX3VwbG9hZCcsIHtcblx0XHRcdGljb246ICdkYXNoaWNvbiBkYXNoaWNvbnMgZGFzaGljb25zLXVwbG9hZCB0aGVwYXN0ZS11cGxvYWQnLFxuXHRcdFx0dG9vbHRpcDogdGhlcGFzdGUubDEwbi51cGxvYWRfaW1hZ2UsXG5cdFx0XHRvbmNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gd3JhcCBpbWcsIHVwbG9hZFxuXHRcdFx0XHR2YXIgaW1hZ2U7XG5cdFx0XHRcdGltYWdlID0gZWRpdG9yLnNlbGVjdGlvbi5nZXROb2RlKCk7XG5cblx0XHRcdFx0dGhlcGFzdGUudXBsb2FkSW1hZ2UoIGltYWdlLCBlZGl0b3IgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGVkaXRvci5vbmNlKCAncHJlaW5pdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBlZGl0b3Iud3AgJiYgZWRpdG9yLndwLl9jcmVhdGVUb29sYmFyICkge1xuXHRcdFx0XHR0b29sYmFyID0gZWRpdG9yLndwLl9jcmVhdGVUb29sYmFyKCBbXG5cdFx0XHRcdFx0J3dwX2ltZ19hbGlnbmxlZnQnLFxuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25jZW50ZXInLFxuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25yaWdodCcsXG5cdFx0XHRcdFx0J3dwX2ltZ19hbGlnbm5vbmUnLFxuXHRcdFx0XHRcdCd3cF9pbWdfdGhlcGFzdGVfdXBsb2FkJyxcblx0XHRcdFx0XHQnd3BfaW1nX2VkaXQnLFxuXHRcdFx0XHRcdCd3cF9pbWdfcmVtb3ZlJyxcblx0XHRcdFx0XSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdGVkaXRvci5vbiggJ3dwdG9vbGJhcicsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciB1cGxvYWRCdG47XG5cdFx0XHRpZiAoIGV2ZW50LmVsZW1lbnQubm9kZU5hbWUgPT09ICdJTUcnICYmICEgZWRpdG9yLndwLmlzUGxhY2Vob2xkZXIoIGV2ZW50LmVsZW1lbnQgKSApIHtcblx0XHRcdFx0ZXZlbnQudG9vbGJhciA9IHRvb2xiYXI7XG5cdFx0XHRcdHVwbG9hZEJ0biA9IHRvb2xiYXIuJGVsLmZpbmQoJy50aGVwYXN0ZS11cGxvYWQnKS5jbG9zZXN0KCcubWNlLWJ0bicpO1xuXG5cdFx0XHRcdGlmICggY2FuVXBsb2FkKCBldmVudC5lbGVtZW50ICkgKSB7XG5cdFx0XHRcdFx0dXBsb2FkQnRuLnNob3coKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR1cGxvYWRCdG4uaGlkZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0ZnVuY3Rpb24gY2FuVXBsb2FkKCBpbWcgKSB7XG5cdFx0XHR2YXIgc3ViID0gaW1nLnNyYy5zdWJzdHJpbmcoMCw1KTtcblx0XHRcdHJldHVybiBzdWIgPT09ICdibG9iOicgfHwgc3ViID09PSAnZGF0YTonO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGV4ZWNDb21tYW5kVXBsb2FkUGFzdGVkSW1hZ2UoYSl7XG5cdFx0XHRpZiAoIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkICYmXG5cdFx0XHRcdGEuY29tbWFuZCA9PSAnbWNlSW5zZXJ0Q29udGVudCcgJiZcblx0XHRcdFx0ISEgYS52YWx1ZSAmJiAhISBhLnZhbHVlLmNvbnRlbnQgJiZcblx0XHRcdFx0XCI8aW1nXCIgPT09IGEudmFsdWUuY29udGVudC5zdWJzdHJpbmcoMCw0KS50b0xvd2VyQ2FzZSgpXG5cdFx0XHQpIHtcblx0XHRcdFx0JGltZyA9ICQoZWRpdG9yLmdldEJvZHkoKSkuZmluZCgnLicrcGFzdGVkX2ltYWdlX3RtcF9jbGFzcyk7XG5cdFx0XHRcdGlmICggY2FuVXBsb2FkKCAkaW1nLmdldCgwKSApICkge1xuXHRcdFx0XHRcdHRoZXBhc3RlLnVwbG9hZEltYWdlKCAkaW1nLmdldCgwKSwgZWRpdG9yICk7XG5cdFx0XHRcdFx0JGltZy5yZW1vdmVDbGFzcyhwYXN0ZWRfaW1hZ2VfdG1wX2NsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRlZGl0b3Jcbi8vXHRcdFx0Lm9uKCAnaW5pdCcsIHNldHVwRWRpdG9yRG9tIClcblx0XHRcdC5vbiggJ1Bhc3RlUG9zdFByb2Nlc3MnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0dmFyICRmaXJzdENoaWxkO1xuXHRcdFx0XHRpZiAoIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkICkge1xuXHRcdFx0XHRcdCRmaXJzdENoaWxkID0gJChlLm5vZGUpLmNoaWxkcmVuKCkuZmlyc3QoKTtcblx0XHRcdFx0XHRpZiAoICRmaXJzdENoaWxkLmlzKCdpbWcnKSAmJiBjYW5VcGxvYWQoICRmaXJzdENoaWxkLmdldCgwKSApICkge1xuXHRcdFx0XHRcdFx0cGFzdGVkX2ltYWdlX3RtcF9jbGFzcyA9IHBhc3RlZF9pbWFnZV90bXBfcHJlZml4ICsgRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRcdCRmaXJzdENoaWxkLmFkZENsYXNzKCBwYXN0ZWRfaW1hZ2VfdG1wX2NsYXNzICk7XG5cdFx0XHRcdFx0XHRlZGl0b3Iub25jZSggJ0V4ZWNDb21tYW5kJywgZXhlY0NvbW1hbmRVcGxvYWRQYXN0ZWRJbWFnZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5vbiggJ0JlZm9yZVBhc3RlUHJlUHJvY2VzcycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHQvLyByZW1vdmUgc3ZnIGRhdGEgZnJvbSBpbGx1c3RyYXRvclxuXHRcdFx0XHRpZiAoICBlLmNvbnRlbnQubWF0Y2goIC8mbHQ7c3ZnW1xcc1xcUy5dKiZsdDtcXC9zdmcmZ3Q7L2kgKSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0ZS5jb250ZW50ID0gJyc7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGU7XG5cblx0XHRcdH0gKVxuXHRcdFx0O1xuXG5cdH07XG5cblx0dGlueW1jZS5QbHVnaW5NYW5hZ2VyLmFkZCggJ3RoZXBhc3RlJywgdGhlcGFzdGVQbHVnaW5DYWxsYmFjayApO1xuXG59ICkoalF1ZXJ5KTtcbiJdfQ==
