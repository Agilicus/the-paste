var the_pastePluginCallback;!function(t){the_pastePluginCallback=function(o){function e(t){var o=t.src.substring(0,5);return"blob:"===o||"data:"===o}var a,n,i=wp.media.thepaste;i.options.editor.auto_upload="false"!==localStorage.getItem("thepaste.auto_upload"),o.addCommand("cmd_thepaste",function(){i.options.editor.auto_upload=!i.options.editor.auto_upload,localStorage.setItem("thepaste.auto_upload",i.options.editor.auto_upload.toString()),a.active(i.options.editor.auto_upload)}),o.addButton("thepaste",{icon:"thepaste",tooltip:i.l10n.upload_pasted_images,cmd:"cmd_thepaste",onPostRender:function(){a=this},active:i.options.editor.auto_upload}),o.addButton("wp_img_thepaste_upload",{icon:"dashicon dashicons dashicons-upload thepaste-upload",tooltip:i.l10n.upload_image,onclick:function(){var t;t=o.selection.getNode(),i.uploadImage(t,o)}}),o.once("preinit",function(){o.wp&&o.wp._createToolbar&&(n=o.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wp_img_thepaste_upload","wp_img_edit","wp_img_remove"]))}),o.on("wptoolbar",function(t){var a;"IMG"!==t.element.nodeName||o.wp.isPlaceholder(t.element)||(t.toolbar=n,a=n.$el.find(".thepaste-upload").closest(".mce-btn"),e(t.element)?a.show():a.hide())}),o.on("BeforePastePreProcess",function(t){return console.log(t.content),t.content.match(/&lt;svg[\s\S.]*&lt;\/svg&gt;/i)&&(t.preventDefault(),t.content=""),t}).on("PastePostProcess",function(e){var a,n,l;a=t(e.node).children().first(),a.is("img")&&(l=a.get(0),console.log(l),l.onload=function(e){(i.options.editor.auto_upload||this.naturalWidth*this.naturalHeight>i.options.editor.force_upload_size)&&(n=i.uploadImage(a.get(0),o),a.remove(),t(e.node).append(n))})})},tinymce.PluginManager.add("the_paste",the_pastePluginCallback)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoZS1wYXN0ZS1wbHVnaW4uanMiXSwibmFtZXMiOlsidGhlX3Bhc3RlUGx1Z2luQ2FsbGJhY2siLCIkIiwiZWRpdG9yIiwiY2FuVXBsb2FkIiwiaW1nIiwic3ViIiwic3JjIiwic3Vic3RyaW5nIiwicGFzdGVCdG4iLCJ0b29sYmFyIiwidGhlcGFzdGUiLCJ3cCIsIm1lZGlhIiwib3B0aW9ucyIsImF1dG9fdXBsb2FkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFkZENvbW1hbmQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJhY3RpdmUiLCJhZGRCdXR0b24iLCJpY29uIiwidG9vbHRpcCIsImwxMG4iLCJ1cGxvYWRfcGFzdGVkX2ltYWdlcyIsImNtZCIsIm9uUG9zdFJlbmRlciIsInRoaXMiLCJ1cGxvYWRfaW1hZ2UiLCJvbmNsaWNrIiwiaW1hZ2UiLCJzZWxlY3Rpb24iLCJnZXROb2RlIiwidXBsb2FkSW1hZ2UiLCJvbmNlIiwiX2NyZWF0ZVRvb2xiYXIiLCJvbiIsImV2ZW50IiwidXBsb2FkQnRuIiwiZWxlbWVudCIsIm5vZGVOYW1lIiwiaXNQbGFjZWhvbGRlciIsIiRlbCIsImZpbmQiLCJjbG9zZXN0Iiwic2hvdyIsImhpZGUiLCJlIiwiY29uc29sZSIsImxvZyIsImNvbnRlbnQiLCJtYXRjaCIsInByZXZlbnREZWZhdWx0IiwiJGZpcnN0Q2hpbGQiLCIkdXBsb2FkQm94IiwiZWwiLCJub2RlIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzIiwiZ2V0Iiwib25sb2FkIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsImZvcmNlX3VwbG9hZF9zaXplIiwicmVtb3ZlIiwiYXBwZW5kIiwidGlueW1jZSIsIlBsdWdpbk1hbmFnZXIiLCJhZGQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLDBCQUVKLFNBQVVDLEdBQ1RELHdCQUEwQixTQUFVRSxHQThFbkMsUUFBU0MsR0FBV0MsR0FDbkIsR0FBSUMsR0FBTUQsRUFBSUUsSUFBSUMsVUFBVSxFQUFFLEVBQzlCLE9BQWUsVUFBUkYsR0FBMkIsVUFBUkEsRUEvRTNCLEdBQUlHLEdBTUhDLEVBREFDLEVBQVdDLEdBQUdDLE1BQU1GLFFBTXJCQSxHQUFTRyxRQUFRWCxPQUFPWSxZQUFpRSxVQUFuREMsYUFBYUMsUUFBUyx3QkFHNURkLEVBQU9lLFdBQVksZUFBZ0IsV0FDbENQLEVBQVNHLFFBQVFYLE9BQU9ZLGFBQWdCSixFQUFTRyxRQUFRWCxPQUFPWSxZQUNoRUMsYUFBYUcsUUFBUyx1QkFBd0JSLEVBQVNHLFFBQVFYLE9BQU9ZLFlBQVlLLFlBQ2xGWCxFQUFTWSxPQUFRVixFQUFTRyxRQUFRWCxPQUFPWSxlQUsxQ1osRUFBT21CLFVBQVUsWUFDaEJDLEtBQU0sV0FDTkMsUUFBU2IsRUFBU2MsS0FBS0MscUJBQ3ZCQyxJQUFNLGVBQ05DLGFBQWMsV0FDYm5CLEVBQVdvQixNQUVaUixPQUFPVixFQUFTRyxRQUFRWCxPQUFPWSxjQUloQ1osRUFBT21CLFVBQVUsMEJBQ2hCQyxLQUFNLHNEQUNOQyxRQUFTYixFQUFTYyxLQUFLSyxhQUN2QkMsUUFBUyxXQUVSLEdBQUlDLEVBQ0pBLEdBQVE3QixFQUFPOEIsVUFBVUMsVUFFekJ2QixFQUFTd0IsWUFBYUgsRUFBTzdCLE1BSy9CQSxFQUFPaUMsS0FBTSxVQUFXLFdBQ2xCakMsRUFBT1MsSUFBTVQsRUFBT1MsR0FBR3lCLGlCQUMzQjNCLEVBQVVQLEVBQU9TLEdBQUd5QixnQkFDbkIsbUJBQ0EscUJBQ0Esb0JBQ0EsbUJBQ0EseUJBQ0EsY0FDQSxxQkFNSGxDLEVBQU9tQyxHQUFJLFlBQWEsU0FBVUMsR0FDakMsR0FBSUMsRUFDNEIsU0FBM0JELEVBQU1FLFFBQVFDLFVBQXdCdkMsRUFBT1MsR0FBRytCLGNBQWVKLEVBQU1FLFdBQ3pFRixFQUFNN0IsUUFBVUEsRUFFaEI4QixFQUFZOUIsRUFBUWtDLElBQUlDLEtBQUssb0JBQW9CQyxRQUFRLFlBRXBEMUMsRUFBV21DLEVBQU1FLFNBQ3JCRCxFQUFVTyxPQUVWUCxFQUFVUSxVQVliN0MsRUFDRW1DLEdBQUksd0JBQXlCLFNBQVNXLEdBT3RDLE1BTEFDLFNBQVFDLElBQUlGLEVBQUVHLFNBQ1JILEVBQUVHLFFBQVFDLE1BQU8sbUNBQ3RCSixFQUFFSyxpQkFDRkwsRUFBRUcsUUFBVSxJQUVOSCxJQUdQWCxHQUFJLG1CQUFvQixTQUFTVyxHQUVqQyxHQUFJTSxHQUFhQyxFQUFZQyxDQVM3QkYsR0FBY3JELEVBQUUrQyxFQUFFUyxNQUFNQyxXQUFXQyxRQUM5QkwsRUFBWU0sR0FBRyxTQUNuQkosRUFBS0YsRUFBWU8sSUFBSSxHQUNyQlosUUFBUUMsSUFBS00sR0FDYkEsRUFBR00sT0FBUyxTQUFTZCxJQUNmdEMsRUFBU0csUUFBUVgsT0FBT1ksYUFBZWMsS0FBS21DLGFBQWVuQyxLQUFLb0MsY0FBZ0J0RCxFQUFTRyxRQUFRWCxPQUFPK0QscUJBQzVHVixFQUFhN0MsRUFBU3dCLFlBQWFvQixFQUFZTyxJQUFJLEdBQUkzRCxHQUN2RG9ELEVBQVlZLFNBQ1pqRSxFQUFFK0MsRUFBRVMsTUFBTVUsT0FBUVosU0FXeEJhLFFBQVFDLGNBQWNDLElBQUssWUFBYXRFLDBCQUVyQ3VFIiwiZmlsZSI6InRoZS1wYXN0ZS1wbHVnaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHRoZV9wYXN0ZVBsdWdpbkNhbGxiYWNrO1xuXG4oZnVuY3Rpb24oJCl7XG5cdHRoZV9wYXN0ZVBsdWdpbkNhbGxiYWNrID0gZnVuY3Rpb24oIGVkaXRvciApIHtcblx0XHR2YXIgcGFzdGVCdG4sXG5cdFx0XHRvcmlnRG9tQWRkLFxuXHRcdFx0Y2xpcGJvYXJkSGFzSW1hZ2UgPSBmYWxzZSxcblx0XHRcdGN1cnJlbnRDbGlwYm9hcmRFdmVudCA9IG51bGwsXG5cdFx0XHRwcmV2ZW50SW1hZ2VQYXN0ZSA9IGZhbHNlLFxuXHRcdFx0dGhlcGFzdGUgPSB3cC5tZWRpYS50aGVwYXN0ZSxcblx0XHRcdHRvb2xiYXIsXG5cdFx0XHRwYXN0ZWRfaW1hZ2VfdG1wX3ByZWZpeCA9ICdfX3Bhc3RlZF9pbWFnZV90bXBfJyxcblx0XHRcdHBhc3RlZF9pbWFnZV90bXBfY2xhc3MgPSAnJztcblxuXHRcdC8vIGRlZmF1bHQgb25cblx0XHR0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5hdXRvX3VwbG9hZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCAndGhlcGFzdGUuYXV0b191cGxvYWQnICkgIT09ICdmYWxzZSc7XG5cblx0XHQvLyBlbmFibGUgLyBkaXNhYmxlIGF1dG91cGxvYWRcblx0XHRlZGl0b3IuYWRkQ29tbWFuZCggJ2NtZF90aGVwYXN0ZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgPSAhIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkO1xuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oICd0aGVwYXN0ZS5hdXRvX3VwbG9hZCcsIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkLnRvU3RyaW5nKCkgKTtcblx0XHRcdHBhc3RlQnRuLmFjdGl2ZSggdGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgKTtcblxuXHRcdH0pO1xuXG5cdFx0Ly8gZW5hYmxlIC8gZGlzYWJsZSBhdXRvdXBsb2FkIGJ1dHRvblxuXHRcdGVkaXRvci5hZGRCdXR0b24oJ3RoZXBhc3RlJywge1xuXHRcdFx0aWNvbjogJ3RoZXBhc3RlJyxcblx0XHRcdHRvb2x0aXA6IHRoZXBhc3RlLmwxMG4udXBsb2FkX3Bhc3RlZF9pbWFnZXMsXG5cdFx0XHRjbWQgOiAnY21kX3RoZXBhc3RlJyxcblx0XHRcdG9uUG9zdFJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHBhc3RlQnRuID0gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRhY3RpdmU6dGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWRcblx0XHR9KTtcblxuXHRcdC8vIHVwbG9hZCBidXR0b24gaW4gbWVkaWEgdG9vbGJhciBmbHlvdXRcblx0XHRlZGl0b3IuYWRkQnV0dG9uKCd3cF9pbWdfdGhlcGFzdGVfdXBsb2FkJywge1xuXHRcdFx0aWNvbjogJ2Rhc2hpY29uIGRhc2hpY29ucyBkYXNoaWNvbnMtdXBsb2FkIHRoZXBhc3RlLXVwbG9hZCcsXG5cdFx0XHR0b29sdGlwOiB0aGVwYXN0ZS5sMTBuLnVwbG9hZF9pbWFnZSxcblx0XHRcdG9uY2xpY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyB3cmFwIGltZywgdXBsb2FkXG5cdFx0XHRcdHZhciBpbWFnZTtcblx0XHRcdFx0aW1hZ2UgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldE5vZGUoKTtcblxuXHRcdFx0XHR0aGVwYXN0ZS51cGxvYWRJbWFnZSggaW1hZ2UsIGVkaXRvciApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gaW5pdCBtZWRpYSB0b29sYmFyIGZseW91dFxuXHRcdGVkaXRvci5vbmNlKCAncHJlaW5pdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBlZGl0b3Iud3AgJiYgZWRpdG9yLndwLl9jcmVhdGVUb29sYmFyICkge1xuXHRcdFx0XHR0b29sYmFyID0gZWRpdG9yLndwLl9jcmVhdGVUb29sYmFyKCBbXG5cdFx0XHRcdFx0J3dwX2ltZ19hbGlnbmxlZnQnLFxuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25jZW50ZXInLFxuXHRcdFx0XHRcdCd3cF9pbWdfYWxpZ25yaWdodCcsXG5cdFx0XHRcdFx0J3dwX2ltZ19hbGlnbm5vbmUnLFxuXHRcdFx0XHRcdCd3cF9pbWdfdGhlcGFzdGVfdXBsb2FkJyxcblx0XHRcdFx0XHQnd3BfaW1nX2VkaXQnLFxuXHRcdFx0XHRcdCd3cF9pbWdfcmVtb3ZlJyxcblx0XHRcdFx0XSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdC8vIHNldHVwIG1lZGlhIHRvb2xiYXIgZmx5b3V0IG9uIG5vZGUgY2hhbmdlXG5cdFx0ZWRpdG9yLm9uKCAnd3B0b29sYmFyJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHVwbG9hZEJ0bjtcblx0XHRcdGlmICggZXZlbnQuZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lNRycgJiYgISBlZGl0b3Iud3AuaXNQbGFjZWhvbGRlciggZXZlbnQuZWxlbWVudCApICkge1xuXHRcdFx0XHRldmVudC50b29sYmFyID0gdG9vbGJhcjtcblxuXHRcdFx0XHR1cGxvYWRCdG4gPSB0b29sYmFyLiRlbC5maW5kKCcudGhlcGFzdGUtdXBsb2FkJykuY2xvc2VzdCgnLm1jZS1idG4nKTtcblxuXHRcdFx0XHRpZiAoIGNhblVwbG9hZCggZXZlbnQuZWxlbWVudCApICkge1xuXHRcdFx0XHRcdHVwbG9hZEJ0bi5zaG93KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dXBsb2FkQnRuLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdC8vIHRydSBpZiBkYXRhIHNvdXJjZSBvciBibG9iIGltYWdlXG5cdFx0ZnVuY3Rpb24gY2FuVXBsb2FkKCBpbWcgKSB7XG5cdFx0XHR2YXIgc3ViID0gaW1nLnNyYy5zdWJzdHJpbmcoMCw1KTtcblx0XHRcdHJldHVybiBzdWIgPT09ICdibG9iOicgfHwgc3ViID09PSAnZGF0YTonO1xuXHRcdH1cblxuXHRcdC8vIHNldHVwIG1lZGlhIHRvb2xiYXIgZmx5b3V0XG5cdFx0ZWRpdG9yXG5cdFx0XHQub24oICdCZWZvcmVQYXN0ZVByZVByb2Nlc3MnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0Ly8gcmVtb3ZlIHN2ZyBkYXRhXG5cdFx0XHRcdGNvbnNvbGUubG9nKGUuY29udGVudCk7XG5cdFx0XHRcdGlmICggIGUuY29udGVudC5tYXRjaCggLyZsdDtzdmdbXFxzXFxTLl0qJmx0O1xcL3N2ZyZndDsvaSApICkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRlLmNvbnRlbnQgPSAnJztcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZTtcblxuXHRcdFx0fSApXG5cdFx0XHQub24oICdQYXN0ZVBvc3RQcm9jZXNzJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vIHVwbG9hZCBpbWFnZVxuXHRcdFx0XHR2YXIgJGZpcnN0Q2hpbGQsICR1cGxvYWRCb3gsIGVsO1xuXHRcdFx0XHQvKlxuXHRcdFx0XHRpZiAoIHRoZXBhc3RlLm9wdGlvbnMuZWRpdG9yLmF1dG9fdXBsb2FkICkge1xuXHRcdFx0XHRcdCRmaXJzdENoaWxkID0gJChlLm5vZGUpLmNoaWxkcmVuKCkuZmlyc3QoKTtcblx0XHRcdFx0XHRpZiAoICRmaXJzdENoaWxkLmlzKCdpbWcnKSAmJiBjYW5VcGxvYWQoICRmaXJzdENoaWxkLmdldCgwKSApICkge1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvKi9cblxuXHRcdFx0XHQkZmlyc3RDaGlsZCA9ICQoZS5ub2RlKS5jaGlsZHJlbigpLmZpcnN0KCk7XG5cdFx0XHRcdGlmICggJGZpcnN0Q2hpbGQuaXMoJ2ltZycpICkge1xuXHRcdFx0XHRcdGVsID0gJGZpcnN0Q2hpbGQuZ2V0KDApO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCBlbCApO1xuXHRcdFx0XHRcdGVsLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHRcdGlmICggdGhlcGFzdGUub3B0aW9ucy5lZGl0b3IuYXV0b191cGxvYWQgfHwgdGhpcy5uYXR1cmFsV2lkdGggKiB0aGlzLm5hdHVyYWxIZWlnaHQgPiB0aGVwYXN0ZS5vcHRpb25zLmVkaXRvci5mb3JjZV91cGxvYWRfc2l6ZSApIHtcblx0XHRcdFx0XHRcdFx0JHVwbG9hZEJveCA9IHRoZXBhc3RlLnVwbG9hZEltYWdlKCAkZmlyc3RDaGlsZC5nZXQoMCksIGVkaXRvciApO1xuXHRcdFx0XHRcdFx0XHQkZmlyc3RDaGlsZC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0JChlLm5vZGUpLmFwcGVuZCggJHVwbG9hZEJveCApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vKi9cblx0XHRcdH0pXG5cdFx0XHQ7XG5cblx0fTtcblxuXHR0aW55bWNlLlBsdWdpbk1hbmFnZXIuYWRkKCAndGhlX3Bhc3RlJywgdGhlX3Bhc3RlUGx1Z2luQ2FsbGJhY2sgKTtcblxufSApKGpRdWVyeSk7XG4iXX0=
